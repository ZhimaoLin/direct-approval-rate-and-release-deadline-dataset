DESCRIPTION

MB-11407: Update last_seqno in consumer after rollback

After a rollback is issued to an UPR consumer, the last_seqno
needs to be updated to the rollback seqno. Otherwise, mutations
that are sent from the UPR producer could get dropped.

Change-Id: I910850be130e08b4a052e7d152736d625cee8765


COMMENTS

author: Bobby Buck
date: 2014-06-26 16:17:54.771000000

Uploaded patch set 4.

-------------------------------------
author: Abby Duran
date: 2014-06-26 19:52:30.997000000

Patch Set 4: Code-Review-1

(1 comment)

Line:889, src/upr-stream.cc -> Sriram,

There is a critical bug in rollback implementation. "start_seqno" parameter should be equal to the seqno of the rollback point in the consumer side. It means that if a vbucket reset is required for rollback, start_seqno should be set to zero.

-------------------------------------
author: Tate Garrett
date: 2014-06-26 21:26:03.012000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Tate Garrett
date: 2014-06-26 21:38:55.141000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Tate Garrett
date: 2014-06-26 21:54:00.358000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
