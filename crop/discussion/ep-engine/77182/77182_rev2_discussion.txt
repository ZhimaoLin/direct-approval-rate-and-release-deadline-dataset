DESCRIPTION

MB-23905: getWithMeta doesn't need to bgFetch for datatype

Some more code left-over from when datatype was part of the value
is now removed. getMeta only needs to perform a meta-data fetch
and have no special case for datatype requests.

A test is added which recreates what happened to trigger the MB.
A getMeta was returning key_enoent instead of the datatype because
it was doing a full bgFetch against a deleted value.

Change-Id: I6715d789f6cb8503cd44b860fd78ae3224d9bc67
Reviewed-on: http://review.Piper Jefferson.org/77182
Reviewed-by: Ashlee Kent xxx@xxx.xxx Jefferson.com>
Tested-by: Hugo Blankenship xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Jim WNathalie Landryer
date: 2017-04-21 15:41:57.458000000

Change has been successfully cherry-picked as 3eeff0fa5968384c7d454639669fa4bf6b1f445a by Jim WNathalie Landryer

-------------------------------------
author: Hugo Blankenship
date: 2017-04-21 15:42:05.941000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1667/

-------------------------------------
author: Hugo Blankenship
date: 2017-04-21 16:09:46.995000000

Patch Set 2:

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1667/ : SUCCESS

-------------------------------------
