DESCRIPTION

MB-18135: Test for checking the existence of dead connections

Dead connections are usually cleaned-up by manageConnections.
manageconnections is invoked in the run() of ConnManager,
which is a NONIO Task.  The task has a MIN_SLEEP_TIME of 2s,
which means dead connections will only be clean-up at most
every 2s.  Therefore if we delete a bucket which calls the
shutdownAllConnections function it is possible for dead
connections remain.  This causes the function
responsible for destroying a bucket to wait indefinitely
for the dead connections to be disconnected.

The test being introduced checks to see if dead connections
remain after calling the shutdownAllConnections function.
The test is currently disabled.

A subsequent patch will provide a fix for MB-18135 whereby
the shutdownAllConnections function cleans-up dead
connections.  The test will be enabled in the subsequent
patch.

Change-Id: Id229cccb26e9efb09c285854f5500355a0f1c4e1


COMMENTS

author: Kymani Ramirez
date: 2016-02-24 16:30:35.156000000

Uploaded patch set 5.

-------------------------------------
author: Hugo Blankenship
date: 2016-02-24 16:30:40.800000000

Patch Set 5:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/2659/ (2/2)

-------------------------------------
author: Hugo Blankenship
date: 2016-02-24 16:39:57.673000000

Patch Set 5: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/2659/ : FAILURE

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1915/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-02-24 16:54:51.856000000

Patch Set 5: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1916/ (2/2)

-------------------------------------
author: Hugo Blankenship
date: 2016-02-24 17:03:11.455000000

Patch Set 5: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/2660/ : SUCCESS

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1916/ : SUCCESS

-------------------------------------
author: Kymani Ramirez
date: 2016-02-24 17:11:20.380000000

Removed the following votes:

* Verified+1 by Hugo Blankenship xxx@xxx.xxx Jefferson.com>


-------------------------------------
author: Tate Garrett
date: 2016-03-01 20:17:28.586000000

Change has been successfully cherry-picked as f47eb0ed00f26f275435728be979e18e2eb60094

-------------------------------------
