DESCRIPTION

MB-12928: Add support for conflict resolution mode

Add support for different conflict resolution modes as part
of hashtable item and item object. Set conflict resolution to
lww (last write wins) if time synchronization is enabled. Ship
conflict resolution mode as part of DCP extended metadata.

Change-Id: Ia1395a85bd8d614d392a45d6b53b9c6c3931860e


COMMENTS

author: Bobby Buck
date: 2015-01-23 21:18:42.754000000

Uploaded patch set 12.

-------------------------------------
author: Abby Duran
date: 2015-01-23 22:30:17.854000000

Patch Set 12: Code-Review-1

(2 comments)

Line:597, src/item.h -> This would cause the compilation warning. Please do static_cast.

Line:2026, src/ep.cc -> Why is 'false' passed? Can we put the comment at least?

-------------------------------------
author: Abby Duran
date: 2015-01-23 22:33:10.257000000

Patch Set 12:

(1 comment)

Line:3116, src/ep.cc -> This function would be called all the time even if the time sync was already enabled. I know the overhead won't be huge, but causes unnecessary function calls.

-------------------------------------
author: Kenny Maynard
date: 2015-01-23 22:56:24.596000000

Patch Set 12:

(1 comment)

Line:317, src/dcp-producer.cc -> I should have caught this before, but we cannot return ENOMEM here since it will cause the connection to be closed. I'll file a bug about this although I don't think we can really handle this scenario properly. There are many places where we do memory allocations and do not check to see if the allocation succeeded or not.

-------------------------------------
author: Bobby Buck
date: 2015-01-23 23:37:36.481000000

Patch Set 12:

(4 comments)

Line:317, src/dcp-producer.cc -> Done

Line:597, src/item.h -> Done

Line:2026, src/ep.cc -> false is being passed to make sure that we don't set the conflict resolution mode inside queueDirty again.

Line:3116, src/ep.cc -> Done

-------------------------------------
