DESCRIPTION

MB-11418: Do not generate access log when resident ratio is greater than 95%

When resident ratio is high, reading from access log during warmup
does not give any benefits and will only slow down warmup process.
Hence, it is good not to generate access log when resident ratio is
greater than 95%

Change-Id: Iab3a87e6db4de93afbe4838f5bcf258b1c0b6722


COMMENTS

author: Adrianna Holmes
date: 2015-09-04 01:25:59.950000000

Uploaded patch set 2: Patch Set 1 was rebased.

-------------------------------------
author: Hugo Blankenship
date: 2015-09-04 01:26:07.285000000

Patch Set 2:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/911/

-------------------------------------
author: Adrianna Holmes
date: 2015-09-04 01:26:33.179000000

Patch Set 2:

The test case takes more than 3 mins to run. Request reviewers to advise if it is good to have such a long test case

-------------------------------------
author: Hugo Blankenship
date: 2015-09-04 01:38:58.411000000

Patch Set 2: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/911/ : SUCCESS

-------------------------------------
author: Emerson Nolan
date: 2015-09-04 01:42:39.543000000

Patch Set 2: Code-Review-2

3 min is way too long for a test. Can you see if you can leverage time_travel, otherwise you should get rid of the test case.

-------------------------------------
author: Ashlee Kent
date: 2015-09-04 08:28:15.522000000

Patch Set 2: Code-Review-1

(3 comments)

Line:210, src/access_scanner.cc -> Can I suggest you make the 95 a configuration.json parameter, as we may want to tune it without rebuilding ep-engine.

Line:234, src/access_scanner.cc -> These two paragraphs are identical - can you refactor into a helper function.

Line:8531, tests/ep_testsuite.cc -> We definitely need a test to validate the bahaviour is correct, but I agree with Abhinav that 3mins runtime is too long.

If the time_travel doesn't work, maybe add a diagnostic call to trigger the access scanner - for example I did something similar with the defragmenter - see "defragmenter_run".

-------------------------------------
author: Tate Garrett
date: 2015-09-09 00:06:47.212000000

Change has been successfully cherry-picked as c040ace26c47365ceebc028ab83f6d12a5f0cd35

-------------------------------------
