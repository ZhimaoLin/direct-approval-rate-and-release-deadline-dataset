DESCRIPTION

Use average instead of total elapsed time

When calculate delete/set eplapsed time for each CouchStore
request use average time instead of total elapsed time for
all batched requests

Change-Id: I10303176264391e65f389e311b9fda3d1de41738


COMMENTS

author: Audrina Olson
date: 2012-04-20 02:25:34.536000000

Uploaded patch set 3.

-------------------------------------
author: Macie Morton
date: 2012-04-20 22:37:27.136000000

Patch Set 3: Looks good to me, approved



-------------------------------------
author: Macie Morton
date: 2012-04-20 22:38:58.166000000

Patch Set 3: Verified



-------------------------------------
author: Tate Garrett
date: 2012-04-20 22:39:05.469000000

Your change could not be merged due to a path conflict.

Please merge (or rebase) the change locally and upload the resolution for review.

-------------------------------------
author: Noah Dean
date: 2012-04-21 04:32:19.887000000

Patch Set 3:

I would strongly recommend against double computing stats.  Putting averages into a histogram greatly reduces the value of the stats as you can no longer see any outliers.  Why not just record the raw values?  You can easily do it without false sharing by duplicating the histogram by spec and recording the individual updates privately and then merging the granular results back into the primary stats.

If you really wanted to do something closer to the description here, you'd still store just the total elapsed time and the number of documents updated and let the caller do the division.  I think that's still going to provide less useful information, though.

-------------------------------------
author: Audrina Olson
date: 2012-04-21 04:52:49.296000000

Patch Set 3:

Thanks for your input Dustin. For the exact same reason (concern) you stated above, we weren't going to submit this after the rebase warning anyway. This isn't an urgent merge so we will take this to a discussion and find a way to collect histogram data for individual commit.

-------------------------------------
author: Audrina Olson
date: 2012-05-11 18:02:28.685000000

Patch Set 3: Abandoned

Not a good patch.

-------------------------------------
