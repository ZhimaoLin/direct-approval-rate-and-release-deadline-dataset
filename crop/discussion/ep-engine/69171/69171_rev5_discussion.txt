DESCRIPTION

MB-21320: Notify memcached to visit readyQ and get any ready items

We should notify memcached to visit readyQ and get any items that were
pushed there during stream creation. Also, we must notify the memcached
about cursor dropping so that it can visit ep-engine and stream any
pending items and do a subsequent stream state change.

This is not a functional fix. It improves performance however.
It is not absolutely necessary to notify immediately as conn manager
will notify eventually.

Change-Id: Id06fc450a20f6d0258fa7c687520dff5f4899a28


COMMENTS

author: Adrianna Holmes
date: 2016-10-31 16:54:28.936000000

Uploaded patch set 5.

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 16:54:35.746000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1667/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 16:55:28.188000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1277/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 16:55:46.617000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1475/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 16:58:11.607000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/297/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 17:10:44.699000000

Patch Set 5: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1667/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1475/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-watson/1475/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1277/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/297/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-10-31 17:26:56.156000000

Patch Set 5: Code-Review+1

Looks good, but would be good to get Jim to look at this also given he's also been working on it recently.

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 18:54:58.341000000

Patch Set 5: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1679/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 19:58:30.839000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1483/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-31 20:04:55.554000000

Patch Set 5: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1277/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1483/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/297/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1679/ : SUCCESS

-------------------------------------
author: Jim WNathalie Landryer
date: 2016-11-01 21:00:48.763000000

Patch Set 5: Code-Review+2

-------------------------------------
author: Adrianna Holmes
date: 2016-11-01 21:06:40.896000000

Patch Set 6: Patch Set 5 was rebased

-------------------------------------
author: Tate Garrett
date: 2016-11-01 21:51:59.262000000

Change has been successfully cherry-picked as 93b5a26c898cc6a342ac45c847edda5bf8d638a3 by Adrianna Holmes

-------------------------------------
