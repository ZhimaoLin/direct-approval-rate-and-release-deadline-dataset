DESCRIPTION

MB-16307: Implement vbucket snapshot for ForestKVStore

Change-Id: Ifdc3729c74dfe0f92f086111ec5af92aee1ff811


COMMENTS

author: Hugo Blankenship
date: 2015-09-21 23:42:19.232000000

Patch Set 8:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/978/

-------------------------------------
author: Hugo Blankenship
date: 2015-09-22 00:55:58.288000000

Patch Set 8: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/978/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2015-09-22 08:04:47.542000000

Patch Set 8: Code-Review-1

(5 comments)

Line:467, src/kvstore.h -> Could you document the meaning of the new `persist` argument?

Line:89, src/kvstore.cc -> Perhaps define an equality operator for vbucket_state as that will greatly simplify the code here.

Line:107, src/kvstore.cc -> Style: might be clearer to write this as:

 vbState->maxCas = std::max(vbState->maxCas, newState.maxCas); 

?

Line:123, src/kvstore.cc -> Perhaps define a toJSON() method on vbucket_state, I think that would make the code cleaner.

Line:726, src/forest-kvstore/forest-kvstore.cc -> Is this set done to a different namespace to the normal user data? If not, what happens if there's an existing "real" user document with this key?

-------------------------------------
author: Bobby Buck
date: 2015-09-22 18:17:27.618000000

Patch Set 8:

(1 comment)

Line:726, src/forest-kvstore/forest-kvstore.cc -> This set is done to a different namespace.

-------------------------------------
author: Bobby Buck
date: 2015-09-22 20:15:23.490000000

Patch Set 8:

(4 comments)

Line:467, src/kvstore.h -> Done

Line:89, src/kvstore.cc -> Done

Line:107, src/kvstore.cc -> Done

Line:123, src/kvstore.cc -> Done

-------------------------------------
author: Tate Garrett
date: 2015-09-23 02:41:47.151000000

Change has been successfully cherry-picked as 18aaaa38c43f47d7e96824a85ef55473d440cbb7

-------------------------------------
