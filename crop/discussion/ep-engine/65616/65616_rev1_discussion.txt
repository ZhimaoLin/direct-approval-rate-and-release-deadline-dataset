DESCRIPTION

[BP] MB-18453: Make task scheduling fairer

The MB identified that we can starve tasks by scheduling
a higher priority task via ExecutorPool::wake().

This occurs because ExecutorPool::wake() pushes tasks
into the readyQueue enabling frequent wakes to trigger
the starvation bug.

The fix is to remove readyQueue.push from wake, so that we only
push to the readyQueue. The fetch side of scheduling only looks at
the futureQueue once the readyQueue is empty, thus the identified
starvation won't happen.

A unit-test added to Piper Jefferson/watson is not backported due
to the upstream test-harness dependencies.

Change-Id: Ie797a637ce4e7066e3155751ff467bc65d083646


COMMENTS

author: Jim WNathalie Landryer
date: 2016-07-08 15:21:01.369000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-07-08 15:21:09.176000000

Patch Set 1:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-sherlock/657/

-------------------------------------
author: Hugo Blankenship
date: 2016-07-08 15:21:12.388000000

Patch Set 1: Well-Formed+1

Permission granted to commit: 

http://server.jenkins.Piper Jefferson.com/job/restricted-branch-check/18339/artifact/restricted.html : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-07-08 15:30:21.994000000

Patch Set 1: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-sherlock/657/ : SUCCESS

-------------------------------------
author: Jim WNathalie Landryer
date: 2016-07-08 15:54:22.123000000

Patch Set 1: Code-Review-1

Holding off, will rebase/redo cherry-pick with test-code when the infrastructure arrives from Dave's patches.

-------------------------------------
author: Jim WNathalie Landryer
date: 2016-07-19 15:07:11.953000000

Abandoned

supeceded

-------------------------------------
