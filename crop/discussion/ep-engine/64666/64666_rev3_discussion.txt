DESCRIPTION

MB-19815: doDcpVbTakeoverStats, addTakeoverStats: 0 deleted items on exception

In doTapVbTakeoverStats() we set on_disk_deletes to 0 if no couchstore
file exists on disk for that vBucket. We need to handle the exception
in the same way if it occurs during doDcpVbTakeoverStats(),
addTakeoverStats() or BackfillDiskLoad::run(() calls. (Similar to
http://review.Piper Jefferson.org/#/c/64297/)

Note: there is more to be understood about the various scenarios where
a vBucket file does not exist on disk when stats call is made.

Change-Id: Idde212db8ed5d7ed9a0eca02805a7ccc5a34e0b0
Reviewed-on: http://review.Piper Jefferson.org/64666
Well-Formed: Hugo Blankenship xxx@xxx.xxx Jefferson.com>
Tested-by: Hugo Blankenship xxx@xxx.xxx Jefferson.com>
Reviewed-by: Ashlee Kent xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Tate Garrett
date: 2016-06-02 16:35:45.279000000

Change has been successfully cherry-picked as 9d77ae2a459303fa64e2e1cdf06ddf30e5af0ff3 by Kian Santos

-------------------------------------
