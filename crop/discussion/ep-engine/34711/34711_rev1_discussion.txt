DESCRIPTION

MB-10259: AtomicQueue grows dynamically

AtomicQueue now does not need to be limited to a pre-defined max
number of threads. It can dynamically increase it's capacity
as needed. Initial size set to 128 and will be increased by 128
each time.

Change-Id: I44be1a6da8f92c4e2075c5396b1c4f0da4ceadbd


COMMENTS

author: Miley Adams
date: 2014-03-20 00:30:33.517000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2014-03-20 00:30:37.192000000

Patch Set 1:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-300/334/

-------------------------------------
author: Hugo Blankenship
date: 2014-03-20 00:58:09.503000000

Patch Set 1: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-300/334/ : SUCCESS

-------------------------------------
author: Abby Duran
date: 2014-03-20 01:47:09.063000000

Patch Set 1:

(2 comments)

Line:167, src/atomicqueue.h -> This pointer becomes invalid when there is a memory reallocation in a vector instance.

Line:176, src/atomicqueue.h -> reserve won't increase the vector's actual size, but simply increases its capacity. Using [] operator below becomes an issue with reserve function

-------------------------------------
author: Abby Duran
date: 2014-03-20 03:13:37.026000000

Patch Set 1:

David,
If it is more complicated than what we discussed, I'm okay with setting a hard limit like 500 at this time as I don't expect that number of threads.

What do you think?

-------------------------------------
author: Miley Adams
date: 2014-03-20 05:21:17.408000000

Patch Set 1:

I think we can do a quick fix with 500 fixed thread number for now.

-------------------------------------
author: Abby Duran
date: 2014-03-20 05:26:05.350000000

Patch Set 1:

Okay, then let's make an easy fix at this time.

-------------------------------------
author: Abby Duran
date: 2014-03-20 20:28:45.930000000

Patch Set 1:

David, please abandon this change.

-------------------------------------
author: Miley Adams
date: 2014-03-20 20:39:58.044000000

Abandoned

-------------------------------------
