DESCRIPTION

Fix race conidtion when deleting vbuckets

There is a race condition where we create, delete, and then create
a vbucket. The problem is that the the first create can finish
after the second create is started. When this happens the code
thinks that the last create has finished even though the vbucket
deletion has not. This can cause items to fail to persist to disk.

Change-Id: I66e6450481acda2250bb7e13f921f3e9d20fbee1


COMMENTS

author: Kenny Maynard
date: 2014-04-25 19:16:50.928000000

Uploaded patch set 3.

-------------------------------------
author: Jasmin Rangel
date: 2014-04-25 19:16:54.491000000

Patch Set 3:

New patchset patch-id matches previous patchset, but commit message has changed.

-------------------------------------
author: Abby Duran
date: 2014-04-25 21:35:44.344000000

Patch Set 3: Code-Review+2

-------------------------------------
author: Kenny Maynard
date: 2014-04-25 22:57:50.107000000

Patch Set 3: Verified+1

-------------------------------------
author: Tate Garrett
date: 2014-04-25 22:57:50.668000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Kenny Maynard
date: 2014-04-25 22:57:54.995000000

Patch Set 4: Patch Set 3 was rebased

-------------------------------------
