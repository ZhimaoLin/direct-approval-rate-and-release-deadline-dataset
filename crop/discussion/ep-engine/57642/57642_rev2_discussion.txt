DESCRIPTION

Fix test case test_dcp_early_termination

Account for tasks that are already in the future queue of the
auxIO dispatcher to ensure all DCP backfill tasks (auxIO) have
completed.

Change-Id: I9544a79436193f3ef42b08a2b6615eb4be4792ce


COMMENTS

author: Emerson Nolan
date: 2015-12-09 19:49:33.190000000

Uploaded patch set 2.

-------------------------------------
author: Hugo Blankenship
date: 2015-12-09 19:49:41.556000000

Patch Set 2: Well-Formed+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/restricted-branch-check/174/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2015-12-09 19:49:44.168000000

Patch Set 2:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/277/

-------------------------------------
author: Hugo Blankenship
date: 2015-12-09 20:04:51.893000000

Patch Set 2: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/277/ : SUCCESS

-------------------------------------
author: Abby Duran
date: 2015-12-09 21:49:24.386000000

Patch Set 2: Code-Review-1

(6 comments)

Line:833, tests/ep_test_apis.cc -> on a given stat to reach a certain value

Line:843, tests/ep_test_apis.cc -> wait_time_in_secs

Line:848, tests/ep_test_apis.cc -> waitTime(wait_time_in_secs * 1000000),

Line:871, tests/ep_test_apis.cc -> Please rename it to maxWaitTime

Line:897, tests/ep_test_apis.cc -> to be less than equal to

Line:182, tests/ep_test_apis.h -> please rename it to max_wait_time_in_secs

-------------------------------------
author: Tate Garrett
date: 2015-12-09 23:47:35.095000000

Change has been successfully cherry-picked as 3f7ad6734a9499d3a9bfb9dbaae9ee7b07d06a29

-------------------------------------
author: Ashlee Kent
date: 2015-12-10 08:57:26.301000000

Patch Set 2:

(1 comment)

Line:843, tests/ep_test_apis.cc -> FWIW, I'd say the "_in_secs" is redundant, given that time_t is defined to be measured in seconds.

If anything is wrong it's the type itself, as time_t is a count since unix epoch [1]. We should probably use std::chrono::seconds [2] for any new code.

[1]: http://en.cppreference.com/w/c/chrono/time_t
[2]: http://en.cppreference.com/w/cpp/chrono/duration

-------------------------------------
