DESCRIPTION

MB-21777: max_cas_str not formatting on Linux

Seems an issue with snprintf where we use timeString as input and
output yields only the nanosecond fractions being printed.

Fix also reduces buffers down, they're still bigger than we need, but
100 is way too much.

Change-Id: Ief6755d15d4d77a10a6c14fb76321893a7dd0d9c


COMMENTS

author: Jim WNathalie Landryer
date: 2016-11-23 15:30:58.882000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-11-23 15:31:06.916000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1688/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-23 15:31:07.056000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1905/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-23 15:31:07.192000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1470/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-23 15:31:07.427000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/503/ (4/4)

-------------------------------------
author: Keira Washington
date: 2016-11-23 15:36:33.480000000

Patch Set 1:

(1 comment)

Line:168, src/hlc.h -> Seems like it would be more explicit to just use `char timeString[sizeof("1970-12-31T23:23:59")]`

-------------------------------------
author: Hugo Blankenship
date: 2016-11-23 15:43:59.211000000

Patch Set 1: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1688/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-watson/1688/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1470/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1905/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/503/ : SUCCESS

-------------------------------------
author: Liliana Harmon
date: 2016-11-23 15:58:32.544000000

Patch Set 1: Code-Review+1

-------------------------------------
author: Jim WNathalie Landryer
date: 2016-11-24 08:39:19.540000000

Patch Set 1:

(1 comment)

Line:168, src/hlc.h -> Seems like it would but I wanted some wriggle room in-case i've got this wrong

-------------------------------------
author: Hugo Blankenship
date: 2016-11-24 08:39:27.789000000

Patch Set 1: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1689/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-24 08:39:27.937000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1471/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-24 08:39:28.179000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/504/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-24 08:39:28.373000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1907/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-24 08:56:59.791000000

Patch Set 1: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1689/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1471/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1907/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/504/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-11-24 10:39:31.989000000

Patch Set 1: Code-Review-1

(1 comment)

Line:171, src/hlc.h -> Should also check the return value of strftime, contents are undefined (and hence potentially not null-terminated) if it fails.

-------------------------------------
author: Jim WNathalie Landryer
date: 2016-11-24 10:44:42.310000000

Patch Set 1:

(1 comment)

Line:171, src/hlc.h -> it's being checked in the if at line 170? we can include explicit !=0?

-------------------------------------
author: Ashlee Kent
date: 2016-11-24 10:51:43.572000000

Patch Set 1: Code-Review+2

(1 comment)

Line:171, src/hlc.h -> Ah yes, sorry misread :)

-------------------------------------
author: Tate Garrett
date: 2016-11-24 15:04:28.028000000

Change has been successfully cherry-picked as b21b13b19c8fe200de5ae77cd6c1670b471f0cbe by Ashlee Kent

-------------------------------------
