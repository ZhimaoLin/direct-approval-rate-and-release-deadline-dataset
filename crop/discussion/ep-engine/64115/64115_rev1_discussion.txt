DESCRIPTION

MB-19503: Fix ConnMap so notifications don't go missing [2]

Previous patch[1] cleared the isNotificationScheduled flag
at the wrong place and meant things could then never
again get scheduled.

This is because we only cleared the flag if tp->isPaused()
yet we still pop the notification from the queue, so we
left tp->isNotificationScheduled yet the queue is empty.
Now no more notifications will ever get scheduled!

So we need to clear the notification scheduled boolean
unconditionally of the other flags on tp.

[1] - Commit 0856e0b3d3fc6

Change-Id: I11c9fd72f4b35102328022bd4c334a9e09a61cd0


COMMENTS

author: Ashlee Kent
date: 2016-05-17 14:53:04.903000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-05-17 14:53:11.261000000

Patch Set 1:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/612/

-------------------------------------
author: Hugo Blankenship
date: 2016-05-17 14:53:12.640000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-3.0.x/213/

-------------------------------------
author: Hugo Blankenship
date: 2016-05-17 14:53:15.080000000

Patch Set 1: Well-Formed+1

Permission granted to commit: 

http://server.jenkins.Piper Jefferson.com/job/restricted-branch-check/14899/artifact/restricted.html : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-05-17 15:03:28.337000000

Patch Set 1: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-3.0.x/213/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-05-17 15:07:41.891000000

Patch Set 1:

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/612/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-05-17 15:17:29.990000000

Patch Set 1: Code-Review+2

Given this is a simple backport of Jim's patch I'm +2ing myself.

-------------------------------------
author: Tate Garrett
date: 2016-05-17 15:17:32.206000000

Change has been successfully cherry-picked as c99b61d1795407f042e66d44c3375cc834c901e4 by Ashlee Kent

-------------------------------------
