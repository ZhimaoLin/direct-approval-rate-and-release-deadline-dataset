DESCRIPTION

[Ephemeral]: Rollback to 0 explicitly and improve rollback testing

In ephemeral buckets we currently rollback to 0 even if the request
is to rollback to an intermediate point. This is because we don't have
the luxury of disk snapshots to do an intermediate rollback.

This commit does an explicit rollback to 0, rather than as default.

Also adds a test case that requests a rollback to an intermediate
point.

Change-Id: Ifea06562efaae4ef9b995c718a1b1adc026c4e02


COMMENTS

author: Adrianna Holmes
date: 2017-04-07 00:21:30.526000000

Uploaded patch set 2.

-------------------------------------
author: Hugo Blankenship
date: 2017-04-07 00:38:36.762000000

Patch Set 2: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/4326/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/5544/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/5047/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/5757/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2017-04-07 07:51:21.676000000

Patch Set 2: Code-Review-1

(1 comment)

Line:2725, src/kv_bucket.cc -> Prefer explicit conversion to bool (result.highSeqno > 0)

-------------------------------------
author: Adrianna Holmes
date: 2017-04-07 15:36:15.790000000

Patch Set 2:

(1 comment)

Line:2725, src/kv_bucket.cc -> Done

-------------------------------------
