DESCRIPTION

Create latency peformance tests for ep-engine

Create a new test library (ep_perfsuite.so) for performance benchmark
tests, and add test to measure latency of front-end operations.

The new testsuite initially has two tests:

* "baseline latency" - Measure the latency of Create, Get, Replace and
  Delete operations to a single vBucket; with default configuration
  options.

* "defragmenter latency" - Measure the latency of Create, Get, Replace
  and Delete operations to a single vBucket; with the ep-engine
  Defragmenter task configured to run essentially constantly.

Example output (requires UTF-8 for graphs):

    === Latency [Baseline] (µs) ==================================================
                             Percentile           Histogram of samples
                                        Median     95th     99th  Std Dev

    Add         1.879    3.687    5.674   28.400  ▁▁▁▁▁▁▁▁▁▁▁▁▁▂█▇▆▆▅▃▂▂▁▁▁▁▁▁▁▁▁▁
    Get         0.717    1.185    1.358    0.459  ▁▁▁▁▁▁█▆▂▂▁▂▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁
    Replace     2.139    3.042    4.094    0.890  ▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▅█▇▅▃▂▂▁▁▁▁▁▁▁▁
    Delete      1.599    2.384    5.528    0.940  ▁▁▁▁▁▁▁▁▁▁▁▂▆█▇▇▅▃▂▁▁▁▁▁▁▁▁▁▁▁▁▁
                                                  0              µs              3

Change-Id: I05be682bedb339ecb8bd37e4a67f43d0fb960afc


COMMENTS

author: Ashlee Kent
date: 2015-04-15 08:03:59.083000000

Uploaded patch set 4.

-------------------------------------
author: Hugo Blankenship
date: 2015-04-15 08:04:04.325000000

Patch Set 4:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/41/

-------------------------------------
author: Hugo Blankenship
date: 2015-04-15 08:34:25.540000000

Patch Set 4: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/41/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2015-04-15 08:42:58.864000000

Patch Set 4: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/43/

-------------------------------------
author: Ashlee Kent
date: 2015-04-15 08:48:54.585000000

Patch Set 4:

> There seems to be a windows related error:
 > 
 > 11:23:29    Creating library ep_testsuite.lib and object
 > ep_testsuite.exp
 > 
 > 11:23:29 ep_testsuite_common.cc.obj : error LNK2001: unresolved
 > external symbol "class TestCase * testsuite_testcases"
 > xxx@xxx.xxx
 > 

Yep - Hugo Blankenship had already flagged that :) I've uploaded patch set 4 which fixes this.

-------------------------------------
author: Hugo Blankenship
date: 2015-04-15 09:13:12.446000000

Patch Set 4: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/43/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2015-04-15 09:55:10.613000000

Patch Set 4: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/46/

-------------------------------------
author: Hugo Blankenship
date: 2015-04-15 10:25:22.973000000

Patch Set 4: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/46/ : FAILURE

-------------------------------------
author: Tate Garrett
date: 2015-04-20 09:33:36.905000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Tate Garrett
date: 2015-04-20 17:08:17.381000000

Change has been successfully cherry-picked as bd6514a7a731f9fe57ed324c3b238623fafc6382

-------------------------------------
