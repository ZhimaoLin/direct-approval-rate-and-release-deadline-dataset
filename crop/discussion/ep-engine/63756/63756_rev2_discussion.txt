DESCRIPTION

Fix const'ness of HashTable methods

A number of HashTable methods claim they take a const reference to an
Item, when in fact they cast away this constness and modify fields in
the Item (e.g. the CAS and seqno). This is misleading, so change the
methods to take non-const references instead.

Change-Id: I6077730141e43005a16496976551bcb65be9afff


COMMENTS

author: Ashlee Kent
date: 2016-05-11 08:50:50.304000000

Uploaded patch set 2: Patch Set 1 was rebased.

-------------------------------------
author: Hugo Blankenship
date: 2016-05-11 08:50:58.407000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/684/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-05-11 08:50:58.599000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/724/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-05-11 08:57:45.425000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/554/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-05-11 09:14:48.546000000

Patch Set 2: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/554/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/724/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/684/ : SUCCESS

-------------------------------------
author: Keira Washington
date: 2016-05-11 09:37:00.335000000

Patch Set 2: Code-Review+2

-------------------------------------
author: Asher Vang
date: 2016-05-11 10:19:35.167000000

Patch Set 2: Code-Review+2

(1 comment)

Line:332, src/ep.h -> From an API perspective I would have expected this to be const given that we want to set the item with all of the existing attributes (and not generate any new metadata for the object).

-------------------------------------
author: Ashlee Kent
date: 2016-05-12 08:18:10.090000000

Patch Set 2:

(1 comment)

Line:332, src/ep.h -> It's a good point (and in the abstract I'd agree), but the reality of the current implementation is you'll get new sequence number field if genBySeqno is true.

I'm happy for us to improve the API to make it const, but I'd rather at least have the current API reflect reality and not give people a false belief that the Item isn't modified (when in fact it is :(

-------------------------------------
author: Tate Garrett
date: 2016-05-12 08:18:16.625000000

Change has been successfully cherry-picked as 212b1752419ddd2878d30ed02594b0f618662601 by Ashlee Kent

-------------------------------------
