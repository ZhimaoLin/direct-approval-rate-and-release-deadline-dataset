DESCRIPTION

MB-18095: Refactor dcp_stream() in ep_testsuite_dcp

Refactor the way arguments are passed to dcp_stream(..,..,)
in ep_testsuite_dcp. This is to assist in adding tests in the
future to facilitate streaming from multiple vbuckets under the
umbrella of a single producer.

Change-Id: I3c5562e5ee690cc992471fc3cbb94ccbbcb5a181


COMMENTS

author: Emerson Nolan
date: 2016-02-18 20:31:41.109000000

Uploaded patch set 8.

-------------------------------------
author: Hugo Blankenship
date: 2016-02-18 20:31:48.093000000

Patch Set 8:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1848/ (2/2)

-------------------------------------
author: Hugo Blankenship
date: 2016-02-18 21:02:58.458000000

Patch Set 8: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1848/ : FAILURE

Make encountered an error building one or more targets. ( http://factory.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/1848/ )

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/2595/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2016-02-18 21:12:40.549000000

Patch Set 8: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1849/ (2/2)

-------------------------------------
author: Hugo Blankenship
date: 2016-02-18 21:23:06.988000000

Patch Set 8: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1849/ : SUCCESS

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/2597/ : SUCCESS

-------------------------------------
author: Adrianna Holmes
date: 2016-02-18 22:57:13.187000000

Patch Set 8: Code-Review+2

-------------------------------------
author: Ashlee Kent
date: 2016-02-19 18:01:14.072000000

Patch Set 8: Code-Review-1

(3 comments)

Couple of minor improvements for maximum goodness :)

Line:72, tests/ep_testsuite_dcp.cc -> Still have an optional argument here ;)

Given this is now a class, you can simply aggregate the total bytes in a normal (publicly accessible) member variable, and then if the caller cares about the result they can just read it from the object after run().

Line:255, tests/ep_testsuite_dcp.cc -> Might be worth a quick /*unused*/ comment or similar here so people aren't caught out like I was about the vbucket always being zero.

Line:415, tests/ep_testsuite_dcp.cc -> Probably simpler to just declare it as a unsigned literal, i.e.

 1u

-------------------------------------
author: Tate Garrett
date: 2016-02-19 20:51:18.984000000

Change has been successfully cherry-picked as 755dfd53e20aa3f92ce9b82e2b3ba8f583c2ab98

-------------------------------------
