DESCRIPTION

CBD-485: Move DB file compaction into EP-Engine

As detailed in CBD-485, the compactor module is moved into EP-Engine
New Memcached Command:
+ CMD_COMPACT_DB with protocol_binary_request_compact_db
New Stats:
+ ep_pending_compactions
+ compaction timing histogram
New unit test case to exercise the code path
New command line utility to perform compaction:
+ cbcompact 127.0.0.1:12000 compact <vbid> --wait
New MCCouch Notification cmd
+ VB_COMPACTION_DONE
- Removed all the retry logic from couch-kvstore on TMPFAIL

Change-Id: I0606a6e06edc41c5265f3661d97d178165c7f19a


COMMENTS

author: Ellie Kidd
date: 2013-10-09 20:41:22.236000000

Uploaded patch set 9.

-------------------------------------
author: Hugo Blankenship
date: 2013-10-09 20:41:26.018000000

Patch Set 9:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/19/

-------------------------------------
author: Ellie Kidd
date: 2013-10-09 20:43:51.061000000

Patch Set 9:

Removed retry logic.
Added synchronization on vbucket level as opposed to shard level for Flusher vs Compactor tasks as stated in original design document.
Added alignment padding bytes to 8 byte boundary on 64-bit machines as per comments from Chiyoung.

-------------------------------------
author: Hugo Blankenship
date: 2013-10-09 20:47:05.176000000

Patch Set 9: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/19/ : FAILURE

-------------------------------------
