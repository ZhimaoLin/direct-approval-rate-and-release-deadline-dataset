DESCRIPTION

MB-23530: Prevent replacing with cas on deleted item

It was previously possible in some cases to replace a deleted item if
the correct CAS value was given. A replace with a cas value resolves
internally to OPERATION_CAS, which is treated as a set.

We previously only checked if an item was deleted if the cas did _not_
match, but even if the cas is correct, a replace with a cas value should
fail if the item is deleted.

Change-Id: Id1eeaeb5326b7a143c7213f07c774f02623bff8d


COMMENTS

author: Jace Townsend
date: 2017-04-04 17:38:36.995000000

Uploaded patch set 2.

-------------------------------------
author: Hugo Blankenship
date: 2017-04-04 17:56:05.379000000

Patch Set 2: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/4240/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/4240/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/5454/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/5454/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/5669/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/4963/ : SUCCESS

-------------------------------------
author: Jace Townsend
date: 2017-04-05 08:35:27.807000000

Removed Code-Review-2 by Jace Townsend xxx@xxx.xxx Jefferson.com>


-------------------------------------
