DESCRIPTION

OrderedStoredValue [3/4]: Add OrderedStoredValue & factory

Add a subclass of StoredValue - OrderedStoredValue - which
additionally knows it's position in the seqno order. These objects are
constructed with a new OrderedStoredValueFactory (simiilar to
StoredValue), as they also have a variable-length key allocated inline
at the end of their fixed fields. Note that due to *not* having a
virtual destructor (instead we use flag dispatching), we need a custom
deleter for StoredValue::UniquePtr now.

See the StoredValue comment block for more details on
OrderedStoredValue's implementation.

Expand the StoredValue unit tests to also test this new class.

Change-Id: I2465fadee84d18a6ce449f5995ca34da82e2adb2


COMMENTS

author: Ashlee Kent
date: 2017-03-08 12:03:09.186000000

Uploaded patch set 14.

-------------------------------------
author: Hugo Blankenship
date: 2017-03-08 12:19:09.420000000

Patch Set 14: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/3306/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/3306/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/4488/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/4057/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/4709/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2017-03-08 12:42:46.989000000

Patch Set 14: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/4488/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/4057/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/4709/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/3314/ : SUCCESS

-------------------------------------
author: Asher Vang
date: 2017-03-08 13:52:29.247000000

Patch Set 14: Code-Review+1

(1 comment)

Should you update sizes as well so we can see how they grow?

Line:237, src/storeddockey.h -> Delete??

-------------------------------------
author: Ashlee Kent
date: 2017-03-08 13:53:21.694000000

Patch Set 14:

(1 comment)

Line:237, src/storeddockey.h -> Damn, thought I'd already fixed that :/

-------------------------------------
