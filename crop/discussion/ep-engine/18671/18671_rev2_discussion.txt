DESCRIPTION

MB-5944 Fix warmup batch read using access log

Batch read cannot use rowids (i.e. seq_id) from access log
because seq_ids might have changed since access log was generated.
Change to get seq_id from hashtable when filling fetches vector.

Change-Id: I1faa62fcd2744044dee8dcc3f69cd189096a1ddc


COMMENTS

author: Roman Murillo
date: 2012-07-23 18:28:58.391000000

Uploaded patch set 2.

-------------------------------------
author: Roman Murillo
date: 2012-07-23 18:40:48.844000000

Patch Set 2: Verified

Make test on centos all passed. On mac, "Test observe multi key" fails. But, Mike mentioned that it is false positive and he will remove it.

-------------------------------------
author: Abby Duran
date: 2012-07-23 19:09:31.798000000

Patch Set 2: I would prefer that you didn't submit this

(2 inline comments)



Line:471, mutation_log.hh -> Please use NULL for the default value.

Line:653, mutation_log.cc -> As they are all in the same vbucket, please move this out of this inner for loop. This apply function will be invoked during warmup and there are no vbucket deletions during this time. So, we don't need to create the RCPtr instance for every item belonging to the same vbucket.

-------------------------------------
author: Tate Garrett
date: 2012-07-23 21:55:27.835000000

Your change could not be merged due to a path conflict.

Please merge (or rebase) the change locally and upload the resolution for review.

-------------------------------------
