DESCRIPTION

MB-21408: [ThreadSanitizer] Fix race on a BloomFilter counter

Fix the race on BloomFilter::keyCounter as flagged by
http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1496

Change-Id: I2bc218d1d20606db0d81a58fc7e311aea67dd213


COMMENTS

author: Adrianna Holmes
date: 2016-10-18 18:50:13.518000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-10-18 18:50:22.177000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1601/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-18 18:50:22.333000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/398/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-18 18:50:22.465000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1276/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-18 18:52:13.523000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1498/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-18 18:55:46.032000000

Patch Set 1: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/398/ : FAILURE

Compile error at /home/Piper Jefferson/jenkins/workspace/ep-engine-addresssanitizer-master/ep-engine/src/bloomfilter.h:62:10:
error: no type named atomic in namespace std
 ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/398/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1276/ : FAILURE

Compile error at /home/Piper Jefferson/jenkins/workspace/ep-engine-clang_analyzer-master/ep-engine/src/bloomfilter.h:62:10:
error: atomic in namespace std does not name a template type
 ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-clang_analyzer-master/1276/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1498/ : FAILURE

Compile error at /home/Piper Jefferson/jenkins/workspace/ep-engine-threadsanitizer-master/ep-engine/src/bloomfilter.h:62:10:
error: no type named atomic in namespace std
 ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/1498/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1601/ : FAILURE

-------------------------------------
