DESCRIPTION

MB-14290: Handle the race condition during incr operation on a non-existing item

When multiple threads try to do incr operation on a non existing (or deleted)
item EP-Engine sends NOT_STORED_ERROR, which is not a correct behavior. Race
condition should be handled correctly and the item should undergo incr
appropriate number of times

Change-Id: I926930254509aae3c29d46c516c7239d7a5045a6


COMMENTS

author: Adrianna Holmes
date: 2015-04-06 23:45:12.408000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2015-04-06 23:45:16.632000000

Patch Set 1:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-sherlock/119/

-------------------------------------
author: Abby Duran
date: 2015-04-07 00:06:08.773000000

Patch Set 1: Code-Review-1

(2 comments)

Line:342, src/ep_engine.h -> assert(itm->getCas());

Line:364, src/ep_engine.h -> Please get rid of this if clause.

-------------------------------------
author: Hugo Blankenship
date: 2015-04-07 00:15:37.125000000

Patch Set 1: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-sherlock/119/ : ABORTED

-------------------------------------
author: Tate Garrett
date: 2015-04-07 00:40:06.249000000

Change has been successfully cherry-picked as cdaa6413746210b2188c60278af83a564185b489

-------------------------------------
