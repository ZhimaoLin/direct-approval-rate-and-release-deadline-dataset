DESCRIPTION

Make the /all/ list TAP specific in Connmap

Connmap maintains a map of cookies to connections, as well as a list
of all connections.

In TAP the all list may not always match the entries in the map
because dead connections are removed from the map, but remain in the
all list and cleaned-up at a later time.

In DCP we maintain a separate deadConnections list and therefore map_
is always equivalent to the all list and therefore we need only refer
to the map.

This patch removes the use of the all list from DCP.

Change-Id: I7e892599168e0b4db837a53ed5d24f44af702aab


COMMENTS

author: Kymani Ramirez
date: 2016-10-03 10:35:18.741000000

Uploaded patch set 8.

-------------------------------------
author: Hugo Blankenship
date: 2016-10-03 10:35:26.526000000

Patch Set 8:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1446/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-03 10:35:26.671000000

Patch Set 8:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/249/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-03 10:35:26.813000000

Patch Set 8:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1144/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-03 10:35:26.948000000

Patch Set 8:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1352/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-03 10:45:27.836000000

Patch Set 8: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/249/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1144/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1352/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1446/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-10-03 12:19:11.097000000

Patch Set 8: Code-Review-1

(5 comments)

Line:622, src/tapconnmap.cc -> You could use std::find (http://en.cppreference.com/w/cpp/algorithm/find) which is simpler (if you prefer) - you get to use a lambda ;)

Line:128, src/dcp/dcpconnmap.h -> indentation looks funky.

Line:74, src/dcp/dcpconnmap.cc -> Nit: Style is to place a space either side of the colon (I know the previous code was also broken).

Line:473, src/dcp/dcpconnmap.cc -> Prefer nullptr in C++11 code.

Line:83, src/connmap.h -> Please add a description of what this function does.

-------------------------------------
author: Kymani Ramirez
date: 2016-10-03 13:31:14.973000000

Patch Set 8:

(5 comments)

Line:622, src/tapconnmap.cc -> used the find_if and lamba function :)

Line:128, src/dcp/dcpconnmap.h -> fixed

Line:74, src/dcp/dcpconnmap.cc -> changed in all cases I could find in the file

Line:473, src/dcp/dcpconnmap.cc -> changed

Line:83, src/connmap.h -> done

-------------------------------------
author: Tate Garrett
date: 2016-10-19 13:50:42.538000000

Change has been successfully cherry-picked as cff7563d2872aaced043ac6b32b800918f6e94ab by Ashlee Kent

-------------------------------------
