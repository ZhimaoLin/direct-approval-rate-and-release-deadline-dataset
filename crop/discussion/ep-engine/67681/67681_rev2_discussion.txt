DESCRIPTION

MB-20697: ep_testsuite: restore deleted DB dir before cleanup

In some environments (seen on Windows VM), the regression test for
MB-20697 can hang forever during cleanup due to the writer thread being
stuck in an infinite loop trying to flush to disk.

To address this, re-create the database directory before shutting down
EPStore (after the test is complete).

Change-Id: I474e77bafbe5b30858d9a306669c52713890f846


COMMENTS

author: Hugo Blankenship
date: 2016-09-19 11:01:51.334000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/854/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 11:01:51.476000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1141/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 11:01:51.613000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1022/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 11:01:53.260000000

Patch Set 2:

Branch restricted. PLEASE READ this URL: 

http://server.jenkins.Piper Jefferson.com/job/restricted-branch-check/23816/artifact/restricted.html : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 11:02:16.171000000

Patch Set 2: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/854/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1022/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1141/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 13:42:26.676000000

Patch Set 2: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1142/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 13:43:46.364000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/855/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 13:46:40.500000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1023/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 14:01:44.075000000

Patch Set 2: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1142/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/855/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1023/ : SUCCESS

-------------------------------------
author: Kymani Ramirez
date: 2016-09-22 13:59:35.839000000

Patch Set 2: Code-Review+1

As Manu has been reviewing will wait for him to give +2

-------------------------------------
author: Adrianna Holmes
date: 2016-09-22 18:30:38.087000000

Patch Set 2: Code-Review+2

-------------------------------------
author: Ashlee Kent
date: 2016-09-27 11:01:02.141000000

Patch Set 2:

check approval

-------------------------------------
author: Hugo Blankenship
date: 2016-09-27 11:01:11.935000000

Patch Set 2: Well-Formed+1

Permission granted to commit: 

http://server.jenkins.Piper Jefferson.com/job/restricted-branch-check/24504/artifact/restricted.html : SUCCESS

-------------------------------------
author: Tate Garrett
date: 2016-09-27 11:01:30.904000000

Change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Ashlee Kent
date: 2016-09-27 11:01:36.260000000

Patch Set 3: Patch Set 2 was rebased

-------------------------------------
author: Tate Garrett
date: 2016-09-27 13:48:30.225000000

Change has been successfully cherry-picked as 5fe4831e70c98a5a4db92e5e6b0b586729fbe651 by Ashlee Kent

-------------------------------------
