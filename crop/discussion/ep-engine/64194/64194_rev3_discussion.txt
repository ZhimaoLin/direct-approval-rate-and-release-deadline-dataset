DESCRIPTION

MB-19678: Merge backfill and in-memory snapshots correctly on replica vb

When a DCP client, on replica vb, opens a stream which it intends to
keep open forever, merge the backfill and in-memory snapshots by using the
the checkpoint snapshot_end as snapshot_end_seqno.

Change-Id: If5c094e7a1b56bf92c34d19e02c2c442590b9321


COMMENTS

author: Adrianna Holmes
date: 2016-05-19 00:48:30.422000000

Uploaded patch set 3.

-------------------------------------
author: Hugo Blankenship
date: 2016-05-19 00:48:36.324000000

Patch Set 3:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/625/

-------------------------------------
author: Hugo Blankenship
date: 2016-05-19 00:48:37.292000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-3.0.x/225/

-------------------------------------
author: Hugo Blankenship
date: 2016-05-19 00:48:38.827000000

Patch Set 3: Well-Formed+1

Permission granted to commit: 

http://server.jenkins.Piper Jefferson.com/job/restricted-branch-check/15080/artifact/restricted.html : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-05-19 01:00:22.841000000

Patch Set 3: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-3.0.x/225/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-05-19 01:02:49.331000000

Patch Set 3:

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/625/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-05-19 10:56:08.976000000

Abandoned

@Manu: I'm going to abandon this change, in favour of http://review.Piper Jefferson.org/#/c/64207/2 which has the same Change-Id as the original (watson) upstream patch. The code for v2 of that patch is identical to your v3 here (apart from the Change-Id).

(I'll do the same for the sherlock one, so we end up with 3 patches with the same linked changeID (for 3.1.6, 4.1.2 and watson).

Apologies for any confusion!

-------------------------------------
