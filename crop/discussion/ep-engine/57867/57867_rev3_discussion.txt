DESCRIPTION

MB-17051: [DcpProducer] Fall back to using ready list for vbuckets

Fall back to using a ready list for vbucket notification
in the DCP producer context, as the new way causes extreme
slowness in processing items from all the streams, caused
by missing certain notifications.

Change-Id: I21065cf99f8be0af6dedf506237ce3dbe683387d


COMMENTS

author: Emerson Nolan
date: 2015-12-16 21:29:15.949000000

Uploaded patch set 3: Commit message was updated.

-------------------------------------
author: Hugo Blankenship
date: 2015-12-16 21:29:26.698000000

Patch Set 3:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/301/

-------------------------------------
author: Hugo Blankenship
date: 2015-12-16 21:29:26.903000000

Patch Set 3: Well-Formed+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/restricted-branch-check/735/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2015-12-16 21:44:10.257000000

Patch Set 3: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/301/ : SUCCESS

-------------------------------------
author: Adrianna Holmes
date: 2015-12-16 22:15:45.532000000

Patch Set 3: Code-Review+2

-------------------------------------
author: Abby Duran
date: 2015-12-17 03:34:42.089000000

Patch Set 3:

(1 comment)

Line:213, src/dcp-producer.h -> If I remember correctly, this array was added to reduce the lock contention in DCP, but now it seems like we return back to the old implementation. Obviously, it's a regression, but I was wondering if we can fix the regression instead of going back to the old implementation.

-------------------------------------
author: Emerson Nolan
date: 2015-12-17 04:23:13.944000000

Patch Set 3:

(1 comment)

Line:213, src/dcp-producer.h -> I've another approach using the existing vectors, rather than falling back.

-------------------------------------
author: Tate Garrett
date: 2015-12-18 09:18:13.288000000

Change has been successfully cherry-picked as 5ffc61f54f5f85add70a8523f8c2ae6cb5bbb18d

-------------------------------------
