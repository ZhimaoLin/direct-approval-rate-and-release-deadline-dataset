DESCRIPTION

 MB-20744: Increment reject ops for vbucket when items inserted into reject queue

In case of a failure to persist items, the items are added to the
reject queue in which the reject stats needs to be updated for
the associated vbucket.

Change-Id: I15b7ad26d8bcab5b6a437b8d172d8b914df8b683


COMMENTS

author: Bobby Buck
date: 2016-09-30 11:57:28.521000000

Uploaded patch set 3.

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 11:57:35.820000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1362/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 11:57:35.952000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 11:57:36.074000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 11:57:36.205000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:01:33.096000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1363/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:03:06.146000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1364/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:06:09.883000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1365/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:15:45.819000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1365/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:15:55.413000000

Patch Set 3: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1366/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:17:37.963000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1366/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:17:54.977000000

Patch Set 3: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1367/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:19:04.804000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1367/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:19:11.961000000

Patch Set 3: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1368/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:20:54.244000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1368/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:21:03.193000000

Patch Set 3: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1369/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:25:29.765000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1369/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:25:51.961000000

Patch Set 3: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1370/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:36:18.970000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1370/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:50:06.682000000

Patch Set 3: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1371/ (4/4)

-------------------------------------
author: Ashlee Kent
date: 2016-09-30 12:53:07.902000000

Patch Set 3: Code-Review-1

(3 comments)

Line:6489, tests/ep_testsuite.cc -> Please include the MB name in the test, and also madd a brief comment on what the test is checking for.

Line:6498, tests/ep_testsuite.cc -> Should check that the file was successfully opened.

Line:7, /COMMIT_MSG -> Nit: extra space

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 13:21:54.976000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1371/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/38/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1027/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1205/ : SUCCESS

-------------------------------------
author: Bobby Buck
date: 2016-10-01 03:06:46.743000000

Patch Set 3:

(3 comments)

Line:6489, tests/ep_testsuite.cc -> Done

Line:6498, tests/ep_testsuite.cc -> Done

Line:7, /COMMIT_MSG -> Done

-------------------------------------
author: Tate Garrett
date: 2016-10-03 07:49:27.644000000

Change has been successfully cherry-picked as 1b6e4388d9d587d6b9933c131daa3ad913919f57 by Ashlee Kent

-------------------------------------
