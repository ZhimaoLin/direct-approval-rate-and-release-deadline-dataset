DESCRIPTION

[IK] Make unlocked_add::maybeKeyExists authorative

The `maybeKeyExists` argument is sometimes used as a hint which is
predicated on full eviction. This makes it hard to generalise the code
for other strategies, as we can only 'trust' this argument in certain
code paths.

This patch adjusts the semantics of maybeKeyExists, removing the
eviction policy predicate so it is /always/ authorative.

Change-Id: I2c830c32e444dbaed8068f7be4f7c46c4dd64507


COMMENTS

author: Ashlee Kent
date: 2017-02-07 14:54:44.022000000

Uploaded patch set 4: Patch Set 3 was rebased.

-------------------------------------
author: Hugo Blankenship
date: 2017-02-07 15:44:47.626000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/2292/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/2292/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/3071/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3655/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/3468/ : SUCCESS

-------------------------------------
