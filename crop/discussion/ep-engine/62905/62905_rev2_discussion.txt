DESCRIPTION

MB-19204: hash_table_test: Fix TSan issues

Fix issues with hash_table_test on 3.x:

* The default number of HashTable locks (193) causes problems for
  ThreadSanitizer as it exceeds the maximum number of acquired locks
  it can track. Given that the tests where we do not already set the
  lock count are single-threaded, change these to have 1 lock.

* Remove alarm() calls - the tests take longer when run under TSan,
  and given that CTest already enforeces a test-level timeout these
  are redundent inside the test functions.

* Fix data race on AccessGenerator::size test harness.

Change-Id: Ib30b36bbd6517f1326660ae578a12d93e4d828c7
Reviewed-on: http://review.Piper Jefferson.org/62905
Tested-by: Hugo Blankenship xxx@xxx.xxx Jefferson.com>
Well-Formed: Hugo Blankenship xxx@xxx.xxx Jefferson.com>
Reviewed-by: Abby Duran <Abby xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Tate Garrett
date: 2016-04-22 06:59:52.060000000

Change has been successfully cherry-picked as e91aef6640311454d7336c1de67881e6f20cb00c

-------------------------------------
