DESCRIPTION

MB-11799 re-use existing task for rescheduling vb snapshots

we need not create new task on vb snapshot failure,
re-use the task by returning true from the run method.

Change-Id: I8f3b9988e2c55d95bf23cecad9653c87cdcebe0e


COMMENTS

author: Ellie Kidd
date: 2014-07-28 18:51:08.225000000

Uploaded patch set 1.

-------------------------------------
author: Abby Duran
date: 2014-07-28 19:19:35.211000000

Patch Set 1: Code-Review-1

(1 comment)

Line:993, src/ep.cc -> This is wrong. We should set schedule_vstate_persist[vid] = true and return true for rescheduling.

-------------------------------------
author: Abby Duran
date: 2014-07-28 20:04:17.231000000

Patch Set 1:

(1 comment)

Line:993, src/ep.cc -> bool inverse = false;
if (schedule_vbstate_persist[vbid].compare_exchange_strong(inverse, true)) {
    return true;
} else {
    return false;
}

-------------------------------------
author: Ellie Kidd
date: 2014-07-28 21:00:04.457000000

Patch Set 1:

(1 comment)

Line:993, src/ep.cc -> Done

-------------------------------------
