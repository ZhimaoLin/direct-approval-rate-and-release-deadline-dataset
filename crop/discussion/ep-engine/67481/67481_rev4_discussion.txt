DESCRIPTION

MB-20822: Erase all diverged branch entries correctly in failover table

When we add an entry in failover table we must erase all the other
entries with higher seqno because they are from a diverged branch.

This commit fixes a bug in the loop that was erasing diverged entires.
In a std::list when we erase an entry, the function returns the
iterator pointing to next element and hence we must be careful not to
double increment it.

Change-Id: I9275fba8057f26e2853a8d7d359f1d01f107f2be


COMMENTS

author: Adrianna Holmes
date: 2016-09-19 18:20:55.487000000

Uploaded patch set 4: Patch Set 3 was rebased.

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 18:21:01.781000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1143/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 18:21:01.938000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/856/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 18:21:02.085000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1024/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 18:21:03.571000000

Patch Set 4:

Branch restricted. PLEASE READ this URL: 

http://server.jenkins.Piper Jefferson.com/job/restricted-branch-check/23838/artifact/restricted.html : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 18:41:59.771000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1143/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/856/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1024/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 18:54:49.054000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1145/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 19:14:59.896000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1145/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/856/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1024/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 19:37:14.429000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1146/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 19:57:26.004000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1146/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/856/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1024/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-19 23:56:22.806000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1149/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-20 00:28:19.637000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1149/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/856/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1024/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-22 23:21:10.864000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1191/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-22 23:54:02.327000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1191/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/856/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1024/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-09-29 21:00:48.521000000

Patch Set 5: Patch Set 4 was rebased

-------------------------------------
author: Tate Garrett
date: 2016-09-30 00:44:22.393000000

Change has been successfully cherry-picked as 4eae12aa7d372d02e14c81c5eb733e5912f81f69 by Adrianna Holmes

-------------------------------------
