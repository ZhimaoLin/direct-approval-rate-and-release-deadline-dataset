DESCRIPTION

MB-3887 Fix to timing issue in sending backfill completion message

There is a sporadic timing issue in determining the backfill
completion and notifying this completion to the destination. This
change fixes this issue by allowing either backfill or TAP worker
thread to determine the completion of backfill.

Change-Id: I8bebee3fe91f3f8ce30bac94050e14b8149d2d8e


COMMENTS

author: Abby Duran
date: 2011-05-28 09:48:38.429000000

Uploaded patch set 6.

-------------------------------------
author: Abby Duran
date: 2011-05-28 09:48:41.754000000

Patch Set 6: I would prefer that you didn't submit this

Automatically re-added by Roselyn Villegas trivial rebase detection script.

-------------------------------------
author: Abby Duran
date: 2011-05-28 09:52:45.235000000

Patch Set 6: No score



-------------------------------------
author: Rubi Walsh
date: 2011-05-28 23:57:08.145000000

Patch Set 6: (1 inline comment)



Line:621, tapconnection.cc -> Why not just call this way
if (addBackfillCompletionMessage() || doTakeOver) {
  ....
}

-------------------------------------
author: Abby Duran
date: 2011-05-29 00:03:28.725000000

Patch Set 6: (1 inline comment)



Line:621, tapconnection.cc -> Because we also need to call notifyXXX function when the checkpoint is synchronized by receiving ACK. That flag is also set in the above

-------------------------------------
author: Rubi Walsh
date: 2011-05-29 00:04:38.051000000

Patch Set 6: Looks good to me, approved



-------------------------------------
author: Abby Duran
date: 2011-05-29 02:51:41.949000000

Patch Set 6: Verified

Tested and verified with Farshid's tests

-------------------------------------
author: Abby Duran
date: 2011-05-29 02:51:42.117000000

Change has been successfully cherry-picked as c13ab48d794c4bda23e28c8ce9a662bf28b646ad.

-------------------------------------
