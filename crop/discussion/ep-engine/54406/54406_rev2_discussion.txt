DESCRIPTION

Acquire lock before attempting stream reconnection

Acquire streamMutex for consumer before attempting
to reconnect a stream that was closed because of
END_STREAM_SLOW message.

Change-Id: Ia342d7243fef4b97b729aa94fdc64ad020711589


COMMENTS

author: Emerson Nolan
date: 2015-08-13 00:54:12.416000000

Uploaded patch set 2: Commit message was updated.

-------------------------------------
author: Bobby Buck
date: 2015-08-13 01:02:52.728000000

Patch Set 2: Code-Review+1

-------------------------------------
author: Adrianna Holmes
date: 2015-08-13 07:21:20.894000000

Patch Set 2:

Why do you need a lock here ? What contention are you addressing by this lock ?

-------------------------------------
author: Emerson Nolan
date: 2015-08-13 17:43:19.227000000

Patch Set 2:

I didn't see any contention, just added this for code uniformity. But since we're calling this function from within the passive stream context we should be fine without the lock as well.

-------------------------------------
author: Emerson Nolan
date: 2015-08-13 17:47:34.347000000

Abandoned

Actually this would cause a dead lock, never mind this change.

-------------------------------------
author: Emerson Nolan
date: 2015-08-13 17:57:52.077000000

Restored

No deadlock, sorry was looking at the wrong variable. This should be a valid change.

-------------------------------------
author: Tate Garrett
date: 2015-08-13 23:12:45.021000000

Change has been successfully cherry-picked as fac60281c55bad01488f42dbe14517a611904127

-------------------------------------
