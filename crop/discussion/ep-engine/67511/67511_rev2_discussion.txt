DESCRIPTION

MB-20611: Fair scheduling when # of tasks >> # of threads

With large tasks and small snooze times, sorting by taskId
can result in lower taskId tasks getting 'lucky' and running
more frequently in an unfair manner.
1) Update current time of executor threads after task finishes
to ensure that sleeping tasks get woken correctly
2) Use a monotonically increasing "queue entry time" to
distinguish among tasks of the same priority in FIFO

Change-Id: If7f85573d491da26e95d0925c68e9947ac5920ad


COMMENTS

author: Emerson Nolan
date: 2016-09-12 22:30:29.980000000

Uploaded patch set 2: Patch Set 1 was rebased.

-------------------------------------
author: Hugo Blankenship
date: 2016-09-12 22:30:38.528000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1250/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-12 22:30:38.668000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1341/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-12 22:33:49.024000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/151/ (3/4)

-------------------------------------
author: Emerson Nolan
date: 2016-09-12 22:36:54.022000000

Patch Set 2:

Apologies for the accidental rebase.

-------------------------------------
author: Hugo Blankenship
date: 2016-09-12 23:25:38.104000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1060/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-12 23:32:23.262000000

Patch Set 2: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1250/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/1250/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/151/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/151/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1341/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1060/ : SUCCESS

-------------------------------------
author: Ellie Kidd
date: 2017-01-12 01:10:51.054000000

Abandoned

-------------------------------------
