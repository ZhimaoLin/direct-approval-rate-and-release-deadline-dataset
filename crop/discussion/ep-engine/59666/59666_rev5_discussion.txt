DESCRIPTION

MB-17766: Regression test that checks for race during takeover

Module test: ep-engine_stream_test

Change-Id: I8e11722b1ed1029c8b969dcb88000c5903fbb0ca


COMMENTS

author: Ashlee Kent
date: 2016-02-10 10:37:29.797000000

Uploaded patch set 5.

-------------------------------------
author: Hugo Blankenship
date: 2016-02-10 10:37:41.485000000

Patch Set 5: Well-Formed+1

Permission granted to commit to restricted branch

-------------------------------------
author: Ashlee Kent
date: 2016-02-10 10:41:11.965000000

Patch Set 5:

I've rebased the test, and expanded the scope of what's tested to cover the full sequence of events the bug affected.

-------------------------------------
author: Hugo Blankenship
date: 2016-02-10 11:06:27.564000000

Patch Set 5:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/371/

-------------------------------------
author: Hugo Blankenship
date: 2016-02-10 11:09:36.345000000

Patch Set 5: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/371/ : FAILURE

Make encountered an error building one or more targets. ( http://factory.Piper Jefferson.com//job/ep-engine-Jasmin Rangel-3.0.x/371/ )

-------------------------------------
author: Hugo Blankenship
date: 2016-02-10 11:43:54.580000000

Patch Set 5: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/372/

-------------------------------------
author: Hugo Blankenship
date: 2016-02-10 11:58:40.284000000

Patch Set 5: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-3.0.x/372/ : SUCCESS

-------------------------------------
author: Kymani Ramirez
date: 2016-02-10 13:52:40.222000000

Patch Set 5: Code-Review+1

(2 comments)

Line:101, tests/module_tests/stream_test.cc -> I thought you did not like this approach of putting constants in function calls with comments :)

Line:22, src/dcp-stream.h -> nit: remove extra line

-------------------------------------
author: Ashlee Kent
date: 2016-02-10 14:07:37.893000000

Patch Set 5:

(1 comment)

Line:101, tests/module_tests/stream_test.cc -> I only use it once here, so there's essentially no difference between declaring a (const) variable and using that, or using the constant with a comment.

It's the duplication I object to (when used in multiple places), not the approach in general :)

-------------------------------------
author: Tate Garrett
date: 2016-02-10 19:05:43.305000000

Change has been successfully cherry-picked as b84d09def3e4b34be953c6daf2f054727d25bfb6

-------------------------------------
