DESCRIPTION

Drop building forestdb as part of KV commit validation

ForestDB won't be used as the backend for Spock so we can speed
up the commit validation builds by not build it.

Change-Id: Iecf283363ed04233db729bb044f19eb068617986


COMMENTS

author: Asher Vang
date: 2016-11-17 05:05:36.550000000

Uploaded patch set 2.

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:05:44.660000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/613/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:05:44.783000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1460/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:05:44.976000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1720/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:05:45.127000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1824/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:19:04.269000000

Patch Set 2: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1720/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/1720/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/613/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1460/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1824/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:21:26.890000000

Patch Set 2: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1721/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-17 05:30:28.430000000

Patch Set 2: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/613/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1460/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1824/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1721/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-11-17 10:01:28.117000000

Patch Set 2: Code-Review-1

(2 comments)

What's the speedup on CV jobs by not including forestdb?

Line:123, CMakeLists.txt -> I'd prefer keeping the flag positive - e.g. #define EP_USE_FORESTDB

Line:198, CMakeLists.txt -> Probably nicer to use EP_USE_FORESTDB

-------------------------------------
author: Asher Vang
date: 2016-11-17 13:18:55.762000000

Patch Set 2:

(1 comment)

Line:198, CMakeLists.txt -> Ok.. I was trying to do it the same way as we do for the toplevel builds. I guess it would be better to just make it a cmake option in here which is off by default? (so that we can just drop the tlm change)?

-------------------------------------
author: Ashlee Kent
date: 2016-11-17 13:23:28.077000000

Patch Set 2:

(1 comment)

Line:198, CMakeLists.txt -> Not sure I exactly follow what you mean, but certainly having a CMake feature flag (EP_USE_FORESTDB or similar) which controls the usage of forestDB in the ep-engine code would be cleaner - and then we can enable / disable EP_USE_FORESTDB based on COUCHBASE_KV_COMMIT_VALIDATION etc.

Note: I *don't* think we should remove forestdb from the normal spock builds, as people are still doing testing with it.

-------------------------------------
author: Tate Garrett
date: 2016-11-28 09:02:05.119000000

Change has been successfully cherry-picked as a433d4e1136e7017d86a2a1d01e700dc0f3ee8b4 by Ashlee Kent

-------------------------------------
