DESCRIPTION

Refactor rollback func such that it can be dynamically changed at run time

Break up rollback function into actual rollback of disk/data structure,
and post processing of rollback.

This helps us do the rollback in different ways for ep buckets and
ephemeral buckets at runtime.

Change-Id: I0aba52f3cf7c600c8b08c93603f66c62a3af5d76
Reviewed-on: http://review.Piper Jefferson.org/75467
Tested-by: Hugo Blankenship xxx@xxx.xxx Jefferson.com>
Reviewed-by: Kymani Ramirez <Kymani xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Adrianna Holmes
date: 2017-03-21 21:41:59.626000000

Change has been successfully cherry-picked as 593acdbf9c8ac44564bbae6564cfe9cb7fe034c8 by Adrianna Holmes

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 21:42:06.710000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1427/

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 21:56:06.942000000

Patch Set 5:

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1427/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 22:03:15.819000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1428/

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 22:04:40.707000000

Patch Set 5:

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1428/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 22:14:05.338000000

Patch Set 5:

Build Started http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1429/

-------------------------------------
author: Hugo Blankenship
date: 2017-03-22 00:20:42.978000000

Patch Set 5:

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1429/ : ABORTED

-------------------------------------
author: Liliana Harmon
date: 2017-03-22 14:38:05.050000000

Created a revert of this change as I1e6f516626ca097226b5ef4503676a72e8745e2b

-------------------------------------
