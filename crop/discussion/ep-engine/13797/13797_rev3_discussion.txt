DESCRIPTION

mb-4857 prevent to free object prematurely

InvalidItemDbPager is allocated in the constructor. And it will be
used right after warmup. And it is freed in the initialize(). If
dispatcher schedules the task ahead of flusher task, the original
object will be freed prematurely before it is referenced again after
warmup. We use share_ptr to keep honest of object pointer references.

Change-Id: Iaf59e113df58a5f5a53e9cf35b6cd38d9a2afc19
[Nathalie xxx@xxx.xxx whitespace-only M-x align]
Signed-off-by: Nathalie Landry <Nathalie xxx@xxx.xxx


COMMENTS

author: Nathalie Landry
date: 2012-03-07 03:11:26.500000000

Uploaded patch set 3.

-------------------------------------
author: Nathalie Landry
date: 2012-03-07 03:11:51.023000000

Patch Set 3: Verified

+v-ing since it differs only by whitespace

-------------------------------------
author: Asher Vang
date: 2012-03-07 07:22:52.565000000

Patch Set 3: I would prefer that you didn't submit this

Is there a reason this patch isn't targeted to the master branch?

-------------------------------------
author: Nathalie Landry
date: 2012-03-07 14:59:40.642000000

Patch Set 3:

this is against 20dp4 because it's one of remaining big blockers there

-------------------------------------
author: Rubi Walsh
date: 2012-03-07 16:20:36.146000000

Patch Set 3:

Certainly it will apply to master branch too. After we test against dp4, we will merge it to master.

-------------------------------------
author: Rubi Walsh
date: 2012-03-07 19:35:15.720000000

Patch Set 3: Abandoned

Abort this commit. Merge it to a different branch-20 though

-------------------------------------
