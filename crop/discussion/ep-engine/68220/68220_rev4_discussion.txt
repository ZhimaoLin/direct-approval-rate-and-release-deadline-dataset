DESCRIPTION

Perf: Separate out diskinfo stats from diskinfo detail stats

The existing diskinfo stats calls set-up the DiskStatVisitor and the
visitBucket function is invoked every VBucket.  However the function
only does something useful if detailed diskstats are requested.

This patch creates a separate function for a diskinfo (non-detailed)
stats calls.

The patch also adds the diskinfo and diskinfo-detail stats calls
to the ep_perfsuite.  The results below show the performance of the
stats call before and then after moving into a separate function.

Before:

Latency [Baseline Stats] - 10000 items (µs) =======
                                Percentile
                  Median     95th     99th  Std Dev

AllStats         275.256  413.017  497.107   53.738
Diskinfo          37.546   66.173   74.000    8.979
Diskinfo-detail   53.662   94.670  119.024   13.585

After:

Latency [Baseline Stats] - 10000 items (µs) =======

                                Percentile
                  Median     95th     99th  Std Dev

AllStats         249.905  352.930  495.490   51.162
Diskinfo           4.219    6.230    8.438    1.382
Diskinfo-detail   49.732   76.607  101.390   11.692

Change-Id: If1e682717b0f1e4717074706f2da09496051f725


COMMENTS

author: Kymani Ramirez
date: 2016-09-30 12:53:26.119000000

Uploaded patch set 4: Commit message was updated.

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:53:31.635000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1130/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:53:31.766000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1431/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:53:31.887000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/233/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 12:53:32.028000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1336/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 13:04:04.042000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/233/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/233/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1336/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/1336/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1431/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1130/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 14:50:09.833000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1432/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 14:50:09.973000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/234/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 14:50:10.110000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1131/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 14:50:10.241000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1337/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-30 15:02:32.576000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1432/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/234/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/234/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1337/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/1337/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/1131/ : SUCCESS

-------------------------------------
author: Tate Garrett
date: 2016-10-03 16:07:49.471000000

Change has been successfully cherry-picked as 31b85d2b7b3a64e0e0702d1084b6b6cc3e22203c by Ashlee Kent

-------------------------------------
