DESCRIPTION

Update total items using item count from the underlying KVStore

In the case of full eviction, we need to update number of items
with the total number of items in the underlying data store.
The KV store maintains the item count for each vbucket file on disk.
Update the total vbucket item count with that value.

Change-Id: Ib493a996bc450ab1b321c58bdb113b644d7b661b


COMMENTS

author: Bobby Buck
date: 2016-03-16 16:51:10.937000000

Uploaded patch set 15.

-------------------------------------
author: Hugo Blankenship
date: 2016-03-16 16:51:18.693000000

Patch Set 15:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/309/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-03-16 16:51:23.708000000

Patch Set 15:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/239/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-03-16 16:51:24.954000000

Patch Set 15:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/269/ (3/3)

-------------------------------------
author: Bobby Buck
date: 2016-03-16 16:52:33.820000000

Patch Set 16: Patch Set 15 was rebased

-------------------------------------
author: Hugo Blankenship
date: 2016-03-16 16:52:34.573000000

Patch Set 15: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/239/ : ABORTED

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/269/ : ABORTED

Compile error at /home/Piper Jefferson/jenkins/workspace/ep-engine-threadsanitizer-master/ep-engine/src/couch-kvstore/couch-fs-stats.cc:37:10: error: virtual function close has a different return type (void) than the function it overrides (which has return type couchstore_error_t)
 ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/269/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/309/ : ABORTED

-------------------------------------
author: Tate Garrett
date: 2016-03-17 21:11:55.875000000

Change has been successfully cherry-picked as 26f28e2148bbc5137ca423c73541d4430b39472a

-------------------------------------
