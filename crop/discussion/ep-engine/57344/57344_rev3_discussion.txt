DESCRIPTION

Save the correct vbucket state as per the latest cached value

Persist the correct vbucket state (CAS in specific)
as per the latest cached value even in case of deletes.

Change-Id: Id4fc7ebd24e1dbb9bb8532082d66ca6c58ec41fd


COMMENTS

author: Emerson Nolan
date: 2015-11-30 23:59:02.949000000

Uploaded patch set 3: Commit message was updated.

-------------------------------------
author: Hugo Blankenship
date: 2015-11-30 23:59:17.683000000

Patch Set 3:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/891/

-------------------------------------
author: Hugo Blankenship
date: 2015-12-01 00:12:07.795000000

Patch Set 3: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/891/ : FAILURE

-------------------------------------
author: Abby Duran
date: 2015-12-01 00:15:10.033000000

Patch Set 3:

(1 comment)

Line:991, src/forest-kvstore/forest-kvstore.cc -> Please simply them to

std::string stateStr = cachedVBStates[vbucketId]->toJSON();

-------------------------------------
author: Emerson Nolan
date: 2015-12-01 00:17:59.563000000

Patch Set 3:

(1 comment)

Line:991, src/forest-kvstore/forest-kvstore.cc -> Ok.

-------------------------------------
author: Tate Garrett
date: 2015-12-01 01:16:53.774000000

Change has been successfully cherry-picked as 2000ccdcc6df1101f063fac07341d350b38df3ad

-------------------------------------
