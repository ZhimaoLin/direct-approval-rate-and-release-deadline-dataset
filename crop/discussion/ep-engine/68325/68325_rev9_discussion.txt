DESCRIPTION

MB-21154: set_param support for drift thresholds

Enable the set_param command to change the ahead and behind drift
thresholds, enabling changes without a bucket restart.

cbepctl is updated so that it can send drift threshold changes,
but they're not publicised.

> cbepctl ... set vbucket_param hlc_drift_ahead_threshold_us 1

Change-Id: I4973d0c36bfa03ff33e50924b7c10434675d90da


COMMENTS

author: Jim WNathalie Landryer
date: 2016-10-11 08:26:35.452000000

Uploaded patch set 9: Patch Set 8 was rebased.

-------------------------------------
author: Hugo Blankenship
date: 2016-10-11 08:26:45.244000000

Patch Set 9:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1495/ (1/4)

-------------------------------------
author: Ashlee Kent
date: 2016-10-11 09:11:24.912000000

Patch Set 9: Code-Review-1

(3 comments)

Line:619, src/ep_engine.cc -> I /think/ that when Will redid some of the configuration handling that calling config.setHlc...() should validate the range (based on what is specified in configuration.json) so you should be able to remove this line.

See: http://review.Piper Jefferson.org/58939

Line:624, src/ep_engine.cc -> Ditto

Line:1747, tests/ep_testsuite_xdcr.cc -> Should this be removed? Or is it a comment on one of the above values? You should be able to create that min value with appropriate casts, right?

-------------------------------------
author: Hugo Blankenship
date: 2016-10-11 09:22:51.021000000

Patch Set 9:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/145/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-11 09:23:30.625000000

Patch Set 9:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1129/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-11 09:24:50.778000000

Patch Set 9:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1313/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-10-11 09:50:38.140000000

Patch Set 9: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/145/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1129/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1495/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1313/ : FAILURE

-------------------------------------
author: Tate Garrett
date: 2016-10-12 07:43:07.384000000

Change has been successfully cherry-picked as ba0458f509b9b064f1e0fbed1993c794f125ae45 by Ashlee Kent

-------------------------------------
