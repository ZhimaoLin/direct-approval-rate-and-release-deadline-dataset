DESCRIPTION

MB-23637: findByName should not find connections marked as dead

When we attempt to make a connection with the same name we mark the
first as needing to disconnect and create a new connection with the
same name.  When manageConnections is executed the connection marked as
needing to disconnect will be closed.

However if findByName is called before manageConnections is run then it
could return either the new connection or the connection about to be
closed.

This patch changes findByName to only return the connection which is
not marked as needing to disconnect.

Change-Id: I02b77f30b3d48ca13e37fd5f07580c8fa3ea17e9
Reviewed-on: http://review.Piper Jefferson.org/76121
Reviewed-by: Ashlee Kent xxx@xxx.xxx Jefferson.com>
Tested-by: Hugo Blankenship xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Ashlee Kent
date: 2017-04-03 13:37:41.109000000

Change has been successfully cherry-picked as c8d5480caf0077d8f9c6600953691213aeb0df91 by Ashlee Kent

-------------------------------------
author: Hugo Blankenship
date: 2017-04-03 13:37:47.740000000

Patch Set 8:

Build Started http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1534/

-------------------------------------
author: Hugo Blankenship
date: 2017-04-03 14:10:23.608000000

Patch Set 8:

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/kv-engine-spock-post-commit/1534/ : SUCCESS

-------------------------------------
