DESCRIPTION

MB-22123 - improve DCP rollback log message

Hoping to make the DCP rollback log message slightly more informative,
now gives a reason for the rollback.

For example,

2016-12-28T06:27:00.946484Z WARNING (default) DCP (Producer)
eq_dcpq:xdcr:dcp_5ce87... - (vb 543) Stream request failed because purge
seqno (20) is greater than snapshot start (0) - items may have been
deleted and purged and could be missed, rollback to 0

Other possible cases:

Stream request failed because ...
 consumer and producer have no common history, rollback to 0
 consumer and producer histories partially match, rollback to snapshot
  start (0)
 consumer and producer histories partially match, rollback to producer
  upper (15)

Change-Id: Idd171840076fc4d6cf95a71232a865edb58efc31


COMMENTS

author: Hugo Blankenship
date: 2017-01-23 11:54:25.231000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3115/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 11:54:25.383000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2580/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 11:54:25.525000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1785/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 11:54:25.668000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2953/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 12:04:40.096000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3115/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2953/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2580/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1785/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 13:20:55.545000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3117/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 13:26:48.729000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2955/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 13:27:19.805000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2582/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 13:28:08.256000000

Patch Set 4:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1787/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 13:48:43.894000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3117/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2955/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2582/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1787/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 15:43:53.512000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3119/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 15:54:57.464000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3119/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2955/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2582/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1787/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 16:54:10.123000000

Patch Set 4: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3121/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-23 17:08:51.461000000

Patch Set 4: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3121/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2955/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2582/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1787/ : SUCCESS

-------------------------------------
author: Tate Garrett
date: 2017-01-25 17:13:03.848000000

Change has been successfully cherry-picked as 0a81d315bd13d3c8f99354abcc72a817559b984d by Ashlee Kent

-------------------------------------
