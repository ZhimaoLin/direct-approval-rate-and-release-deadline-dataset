DESCRIPTION

ExecutorPool: wake sleeping tasks when maxWorkers is increased

Currently, if we increase the maximum number of workers of a given
type then the TaskQueues can end up waiting for the _doSleep condition
variable to timeout before the new worker capacity is utilized. In
some tests (where the maxReader threads is initially set to 0 and then
increased to 1) it can take ~2s after the workers are increased for
the waiting Tasks to be rescheduled.

Fix this by attempting to wake any tasks if the max workers is
increased. This removes any delay in scheduling the work.

Change-Id: Id63d537d0321eb7e4e9f862f766a8aec0f208b78


COMMENTS

author: Ashlee Kent
date: 2016-04-21 15:05:50.727000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-04-21 15:06:00.212000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/509/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-21 15:13:10.569000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/460/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-21 16:37:39.947000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/388/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-21 16:44:55.574000000

Patch Set 1: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/460/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/460/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/388/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/509/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-04-29 18:04:31.439000000

Abandoned

No longer needed as have synchronous testing.

-------------------------------------
