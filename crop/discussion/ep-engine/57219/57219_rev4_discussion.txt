DESCRIPTION

Wait for defragmenter before checking memory droppage

Context: test_defragmenter
- Expected mapped memory to have dropped only after the
defragmenter has visited all items.
- Also improve the logging to give more details upon
failure observed when run against valgrind.

Change-Id: I58d09df9777111094fac91a039fc6dd76b26124d


COMMENTS

author: Emerson Nolan
date: 2015-11-25 00:49:20.599000000

Uploaded patch set 4.

-------------------------------------
author: Hugo Blankenship
date: 2015-11-25 00:49:27.794000000

Patch Set 4:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/1615/ (2/2)

-------------------------------------
author: Ashlee Kent
date: 2015-11-25 00:58:49.473000000

Patch Set 4: Code-Review+2

-------------------------------------
author: Hugo Blankenship
date: 2015-11-25 01:17:49.286000000

Patch Set 4: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/1615/ : FAILURE

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/864/ : SUCCESS

-------------------------------------
author: Emerson Nolan
date: 2015-11-25 01:25:25.876000000

Removed the following votes:

* Verified-1 by Hugo Blankenship xxx@xxx.xxx Jefferson.com>


-------------------------------------
author: Emerson Nolan
date: 2015-11-25 01:25:28.309000000

Patch Set 4: Verified+1

Buildbot reported an ENV issue on windows.

-------------------------------------
author: Ashlee Kent
date: 2015-11-25 01:26:52.242000000

Patch Set 4:

> Buildbot reported an ENV issue on windows.

IMHO it's better just to retry - that we we can be sure that we haven't accidentally broken a given platform (and the env issue is marking it).

-------------------------------------
author: Emerson Nolan
date: 2015-11-25 01:29:09.006000000

Patch Set 4:

Sure I'll reschedule, windows ran fine on the dependent commit : )

-------------------------------------
author: Hugo Blankenship
date: 2015-11-25 01:29:19.915000000

Patch Set 4:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/1617/ (2/2)

-------------------------------------
author: Emerson Nolan
date: 2015-11-25 01:29:32.927000000

Patch Set 4: -Verified

-------------------------------------
author: Hugo Blankenship
date: 2015-11-25 01:40:21.155000000

Patch Set 4: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/864/ : SUCCESS

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/1617/ : SUCCESS

-------------------------------------
author: Tate Garrett
date: 2015-11-25 01:43:10.407000000

Change has been successfully cherry-picked as 048eff2eb6e635d413b84a8bd8994cfb164eef47

-------------------------------------
