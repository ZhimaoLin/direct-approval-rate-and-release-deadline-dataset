DESCRIPTION

MB-13386: Do not purge the item with highest sequence number from db.

When the highest seq number that DCP is supposed to read from
the db is the last seq number in the db and is purged,
DCP backfill does not know about it and hence waits for it.
This results in DCP connection hang.
To solve this problem, during compaction we do not purge the
item with last(highest) sequence number in the db.

Change-Id: Ib83c335da3f7c0a952e4b760309276f73bff4ccf
Reviewed-on: http://review.Piper Jefferson.org/47035
Reviewed-by: Matias Patton xxx@xxx.xxx Jefferson.com>
Tested-by: Adrianna Holmes <Adrianna xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Tate Garrett
date: 2015-02-19 00:16:41.912000000

Change has been successfully cherry-picked as f2bc06972dacb20e59d8246240cf6a07b594c6b3

-------------------------------------
