DESCRIPTION

MB-9203 Always reset the open checkpoint upon resetting a vbucket

When a replica vbucket is reset, its open checkpoint id is not
reset to zero when the vbucket has zero items. This causes a bug
in updating the persisted checkpoint id, which consequently
incurs the rebalance to be stuck.

This fix always resets the open checkpoint id of a replica
vbucket to zero upon resetting the vbucket.

Change-Id: If6b5e2ca9b37dd533818e8d3397ec2c695345295


COMMENTS

author: Abby Duran
date: 2013-11-14 21:57:23.051000000

Uploaded patch set 2.

-------------------------------------
author: Ellie Kidd
date: 2013-11-14 22:22:53.384000000

Patch Set 2: Verified+1 Code-Review+2

verified - unit tests pass on local setup

-------------------------------------
