DESCRIPTION

Have the flusher perform the batch commit before being pushed back to the queue

This commit makes sure that the flusher persists the dirty items that
belong to all the vbuckets in the shard, before requeuing to the task queue.
Otherwise, there are too many uncommitted items in the cache, which we cannot
evict.

Change-Id: If78a0796e78cf053312e3d44a6f150604b247917


COMMENTS

author: Abby Duran
date: 2016-09-03 04:33:46.757000000

Uploaded patch set 3.

-------------------------------------
author: Hugo Blankenship
date: 2016-09-03 04:33:54.451000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/997/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-03 04:33:54.584000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1265/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-03 04:33:54.713000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/70/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-03 04:33:54.855000000

Patch Set 3:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1173/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-09-03 04:48:36.209000000

Patch Set 3: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/1265/ : FAILURE

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/70/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/70/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/997/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/1173/ : SUCCESS

-------------------------------------
author: Emerson Nolan
date: 2017-08-30 18:29:58.054000000

Abandoned

-------------------------------------
