DESCRIPTION

MB-23209: Add ephemeral_full_policy support (auto_delete & fail_new_data)

Add support for the 'ephemeral_full_policy':

- If set to 'auto_delete', then Ephemeral buckets should page out
  items by deleting them - this differs from Persistent buckets where
  items are paged out by just ejecting them from memory.

  Add support for this by implementing 'paging out' as deletion for
  Ephemeral. Note that replica buckets do /not/ have items paged out -
  as this would cause the replica to go out of sync with it's active
  pair. Instead they will rely on processing DCP Deletion messages.

- If set to 'fail_new_data', then Ephemeral buckets should *not* page
  out old data - this is done by disabling the ItemPager task.

Note that this setting is dynamic - it can be changed at runtime via
cbepctl.

Change-Id: I233154e4761ecb645d38c3bdbd511e6c7dc44b50


COMMENTS

author: Ashlee Kent
date: 2017-03-21 16:05:35.118000000

Patch Set 8: Patch Set 7 was rebased

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 16:43:57.540000000

Patch Set 8: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/3795/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-addresssanitizer-master/3795/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/4985/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/4536/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/5210/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2017-03-21 18:02:42.214000000

Patch Set 8: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/4985/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/4536/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/5210/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/3809/ : SUCCESS

-------------------------------------
author: Kymani Ramirez
date: 2017-03-21 20:44:31.414000000

Patch Set 8: Code-Review+1

(1 comment)

Line:131, tests/module_tests/item_pager_test.cc -> just

-------------------------------------
