DESCRIPTION

Handling the race between flusher and snapshot tasks

If a snapshot task hasn't run when the first flusher
task runs, and there is no entry in cachedVBStates,
at this point rather than asserting, retry the flush
operation after the VBStatePersistTask.

Change-Id: I61f9abb1d240050531854b27686af8df209c726c


COMMENTS

author: Emerson Nolan
date: 2015-07-27 23:11:48.869000000

Uploaded patch set 5.

-------------------------------------
author: Hugo Blankenship
date: 2015-07-27 23:11:53.032000000

Patch Set 5:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/627/

-------------------------------------
author: Hugo Blankenship
date: 2015-07-27 23:42:09.264000000

Patch Set 5: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/627/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2015-07-27 23:45:06.540000000

Patch Set 5: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/628/

-------------------------------------
author: Hugo Blankenship
date: 2015-07-28 00:11:54.226000000

Patch Set 5: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/628/ : FAILURE

-------------------------------------
author: Hugo Blankenship
date: 2015-07-28 00:13:30.379000000

Patch Set 5: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/629/

-------------------------------------
author: Hugo Blankenship
date: 2015-07-28 00:40:32.170000000

Patch Set 5: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/629/ : ABORTED

-------------------------------------
author: Hugo Blankenship
date: 2015-07-28 00:40:34.479000000

Patch Set 5: -Verified

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/630/

-------------------------------------
author: Emerson Nolan
date: 2015-07-28 00:43:02.633000000

Patch Set 5:

The commit validation is failing on a time out issue. This is a known issue and is happening because the flusher is timing out due to slow disk caused by the job running in a vm on a vm.

-------------------------------------
author: Abby Duran
date: 2015-07-28 00:43:38.803000000

Patch Set 5: Verified+1 Code-Review+2

-------------------------------------
author: Tate Garrett
date: 2015-07-28 00:43:41.220000000

Change has been successfully cherry-picked as 4f18c7c487c746c91e17dc90387c81347bea5e4a

-------------------------------------
author: Hugo Blankenship
date: 2015-07-28 01:04:12.416000000

Patch Set 5:

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/630/ : SUCCESS

-------------------------------------
