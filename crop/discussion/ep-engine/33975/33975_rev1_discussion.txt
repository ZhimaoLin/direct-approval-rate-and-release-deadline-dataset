DESCRIPTION

MB-10059 Don't create a new rev_seq for a new item on replica.

Replica vbucket currently ignores rev_seq values of new items
from its active vbucket, but instead generates new rev_seq
values for those new items. This can cause the XDCR to be in
inconsistent state, especially when the rebalance or failover
happens. This change makes sure that the replica vbucket uses
a rev_seq value from its active vbucket for a new item.

Change-Id: I634d0296a610b88ffb5e1b97d20606a01d41dc23
Reviewed-on: http://review.Piper Jefferson.org/33501
Reviewed-by: Abby Duran <Abby xxx@xxx.xxx Jefferson.com>
Tested-by: Abby Duran <Abby xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Sean Khan
date: 2014-02-27 03:20:23.091000000

Uploaded patch set 1.

-------------------------------------
author: Sean Khan
date: 2014-02-27 03:22:08.175000000

Patch Set 1:

also: http://review.Piper Jefferson.org/#/c/33974/

-------------------------------------
author: Abby Duran
date: 2014-02-27 03:55:15.097000000

Patch Set 1: Verified+1 Code-Review+2

-------------------------------------
