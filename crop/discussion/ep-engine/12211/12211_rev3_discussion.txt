DESCRIPTION

Expire temporary items created in response to get-meta requests

Upon restoring deleted items from the persistent store, we set them
to expire after a predetermined amount of time (default is 60 secs).

This change set modifies the Deleter class to also look for temporary
items and delete them when the following conditions are met:
1. They are either in the meta_available or non_existent states i.e.,
   the background fetches for these items have completed. If a fetch
   is in process, we let it finish.
2. They have expired.

Also, upon deleting temporary items, we don't put them on the check-
point queues as don't need to be either persisted or replicate to
another node.

Change-Id: Ife51b5b37e72f63db817f4c7519f5e4da3cd8eaa


COMMENTS

author: Tatiana Sheppard
date: 2012-01-24 01:58:12.699000000

Uploaded patch set 3.

-------------------------------------
author: Abby Duran
date: 2012-01-24 02:10:01.599000000

Patch Set 3: Looks good to me, approved



-------------------------------------
author: Abby Duran
date: 2012-01-24 06:19:17.511000000

Patch Set 3: I would prefer that you didn't submit this

(2 inline comments)

Please look at my comments.

Line:798, ep.cc -> Please refactor this part by adding "isTempItem()" to StoredValue class.

Line:44, item_pager.cc -> Please add the new function like "isTempItem()" to StoredValue class and check its state there instead of having two OR predicates here.

-------------------------------------
author: Tatiana Sheppard
date: 2012-01-24 06:34:15.662000000

Patch Set 3:

Great suggestion. I somehow missed it. Will fix and upload a new patch.

-------------------------------------
