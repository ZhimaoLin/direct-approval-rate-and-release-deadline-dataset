DESCRIPTION

Fix ThreadSanitizer race. Move to hrtime in Scheduler

Use hrtime instead of timeval for the global thread pool
This has small improvements in memory and cpu usage.
Also fixes several ThreadSanitizer races from unit tests.

Change-Id: I78fdddb832251fc062058c04f75f8d22c4c2f68d


COMMENTS

author: Ellie Kidd
date: 2015-07-22 23:02:27.361000000

Uploaded patch set 7.

-------------------------------------
author: Hugo Blankenship
date: 2015-07-22 23:02:33.450000000

Patch Set 7:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/586/

-------------------------------------
author: Ellie Kidd
date: 2015-07-22 23:03:32.720000000

Patch Set 7:

Thanks Dave, I have address your suggestion in the latest patchset by having the Executor pool move to hrtime_t instead of timeval.

-------------------------------------
author: Hugo Blankenship
date: 2015-07-22 23:10:08.461000000

Patch Set 7: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master-multi/586/ : FAILURE

-------------------------------------
author: Tate Garrett
date: 2015-07-23 23:14:54.730000000

Change has been successfully cherry-picked as 5f3eb257e5a1ab1426de6fb3b37deb742c3616fe

-------------------------------------
