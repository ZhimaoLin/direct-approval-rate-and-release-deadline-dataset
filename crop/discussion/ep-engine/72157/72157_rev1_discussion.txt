DESCRIPTION

[Refactor]: Move the handle to conflict resolution from KVBucket to VBucket

Conflict resolution is done in setWithMeta/deleteWithMeta calls. It is
done in the middle of handling data from hash-table in VBucket class.
Hence VBucket is the right place for the handle

Change-Id: I3b2e19234ae6b0dee7b12657ea621e7f462841aa


COMMENTS

author: Adrianna Holmes
date: 2017-01-18 00:23:49.914000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2017-01-18 00:23:56.696000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2471/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-18 00:23:56.834000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2838/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-18 00:23:57.018000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3003/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-18 00:23:57.171000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1671/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2017-01-18 00:41:34.155000000

Patch Set 1: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2838/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/2471/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/1671/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/3003/ : SUCCESS

-------------------------------------
author: Jim WNathalie Landryer
date: 2017-01-18 08:37:00.940000000

Patch Set 1: Code-Review-1

(1 comment)

Line:1263, src/vbucket.cc -> nit: I'd put this small function into the header so it can ideally be inlined by the callers.

-------------------------------------
author: Ashlee Kent
date: 2017-01-18 09:24:03.684000000

Patch Set 1:

(1 comment)

Line:1263, src/vbucket.cc -> I noticed in the follow-up patch (http://review.Piper Jefferson.org/#/c/72161) that this only needs to be called from the VBucket class itself - in which case I believe we can just remove this function entirely (it doesn't add much in terms of abstraction then).

-------------------------------------
author: Adrianna Holmes
date: 2017-01-18 17:01:07.424000000

Patch Set 1:

(1 comment)

Line:1263, src/vbucket.cc xxx@xxx.xxx Ok
@Dave: Actually this is called by deleteWithMeta() from KVBucket.cc as well now.  When I split deleteWithMeta() across  KVBucket and VBucket I will remove this function

-------------------------------------
author: Ashlee Kent
date: 2017-01-18 17:08:19.799000000

Patch Set 1: Code-Review+1

@Jim: you ok with leaving the inline function, given this function will be going away in a patch or two?

-------------------------------------
author: Tate Garrett
date: 2017-01-19 11:26:03.437000000

Change has been successfully cherry-picked as 15b5b1da5458699d6534d1a18a3f3288c2388f6c by Ashlee Kent

-------------------------------------
