DESCRIPTION

MB-21599: Prevent LWW XDCR from non LWW cluster

Add support for FORCE_ACCEPT_WITH_META_OPS
 - This flag must be set if the bucket is lww
 - Error if the bucket is !lww

Add support for REGENERATE_CAS
 - This flag requires SKIP_CONFLICT_RESOLUTION
 - When the item is stored, its CAS is re-created.

Tidy up test code relating to *_with_meta and add more extensive
testing of options and nmeta.

Change-Id: Ifb149927d3f63357d30392352c9c81533cbf2ff1


COMMENTS

author: Jim WNathalie Landryer
date: 2016-11-21 14:24:21.376000000

Uploaded patch set 11.

-------------------------------------
author: Hugo Blankenship
date: 2016-11-21 14:24:28.248000000

Patch Set 11:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1461/ (1/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-21 14:24:28.380000000

Patch Set 11:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1892/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-21 14:24:28.527000000

Patch Set 11:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/494/ (3/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-21 14:24:28.665000000

Patch Set 11:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1676/ (4/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-11-21 14:35:44.029000000

Patch Set 11: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/1461/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/1892/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/1676/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-watson/494/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-11-21 15:37:22.843000000

Patch Set 11: Code-Review+2

(1 comment)

Line:5421, src/ep_engine.cc -> Nit: Can make const and a reference (code seems to assume that it's non-null).

-------------------------------------
author: Tate Garrett
date: 2016-11-21 17:08:01.020000000

Change has been successfully cherry-picked as 8d564a0c9d1f249a7b9828e3865a759dcf5148ce by Ashlee Kent

-------------------------------------
