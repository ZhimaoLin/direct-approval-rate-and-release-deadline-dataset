DESCRIPTION

MB-21957: Wait for flushing in full_eviction mode (ep_testsuite)

Update "stats curr_items ADD SET" to wait for flushing to finish
when in full-eviction mode.

The curr_items stat gets updated from commit and the test may
read the stat before the writes are finished.

Change-Id: Ie5a57a9a5bf3c278c7d6b8f0fb4cf3f5fcea09ff


COMMENTS

author: Jim WNathalie Landryer
date: 2016-12-12 12:41:36.275000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-12-12 12:41:46.912000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/2140/ (1/4)

-------------------------------------
author: Ashlee Kent
date: 2016-12-12 12:49:34.611000000

Patch Set 1: Code-Review-1

(1 comment)

Line:500, tests/ep_test_apis.h -> prefer get_str_stat - that only stores one stat (as opposed to all of them), and it notably faster, particulary in tsan / asan variants.

-------------------------------------
author: Hugo Blankenship
date: 2016-12-12 12:51:30.032000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-addresssanitizer-master/903/ (2/4)

-------------------------------------
author: Hugo Blankenship
date: 2016-12-12 12:53:49.827000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/2061/ (3/4)

-------------------------------------
author: Tate Garrett
date: 2016-12-12 13:30:33.124000000

Change has been successfully cherry-picked as 74b92fd1632caf18634cdedaad6d13b1945dfd0a by Ashlee Kent

-------------------------------------
