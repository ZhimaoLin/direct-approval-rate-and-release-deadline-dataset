DESCRIPTION

Add a new TAP_OPAQUE message to notify the termination of tap stream

This new message is sent by the eVBucketMigrator to notify that the
source node closes the tap replication stream and switches to
TAKEOVER_VBUCKETS phase.

This is just an informative message and doesn't require any action
from the TAP client. Once the ns_server receives an ACK from the
client, it will close the current replication stream and open the
new stream for TAKEOVER_VBUCKETS.

Change-Id: I71eefb826e44058be4547229b7ad0f777ddcbd1b


COMMENTS

author: Nathalie Landry
date: 2011-05-06 02:04:13.267000000

Patch Set 1:

BTW, according to memcached source TAP_NOOP would work too.

-------------------------------------
author: Rubi Walsh
date: 2011-05-06 02:06:50.252000000

Patch Set 1: Looks good to me, but someone else must approve



-------------------------------------
author: Abby Duran
date: 2011-05-06 02:09:42.043000000

Patch Set 1:

If you think we don't need an additional opaque message, we can abandon this change.

-------------------------------------
author: Nathalie Landry
date: 2011-05-06 02:10:34.401000000

Patch Set 1:

maybe. Let me complete ns_server part and try things.

-------------------------------------
author: Nathalie Landry
date: 2011-05-06 18:26:07.338000000

Patch Set 1: Verified; Looks good to me, approved



-------------------------------------
author: Nathalie Landry
date: 2011-05-06 18:26:07.524000000

Change has been successfully cherry-picked as de70976f9613f72669fb481ef079e7c837614149.

-------------------------------------
