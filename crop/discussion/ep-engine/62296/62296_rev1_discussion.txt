DESCRIPTION

MB-18974: Fix intermittant failure in test_expiration_on_warmup (2)

There is an additional issue with the expiration_on_warmup test which
can cause it to fail intermittently - we increment the 'expired_pager'
statistic /before/ we actually expire the item. This means there is a
potential window in the test where the expired_pager statistic will
report '1', yet curr_items will not report 0 (as the item hasn't yet
been removed).

Fix by deferring the expired_pager statistic update until we have
actually expired the item.

Change-Id: Iab7bf30edbea049efccd0746d6208218e931c205


COMMENTS

author: Ashlee Kent
date: 2016-04-01 15:35:10.967000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 15:35:21.278000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/327/ (1/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 15:42:03.497000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/230/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 15:43:50.651000000

Patch Set 1:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/351/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 15:50:37.461000000

Patch Set 1: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/351/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-watson/351/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/230/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/327/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 15:58:50.764000000

Patch Set 1: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/353/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 16:03:14.127000000

Patch Set 1: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/353/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-watson/353/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/230/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/327/ : SUCCESS

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 16:09:55.140000000

Patch Set 1: -Verified

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/354/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-04-01 16:13:56.879000000

Patch Set 1: Verified+1

Build Successful 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-watson/230/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-watson/327/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-watson/354/ : SUCCESS

-------------------------------------
author: Emerson Nolan
date: 2016-04-01 16:45:03.941000000

Patch Set 1: Code-Review+2

-------------------------------------
author: Abby Duran
date: 2016-04-01 16:47:03.930000000

Patch Set 1: Code-Review+2

-------------------------------------
author: Tate Garrett
date: 2016-04-01 16:47:05.748000000

Change has been successfully cherry-picked as bed645f717851633c83d8f3486313040be89d4e1

-------------------------------------
