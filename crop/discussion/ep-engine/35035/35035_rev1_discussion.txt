DESCRIPTION

MB-10348: Vbucket's purge_seqno available in stats

vbucket-seqno will list 3 stats now:
- vb_x:uuid
- vb_x:high_seqno
- vb_x:purge_seqno

Change-Id: Icb501b2d305c5ee1efb3903f8c166ccb986c1c61


COMMENTS

author: Emerson Nolan
date: 2014-03-28 03:55:10.479000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2014-03-28 03:55:49.591000000

Patch Set 1:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-300/403/

-------------------------------------
author: Kenny Maynard
date: 2014-03-28 03:58:37.546000000

Patch Set 1:

(1 comment)

Line:181, src/vbucket.h -> Is there a way we can set the purge seqno during warmup? This will cause issues on a cluster that was shutdown and restarted if this is set to 0.

-------------------------------------
author: Hugo Blankenship
date: 2014-03-28 04:19:17.972000000

Patch Set 1: Verified-1

Build Failed 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-300/403/ : FAILURE

need to update, install, or configure build tools, environment variables, ssh credentials (requires no code change)

-------------------------------------
author: Emerson Nolan
date: 2014-03-28 20:32:29.619000000

Patch Set 1:

(1 comment)

Line:181, src/vbucket.h -> Yes, i could add it as a part of snapshotvbuckets task, adding an extra parameter to the vbucket_state structure, does that sound ok?

-------------------------------------
author: Kenny Maynard
date: 2014-03-28 21:44:58.196000000

Patch Set 1:

(1 comment)

Line:181, src/vbucket.h -> We should be able to read it out of the latest db header for each couch file. Once the server is running then we can rely on the code already in this review to make sure that the purge seqno is up to date.

-------------------------------------
