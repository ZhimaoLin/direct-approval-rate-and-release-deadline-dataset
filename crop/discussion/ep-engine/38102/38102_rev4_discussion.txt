DESCRIPTION

MB-11287 Lock TaskQ selectively, avoid busy loops

Global Thread Pool offers 2 serialization features:
1. lockless shard serialization (Flusher, VBDelete, Snapshot etc)
2. task-queue based thread control (NonIO and AuxIO)
If thread is working on tasks that need neither of the above two,
then avoid any additional locking overhead.

Also isLock variable ends up causing more overhead, removing same

Change-Id: I38b060573975786973aa608277d40851adb64e45


COMMENTS

author: Ellie Kidd
date: 2014-06-10 23:54:35.081000000

Patch Set 4: Commit message was updated

-------------------------------------
author: Emerson Nolan
date: 2014-06-11 00:39:43.954000000

Patch Set 4: Code-Review+1

-------------------------------------
author: Ellie Kidd
date: 2014-06-11 05:31:57.612000000

Patch Set 4: Verified+1 Code-Review+2

12% improvement in performance in test cases using views. lowered cpu usage.

-------------------------------------
