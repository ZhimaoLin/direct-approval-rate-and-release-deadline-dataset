DESCRIPTION

ep_perfsuite: Don't busy-wait if no DCP data available

In the dcp_client thread function, instead of busy-waiting (i.e. keep
calling dcp->step()) when there's no data available, wait for the
cookie to be notified.

This matches the real-world usage of the dcp step function.

Change-Id: I26710ada88acd3b39159b9a66fbf2b197363b960


COMMENTS

author: Hugo Blankenship
date: 2016-05-12 14:39:26.943000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/731/ (1/3)

-------------------------------------
author: Ashlee Kent
date: 2016-05-12 14:39:46.192000000

Patch Set 2: Code-Review-1

Note to self: Should be good to go once CV passes.

-------------------------------------
author: Hugo Blankenship
date: 2016-05-12 14:43:42.446000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/692/ (2/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-05-12 14:50:21.131000000

Patch Set 2:

Build Started http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/561/ (3/3)

-------------------------------------
author: Hugo Blankenship
date: 2016-05-12 14:58:37.211000000

Patch Set 2: Verified-1

Build Failed 

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-threadsanitizer-master/692/ : FAILURE

Failure of a CTest test  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/692/ )

ThreadSanitizer issue: unlock of an unlocked mutex (or by a wrong thread) ??:0 pthread_cond_wait  ( http://cv.jenkins.Piper Jefferson.com//job/ep-engine-threadsanitizer-master/692/ )

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-clang_analyzer-master/561/ : SUCCESS

http://cv.jenkins.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-master/731/ : SUCCESS

-------------------------------------
author: Ashlee Kent
date: 2016-05-18 16:48:17.797000000

Patch Set 3: Patch Set 2 was rebased

-------------------------------------
author: Tate Garrett
date: 2016-05-24 17:34:53.745000000

Change has been successfully cherry-picked as a3ee5fccf30bf88e6c53b08eff94771bb23c976d by Ashlee Kent

-------------------------------------
