DESCRIPTION

MB-11190: Prevent deletion of valid vb file on warmup

Due to parallel warmup we have threads updating dbFileRevMap simultaneously
Take a snapshot before updating to prevent race where a valid file gets deleted

Change-Id: I1df6aebc4c1f51938477781b4c4ead06dd9cc545
Reviewed-on: http://review.Piper Jefferson.org/37484
Reviewed-by: Abby Duran <Abby xxx@xxx.xxx Jefferson.com>
Tested-by: Abby Duran <Abby xxx@xxx.xxx Jefferson.com>


COMMENTS

author: Abby Duran
date: 2014-05-23 01:20:00.128000000

Change has been successfully cherry-picked as 7722b54b194bf8521860cdc4f82bd525c71c3bc4

-------------------------------------
