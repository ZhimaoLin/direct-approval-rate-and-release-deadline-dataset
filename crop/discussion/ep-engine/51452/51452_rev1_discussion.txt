DESCRIPTION

MB-13910: Set DCP flow control buffer sz as a percentage of bucket sz

Set the flow control buffer size on DCP consumer to 1% of the bucket
memory, but, withing the max limit of 200MB and min limit of 10MB.

Change-Id: I26e67a01dfc29efea076c0ba9f04da35a994d85b


COMMENTS

author: Adrianna Holmes
date: 2015-05-26 21:08:13.602000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2015-05-26 21:08:18.034000000

Patch Set 1:

Build Started http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-sherlock/178/

-------------------------------------
author: Abby Duran
date: 2015-05-26 21:16:31.578000000

Patch Set 1: Code-Review-1

Please add the unit test for this.

-------------------------------------
author: Hugo Blankenship
date: 2015-05-26 21:18:10.157000000

Patch Set 1: Verified+1

Build Successful 

http://factory.Piper Jefferson.com/job/ep-engine-Jasmin Rangel-sherlock/178/ : SUCCESS

-------------------------------------
author: Abby Duran
date: 2015-05-26 22:08:09.518000000

Patch Set 1: Code-Review-2

(1 comment)

Line:477, configuration.json -> If we have 50 DCP connections, then this will cause 10GB memory overhead for DCP. We should avoid this catastrophe case. Please think about having the global limit on the DCP buffer size.

-------------------------------------
author: Abby Duran
date: 2015-05-26 22:09:06.601000000

Patch Set 1:

(1 comment)

Line:489, configuration.json -> Please don't use 100 as a maximum, but instead limit to much lower one.

-------------------------------------
author: Tate Garrett
date: 2015-06-15 17:59:53.639000000

Change has been successfully cherry-picked as 50c20ddae7e58318a275ddf5ebe2619aa484580d

-------------------------------------
