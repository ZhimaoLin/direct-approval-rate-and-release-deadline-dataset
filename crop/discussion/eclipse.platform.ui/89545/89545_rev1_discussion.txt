DESCRIPTION

Bug 511014 - Memory leak with context menu items of the text editors

When all items of menuManager need removal when the menu is about to
show (removeAllWhenShown is set to true), the items are removed from the
menu model but not from the MenuManagerRenderer maps.
As result the contributions such as Open With menu item in the context
menu of the text editors are leaking. As the Open With menu is an inner
class it holds a reference to the owning editor and the editor leaks as
well. 
This patch aims to cleanup the MenuManagerRenderer maps -
modelToManager/managerToModel, modelToContribution/contributionToModel
and modelContributionToRecord, when a popup menu is configured to remove
all menu items when shown.

Change-Id: Iadddd21e9792354a270b94067f05cb0e6cf34630
Signed-off-by: Brianna Gallagher xxx@xxx.xxx

COMMENTS

author: Brianna Gallagher
date: 2017-01-25 17:42:47.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2017-01-25 19:55:16.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/platform/job/eclipse.platform.ui-Gerrit/11783/

-------------------------------------
author: Brenden Conley
date: 2017-01-25 20:24:00.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/platform/job/eclipse.platform.ui-Gerrit/11783/ : SUCCESS

-------------------------------------
author: Jayvion Booth
date: 2017-01-26 06:58:06.000000000

Patch Set 1:

See also similar patch in different code: https://git.eclipse.org/r/#/c/82956/.

-------------------------------------
author: Jayvion Booth
date: 2017-01-28 15:14:41.000000000

Patch Set 2: Patch Set 1 was rebased

-------------------------------------
author: Gerrit Code Review
date: 2017-02-02 19:42:41.000000000

Change has been successfully merged into the git repository by Jayvion Booth

-------------------------------------
