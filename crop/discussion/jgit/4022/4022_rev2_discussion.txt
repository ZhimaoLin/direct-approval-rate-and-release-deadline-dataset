DESCRIPTION

PushCommand should push all branches existing on the remote by default

If no push RefSpec is given and setPushAll is not set the command
should push changes from all branches existing on the remote.

Bug: 353405
Change-Id: Ibd9c5acffe67964d2ebcfca4789974568534b7c3


COMMENTS

author: Clay Cameron
date: 2011-08-18 09:26:24.000000000

Uploaded patch set 2.

-------------------------------------
author: Brenden Conley
date: 2011-08-18 09:26:28.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/sandbox/job/jgit.gerrit/747/ 

-------------------------------------
author: Brenden Conley
date: 2011-08-18 09:29:49.000000000

Patch Set 2: Build Successful

Build Successful 
 
https://hudson.eclipse.org/sandbox/job/jgit.gerrit/747/ : SUCCESS

-------------------------------------
author: Carlie Harper
date: 2011-08-24 15:41:00.000000000

Patch Set 2: I would prefer that you didn't submit this

I think we should implement it in the way Shawn suggested in the mailing list: http://dev.eclipse.org/mhonarc/lists/jgit-dev/msg01227.html.

Just using the local remote tracking branches may also be a good approximation but it would not lead to the same behavior as native git. 

What I do not know and have not checked yet: What does native git do if no push RefSpec is given but there is a "branch.$name.merge" config entry which maps a local branch with name X to a remote tracking branch of name Y, but X and Y exist on the remote side?

-------------------------------------
author: Clay Cameron
date: 2011-08-25 10:12:07.000000000

Patch Set 2:

> What does native git do ...

I've checked that. Created two branches: x and y. Pushed them to the remote. Set branch.x.merge to refs/heads/y. Added extra commits on both branches. Did "git push" when on master:

$ git push
...
To d:/temp/origin
   cc1c649..1b2333d  x -> x
   91517ea..f1f97fb  y -> y

So it looks the config entry doesn't affect the push command.

FWIW, there was "remote.origin.fetch = +refs/heads/*:refs/remotes/origin/*" in my config by default.

-------------------------------------
