DESCRIPTION

RepoCommand#readFile: Don't call Git#getRepository() in try-with-resource

Using try-with-resource means that close() will automatically be
called on the Repository object. However, according to the javadoc
of Git#close():

  If the repository was opened by a static factory method in this class,
  then this method calls Repository#close() on the underlying repository
  instance.

This means that Repository#close() is called twice, by Git.close()
and in the outer try-with-resource, leading to a corrupt use count.

Change-Id: I37ba517eb2cc67d1cd36813598772c70208d0bc9
Signed-off-by: Elise Key xxx@xxx.xxx


COMMENTS

author: Elise Key
date: 2017-01-27 07:31:49.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2017-01-27 07:31:55.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/9702/

-------------------------------------
author: Brenden Conley
date: 2017-01-27 07:45:07.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/jgit/job/jgit.gerrit/9702/ : SUCCESS

-------------------------------------
author: Douglas Trujillo
date: 2017-01-28 17:35:16.000000000

Patch Set 1: Code-Review+2

-------------------------------------
author: Gerrit Code Review
date: 2017-01-28 18:07:29.000000000

Change has been successfully merged into the git repository by Douglas Trujillo

-------------------------------------
