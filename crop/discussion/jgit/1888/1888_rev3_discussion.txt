DESCRIPTION

Fixed checkouts when HEAD is ignored

In the case where DirCacheCheckout was used to checkout a tree
without taking HEAD into account (e.g. during a clone or hard reset)
we didn't handle conflicts correctly. E.g. if there are conflicts
(entries with stage != 0) in the index and we tried to hard reset
we have been processing the conflicting pathes multiple times (once
for every stage). With this fix we will update the index with the
entry from the "merge" state (the state we want checkout) when we
detect existing conflicts.

Change-Id: Iffbddccaa588cf0d1460a5e44dabaf540d996e26
Signed-off-by: Zachary Orozco xxx@xxx.xxx


COMMENTS

author: Gerrit Code Review
date: 2010-11-13 00:10:06.000000000

Your change could not be merged due to a path conflict.

Please merge (or rebase) the change locally and upload the resolution for review.

-------------------------------------
author: Malia Sampson
date: 2010-11-13 17:42:23.000000000

Uploaded patch set 3.

-------------------------------------
author: Malia Sampson
date: 2010-11-13 17:42:38.000000000

Patch Set 3: Looks good to me, approved; IP review completed

Looks good, thanks.

-------------------------------------
author: Malia Sampson
date: 2010-11-13 17:42:39.000000000

Change has been successfully merged into the git repository.

-------------------------------------
