DESCRIPTION

Make diff locations more consistent

DiffAlgorithms can return different edit locations for inserts or
deletes, if they can be "shifted" up or down repeating blocks of
lines. This causes the 3-way merge to apply both edits, resulting in
incorrectly removing or duplicating lines.

Augment an existing "tidy-up" stage in DiffAlgorithm to move all
shiftable edits (not just the last INSERT edit) to a consistent
location, and add test cases for previously incorrect merges.

Bug: 514095
Change-Id: I5fe150a2fc04e1cdb012d22609d86df16dfb0b7e
Signed-off-by: Immanuel Dawson xxx@xxx.xxx


COMMENTS

author: Immanuel Dawson
date: 2017-03-25 12:57:09.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2017-03-25 12:57:15.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/10032/

-------------------------------------
author: Brenden Conley
date: 2017-03-25 13:10:39.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/jgit/job/jgit.gerrit/10032/ : SUCCESS

-------------------------------------
author: Immanuel Dawson
date: 2017-03-25 13:14:37.000000000

Patch Set 3:

Thanks Zhen - I've expanded the fix, and added a test case derived from your example.

-------------------------------------
author: Douglas Trujillo
date: 2017-03-26 09:46:13.000000000

Patch Set 3:

(1 comment)

Line:178, org.eclipse.jgit/src/org/eclipse/jgit/diff/Edit.java -> xxx@xxx.xxx tag for new API method

-------------------------------------
author: Immanuel Dawson
date: 2017-03-29 22:41:19.000000000

Patch Set 3:

(1 comment)

(and thanks for re-triggering build.)

Line:178, org.eclipse.jgit/src/org/eclipse/jgit/diff/Edit.java -> Done

-------------------------------------
author: Gerrit Code Review
date: 2017-04-05 02:26:38.000000000

Change has been successfully merged into the git repository by Yoselin Hanna

-------------------------------------
