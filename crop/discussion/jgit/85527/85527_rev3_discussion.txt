DESCRIPTION

Fix content length in HttpClientConnection

Per the interface specification, the getContentLength method should
return -1 if content length is unknown or greater than
Integer.MAX_VALUE.

For chunked transfer encoding, the content length is not included in the
header, hence will cause a NullPointerException when trying to parse the
content length header.

Change-Id: Iaa36b5c146a8d654e364635fa0bd2d14129baf17
Signed-off-by: Paloma Kennedy xxx@xxx.xxx


COMMENTS

author: Paloma Kennedy
date: 2016-11-22 20:10:49.000000000

Uploaded patch set 3: Commit message was updated.

-------------------------------------
author: Brenden Conley
date: 2016-11-22 20:10:56.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/9440/

-------------------------------------
author: Eden Lin
date: 2016-11-22 20:12:32.000000000

Patch Set 3:

(2 comments)

Thanks for clarifying the commit message.

Line:333, org.eclipse.jgit.http.apache/src/org/eclipse/jgit/transport/http/apache/HttpClientConnection.java -> I'm still confused. Why are we parsing as a long and then checking whether it's > Integer.MAX_VALUE instead of parsing as an integer?

Line:336, org.eclipse.jgit.http.apache/src/org/eclipse/jgit/transport/http/apache/HttpClientConnection.java -> What happens if l is negative?

-------------------------------------
author: Brenden Conley
date: 2016-11-22 20:22:57.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/jgit/job/jgit.gerrit/9440/ : SUCCESS

-------------------------------------
author: Gerrit Code Review
date: 2016-11-22 20:35:24.000000000

Change has been successfully merged into the git repository by Eden Lin

-------------------------------------
