DESCRIPTION

DirCacheBuilder: Speed up reading from trees

Recursively copying a tree into a DirCache is a bottleneck for some
algorithms like the in memory merge code in Gerrit Code Review.  Drop
a layer down in the stack and use CanonicalTreeParser directly as the
addition logic only processes 1 tree at a time and does not need the
merge sorting feature (or overhead) of TreeWalk.

Combined with 761814fe9c ("DirCacheEntry: Speed up creation by
avoiding string cast") tree loading 38,900 entries nearly halves
in running time from 70ms to 36ms on some platforms.

Change-Id: If1490ca25de0679a71cf508f59b486f9cc816165


COMMENTS

author: Yoselin Hanna
date: 2015-11-30 23:46:56.000000000

Uploaded patch set 7.

-------------------------------------
author: Brenden Conley
date: 2015-11-30 23:47:03.000000000

Patch Set 7:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/7658/

-------------------------------------
author: Brenden Conley
date: 2015-11-30 23:56:02.000000000

Patch Set 7: Verified+1

Build Successful 

https://hudson.eclipse.org/jgit/job/jgit.gerrit/7658/ : SUCCESS

-------------------------------------
author: Ariel Sawyer
date: 2015-12-01 00:02:13.000000000

Patch Set 7: Code-Review+2

-------------------------------------
author: Gerrit Code Review
date: 2015-12-01 00:03:11.000000000

Change has been successfully merged into the git repository by Ariel Sawyer

-------------------------------------
