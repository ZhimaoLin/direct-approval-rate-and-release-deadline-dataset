DESCRIPTION

ReceivePack: fix ensureProvidedObjectsVisible on thin packs

If ensureProvidedObjectsVisible is enabled we expected any trees or
blobs directly reachable from an advertised reference to be marked
with UNINTERESTING.  Unfortunately ObjectWalk doesn't bother setting
this until the traversal is complete.  Even then it won't necessarily
set it on every tree if the corresponding commit wasn't popped.

When we are going to check the base objects for the received pack,
ensure the UNINTERESTING flag gets carried into every immediately
reachable tree or blob, because these are the ones that the client
might try to use as delta bases in a thin pack.

Change-Id: I5d5fdcf07e25ac9fc360e79a25dff491925e4101
Signed-off-by: Jaycee Hickman xxx@xxx.xxx


COMMENTS

author: Yoselin Hanna
date: 2010-04-17 00:05:00.000000000

Uploaded patch set 4.

-------------------------------------
author: Maddison Bishop
date: 2010-04-17 00:16:04.000000000

Patch Set 4: Looks good to me, but someone else must approve



-------------------------------------
author: Yoselin Hanna
date: 2010-04-19 15:32:45.000000000

Patch Set 4: Looks good to me, approved; IP review completed



-------------------------------------
author: Gerrit Code Review
date: 2010-04-20 01:19:07.000000000

Your change requires a recursive merge to resolve.

Please merge (or rebase) the change locally and upload the resolution for review.

-------------------------------------
author: Yoselin Hanna
date: 2010-04-20 01:23:18.000000000

Change has been successfully merged into the git repository.

-------------------------------------
