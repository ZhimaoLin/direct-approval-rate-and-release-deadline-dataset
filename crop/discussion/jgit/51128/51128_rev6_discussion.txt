DESCRIPTION

RFC: Store push certificates in refs/push-certs

Inspired by a proposal from gitolite[1], where we store a file in
a tree for each ref name, and the contents of the file are all push
certificates affecting that ref.

The main modification from that proposal (other than lacking the
out-of-git batching) is to append xxx@xxx.xxx to filenames, which
allows storing certificates for both refs/foo and refs/foo/bar. Those
refnames cannot coexist at the same time in a repository, but we would
definitely not want to discard push certificates in the same way we
discard reflogs, as we want a verifiable audit log.

The xxx@xxx.xxx syntax is at least somewhat consistent with
gitrevisions(7) xxx@xxx.xxx describe operators on ref names.

[1] https://github.com/sitaramc/gitolite/blob/cf062b8bb6b21a52f7c5002d33fbc950762c1aa7/contrib/hooks/repo-specific/save-push-signatures

Change-Id: Id3eb32416f969fba4b5e4d9c4b47053c564b0ccd


COMMENTS

author: Santos Moore
date: 2015-07-01 16:53:02.000000000

Uploaded patch set 6.

-------------------------------------
author: Brenden Conley
date: 2015-07-01 16:53:09.000000000

Patch Set 6:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/6816/

-------------------------------------
author: Brenden Conley
date: 2015-07-01 17:00:05.000000000

Patch Set 6: Verified+1

Build Successful 

https://hudson.eclipse.org/jgit/job/jgit.gerrit/6816/ : SUCCESS

-------------------------------------
author: Eden Lin
date: 2015-07-01 18:46:52.000000000

Patch Set 6:

(1 comment)

Line:266, org.eclipse.jgit/src/org/eclipse/jgit/transport/PushCertificateStore.java -> leaked?

-------------------------------------
