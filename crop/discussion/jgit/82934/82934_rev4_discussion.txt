DESCRIPTION

Unconditionally close repositories in RepositoryCache.clear()

Earlier we tried to close the repository before removing it from the
cache, so close only reduced refcount but didn't close it.

Now that we no longer leak usage count on purpose and the usage count is
now ignored anyway, there is no longer a need to run the removal twice.

Change-Id: I8b62cec6d8a3e88c096d1f37a1f7f5a5066c90a0
Signed-off-by: Douglas Trujillo xxx@xxx.xxx

COMMENTS

author: Douglas Trujillo
date: 2016-10-12 11:48:51.000000000

Uploaded patch set 4: Patch Set 3 was rebased.

-------------------------------------
author: Brenden Conley
date: 2016-10-12 11:48:58.000000000

Patch Set 4:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/9238/

-------------------------------------
author: Brenden Conley
date: 2016-10-12 12:05:53.000000000

Patch Set 4: Verified+1

Build Successful 

https://hudson.eclipse.org/jgit/job/jgit.gerrit/9238/ : SUCCESS

-------------------------------------
author: Mitchell Griffith
date: 2016-10-12 12:22:46.000000000

Patch Set 4:

(1 comment)

Line:332, org.eclipse.jgit/src/org/eclipse/jgit/lib/RepositoryCache.java -> Squash into one line?

unregisterAndCloseRepository(i.next().getKey(), null)

-------------------------------------
author: Douglas Trujillo
date: 2016-10-13 21:39:51.000000000

Patch Set 4:

(1 comment)

Line:332, org.eclipse.jgit/src/org/eclipse/jgit/lib/RepositoryCache.java -> Done

-------------------------------------
author: Gerrit Code Review
date: 2016-10-13 22:01:11.000000000

Change has been successfully merged into the git repository by Douglas Trujillo

-------------------------------------
