DESCRIPTION

Applies "sparse-checkout" rules on a checkout.

This change is for people who have already configured a sparse-checkout
file and want the rules to be managed in the index on checkout.

.api_filters
-Entry added due to API changes in the ConfigConstants.java.

BaseRepositoryBuilder.java
-loads the sparse checkout file.

ConfigConstants.java
-Added 'CONFIG_KEY_SPARSECHECKOUT' for the repository config.

DirCacheCheckout.java
-On checkout loads the sparse-checkout rules into memory if config is
set.
-On checkout the 'keep' and 'update' methods will mark the entry as
skipped.
-Method added to process spare-checkout rules in order of precedence.

DirCacheEntry.java
-Removed 'final' from 'info' to allow the byte array to be extended.
-Added a method for setting the 'skip-worktree' flag.
-Added a method to set the 'extended' flag.
-Added a method to set the extended flags on an entry.
-Added a method to extend a Version 2 entry to a Version 3 entry size.

FileRepository.java
-Set the 'core' config for 'sparsecheckout' on the shared config.

IndexDiff.java
-Created a method to get all skipped entries from the DirCache (Index)

Repository.java
-Loads the SparseCheckout file onto the loaded repository.

JGitText.java
-Added message constant.

JGitText.java
-Externalised an error message for Localisation.

Constants.java
-Added a file path for spare-checkout file.

Unit Tests Included.

Bug: 383772
Change-Id: I5ec95c3c20c34caa2fc8b04742843392841fd6d5
Signed-off-by: Iyana Mcgrath xxx@xxx.xxx

COMMENTS

author: Iyana Mcgrath
date: 2017-11-24 08:48:06.000000000

Uploaded patch set 7.

-------------------------------------
author: Brenden Conley
date: 2017-11-24 08:48:13.000000000

Patch Set 7:

Build Started https://ci.eclipse.org/jgit/job/jgit.gerrit/11669/

-------------------------------------
author: Brenden Conley
date: 2017-11-24 08:58:31.000000000

Patch Set 7: Verified+1

Build Successful 

https://ci.eclipse.org/jgit/job/jgit.gerrit/11669/ : SUCCESS

-------------------------------------
author: Iyana Mcgrath
date: 2017-11-24 13:17:29.000000000

Patch Set 7:

I have rebased this. Should be ok to review now.

-------------------------------------
author: Iyana Mcgrath
date: 2017-11-28 08:51:07.000000000

Patch Set 7:

Any feedback on this please? Thanks.

-------------------------------------
author: Zachary Orozco
date: 2017-11-28 09:55:10.000000000

Patch Set 7:

I am also looking into this. I know DirCacheCheckout quite well and check you cover all the relevant topics.  I started yesterday looking at 110172 and I am inspecting especially performance aspects. You added id computations in WorkingTreeIterator.isModified() which could cause performance decreases. I am still working on that.

-------------------------------------
