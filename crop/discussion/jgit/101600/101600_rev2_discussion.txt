DESCRIPTION

dfs: Fix DataFormatException: 0 bytes to inflate

When a file uses a different block size (e.g.  500) than the cache
(e.g.  512), and the DfsPackFile's blockSize field has not been
initialized, the cache misaligns block loads.  The cache uses its
default of 512 to compute the block alignment instead of the file's
500.

This causes DfsReader try to set an empty range into an Inflater,
resulting in an object being unable to load.

Change-Id: I7d6352708225f62ef2f216d1ddcbaa64be113df6


COMMENTS

author: Yoselin Hanna
date: 2017-07-19 21:29:32.000000000

Uploaded patch set 2.

-------------------------------------
author: Brenden Conley
date: 2017-07-19 21:29:38.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/jgit/job/jgit.gerrit/10584/

-------------------------------------
author: Eden Lin
date: 2017-07-19 21:37:28.000000000

Patch Set 2: Code-Review+2

Subtle. Thanks for finding it.

-------------------------------------
author: Yoselin Hanna
date: 2017-07-19 21:44:51.000000000

Patch Set 2: Verified+1

-------------------------------------
author: Yoselin Hanna
date: 2017-07-19 21:44:59.000000000

Change has been successfully merged by Yoselin Hanna

-------------------------------------
