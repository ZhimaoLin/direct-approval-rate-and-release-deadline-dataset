DESCRIPTION

Garbage collector for FileRepositories

Implements a garbage collector for FileRepositories. Main ideas are
copied from the garbage collector for DFS based repos
(DfsGarbageCollector). Added functionalities are 
- pruning loose objects
- handling of the index

TODO: we are still missing reflog handling, packing of refs, good
progress monitoring, support for pack.packSizeLimit, unpacking packed
objects into loose objects (to support that pruning packed objects
doesn't delete them until they are older than two weeks)

Change-Id: I14ea5cb7e0fd1b5c50b994fd77f4e05bfbb9d911
Signed-off-by: Zachary Orozco xxx@xxx.xxx


COMMENTS

author: Zachary Orozco
date: 2012-01-30 16:42:43.000000000

Uploaded patch set 6.

-------------------------------------
author: Dillon Cross
date: 2012-01-31 08:30:32.000000000

Patch Set 6: I would prefer that you didn't submit this

(2 inline comments)



Line:246, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Use Collections.emptySet() as a typesafe replacement for Collections.EMTPY_SET. Then you don't need to cast.

Line:248, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Also replace with the Collections.emptySet()

-------------------------------------
author: Dillon Cross
date: 2012-01-31 09:50:33.000000000

Patch Set 6: (4 inline comments)



Line:146, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Shouldn't this method be private?

Line:190, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Shouldn't this method be private?

Line:339, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Shouldn't this method be private?

Line:347, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Shouldn't this method be private?

-------------------------------------
author: Zachary Orozco
date: 2012-01-31 16:21:28.000000000

Patch Set 6: (3 inline comments)



Line:146, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Since I want to expose multiple methods (prune, repack, packRefs) from this class and since this class does not have complicated state I will offer these methods as public static methods.

Line:246, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Done

Line:248, org.eclipse.jgit/src/org/eclipse/jgit/storage/file/GC.java -> Done

-------------------------------------
author: Gerrit Code Review
date: 2012-07-29 13:39:12.000000000

Your change could not be merged due to a path conflict.

Please merge (or rebase) the change locally and upload the resolution for review.

-------------------------------------
