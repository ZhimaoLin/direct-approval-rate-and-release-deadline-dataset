DESCRIPTION

Changed TreeWalk.forPath(...) to work with recursive paths.

Previously, this method would not (always) work when a recursive path
such as "a/b" was passed into it.

Change-Id: I0752a1f5fc7fef32064d8f921b33187c0bdc7227
Signed-off-by: Malia Sampson xxx@xxx.xxx


COMMENTS

author: Khalil Bernard
date: 2011-02-15 21:03:39.000000000

Uploaded patch set 5.

-------------------------------------
author: Yoselin Hanna
date: 2011-02-17 19:15:35.000000000

Patch Set 5: I would prefer that you didn't submit this

(5 inline comments)



Line:79, org.eclipse.jgit.test/tst/org/eclipse/jgit/treewalk/ForPathTest.java -> DirCache.newInCore() might be better here.

Line:115, org.eclipse.jgit.test/tst/org/eclipse/jgit/treewalk/ForPathTest.java -> Nice test cases, thanks for doing these.

Line:122, org.eclipse.jgit/src/org/eclipse/jgit/treewalk/TreeWalk.java -> Why not a while loop with a condition?

  while (tw.next()) {
    if (f.isDone(tw))
      return tw;
    if (tw.isSubtree())
      tw.enterSubtree();
  }
  return null;

Line:124, org.eclipse.jgit/src/org/eclipse/jgit/treewalk/filter/PathFilter.java -> I would say:

  @return xxx@xxx.xxx true} if the path length of this filter
    matches the length of the current path of the supplied
    TreeWalk.

Line:127, org.eclipse.jgit/src/org/eclipse/jgit/treewalk/filter/PathFilter.java -> I would rather not generate a copy of the path right here just to test the length of it. We should expose a method on the TreeWalk that exports the path length.

-------------------------------------
author: Khalil Bernard
date: 2011-02-17 19:50:03.000000000

Patch Set 5: (4 inline comments)



Line:79, org.eclipse.jgit.test/tst/org/eclipse/jgit/treewalk/ForPathTest.java -> Done

Line:122, org.eclipse.jgit/src/org/eclipse/jgit/treewalk/TreeWalk.java -> Done

bleh, you're right.  Didn't think about this too much when I wrote it...

Line:124, org.eclipse.jgit/src/org/eclipse/jgit/treewalk/filter/PathFilter.java -> Done

Line:127, org.eclipse.jgit/src/org/eclipse/jgit/treewalk/filter/PathFilter.java -> Done

Thanks for pointing that out, I didn't realize that was happening.

-------------------------------------
