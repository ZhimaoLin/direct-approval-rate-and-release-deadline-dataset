DESCRIPTION

JCBC-671: Ignore bad responses after retry handling.

Motivation
----------
When the view retry handler kicks in, it retries the view operation, but
the retryWhen handler emits all the "bad" responses as well. The code
afterwards instead only expects one good result to be emitted.

Modifications
-------------
The code now only returns the last() result, which is the good one, after
retrying succeeded. In addition, the code properly frees the info bytebufs,
since they are not accessed anymore when retried.

Result
------
Correct retry handling so that ever only one result is emitted.

Change-Id: I00cf65f49151e91b3db18122a59f399f0bd2fdf9
Reviewed-on: http://review.couchbase.org/44896
Tested-by: Natasha Sullivan xxx@xxx.xxx
Reviewed-by: Estrella Humphrey xxx@xxx.xxx
Reviewed-on: http://review.couchbase.org/44920
Reviewed-by: Natasha Sullivan xxx@xxx.xxx
Tested-by: Estrella Humphrey xxx@xxx.xxx


COMMENTS

author: Estrella Humphrey
date: 2015-01-05 19:34:37.063000000

Change has been successfully cherry-picked as 5912f7d91d611f7e7859cbac200f983f812c512a

-------------------------------------
