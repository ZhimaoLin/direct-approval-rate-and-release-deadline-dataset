DESCRIPTION

TMF: Add a method to compress an event whose data is not needed anymore

Some analysis (like the trace synchronization) require to keep events until
they can be matched with another one, but the event's data takes too much
memory. The event can be compressed to save some space.

Change-Id: I2b328487622fb6d48e8e67344d6572aa504b18e4
Signed-off-by: Aryana Jones xxx@xxx.xxx


COMMENTS

author: Annalise Jimenez
date: 2014-05-07 15:44:55.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2014-05-07 15:45:01.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6898/

-------------------------------------
author: Annalise Jimenez
date: 2014-05-07 15:47:05.000000000

Patch Set 1:

This is a proposition, but it solves a very actual problem when synchronizing traces with a lot of events (virtual machine migration can be as long as 45 seconds, all traced and we always got a GC overhead limit exception)

-------------------------------------
author: Ivy Mitchell
date: 2014-05-07 15:58:20.000000000

Patch Set 1:

This looks cool, but can affect performance in a not so good way. How many events are being stored? Why not just delete the whole event instead of having these mutant zombie events walking around?

-------------------------------------
author: Annalise Jimenez
date: 2014-05-07 16:00:41.000000000

Patch Set 1:

I wonder... really... for sync, once we saved the required fields to match the event, all we need from the event is the timestamp, so I may as well keep only the timestamp...

I'll try that track instead then

-------------------------------------
author: Brenden Conley
date: 2014-05-07 16:56:09.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6898/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2014-05-07 18:50:41.000000000

Patch Set 1:

Actually no, the event matching is part of the ... *event* matching API. And while synchronization is one use case that uses this API and does not need the content of the event once we have a key, we cannot presume it will always be the case (Francis's execution graph uses the event matching and I *think* he needs the event once the match is done). So the match should stay between 2 events, that may want to take a bit less space (virtualVM says a lot less space actually).

-------------------------------------
author: Annalise Jimenez
date: 2014-05-07 18:52:22.000000000

Patch Set 1:

And it does not affect performance if you do not compress the event. 

It won't solve the more long term problem of synchronization scalability, but a master student may ;-)

-------------------------------------
author: Ivy Mitchell
date: 2014-05-08 15:02:08.000000000

Patch Set 1: Code-Review-1

I'm sorry, this api change is dependent on implementation, I think we need to rethink it.

-------------------------------------
author: Annalise Jimenez
date: 2014-05-08 15:08:25.000000000

Patch Set 1: Code-Review-2

I'll keep this patch around for students who need it for quick prototyping with synchronization, but that's not a viable solution for TMF.

-------------------------------------
author: Braxton Mccarthy
date: 2014-05-08 18:54:45.000000000

Patch Set 1:

Mind if we abadon it then? It will remain available, as long as you keep the URL somewhere ;)

-------------------------------------
author: Annalise Jimenez
date: 2014-05-14 15:36:06.000000000

Abandoned

In our experimental branch at luna-dorsal, for those interested

-------------------------------------
