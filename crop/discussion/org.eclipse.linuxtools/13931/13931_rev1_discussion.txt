DESCRIPTION

Bug 408373 : [TMF] Lost events should be aggregated in the Events table

Change-Id: I0a7905cfa9145a9f60438c3dee92106201b90042
Signed-off-by: Kelsie Blackwell xxx@xxx.xxx


COMMENTS

author: Brenden Conley
date: 2013-06-19 20:17:40.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2728/ 

-------------------------------------
author: Brenden Conley
date: 2013-06-19 20:35:20.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2728/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2013-06-20 13:18:41.000000000

Patch Set 1:

I confirm the bug when it takes forever seeking lost events is solved.  Selecting time in a trace with >90% lost events now is as fast as for any other trace.

But in the statistics view, the number of lost events is now just 1 and the total number of events counts only 1 event.  I think this gives an inaccurate view of the trace since it gives the impression there is only 1 lost event, which is not so bad, while actually almost all events are lost, which means any analysis on the trace is pretty useless.

-------------------------------------
author: Ivy Mitchell
date: 2013-06-20 13:41:26.000000000

Patch Set 1:

@ genevieve, that's why I'm not a 100% for this patch. I know I'm alone in my camp though. ;)

-------------------------------------
author: Annalise Jimenez
date: 2013-06-20 13:43:38.000000000

Patch Set 1:

Can't we have the best of both worlds, without too much hack?
Because the specific trace I'm talking about is just not workable as it is.

-------------------------------------
author: Luciana Barry
date: 2013-06-20 13:53:29.000000000

Patch Set 1: (3 inline comments)

Once suggestion that was made was to create an interface like ITmfAggregatedEvent.getEventCount() which the CtfTmfEventFactory and the statistics model would be updated to handle correctly.

Line:298, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/StreamInputPacketReader.java -> remove commented out code

Line:299, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/StreamInputPacketReader.java -> is there a string constant that could be used instead?

Line:108, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/EventDeclaration.java -> create a string constant for the field name

-------------------------------------
author: Braxton Mccarthy
date: 2013-06-20 15:28:35.000000000

Patch Set 1:

@Genevi√®ve:

Indeed, all views that want to display the lost events in a "special" way will have to be updated.

So far I'm thinking only of the histogram (don't show them at all, or show them in a different color) and the statistics view (print the actual number of lost events, not just "1"). The event list is already fine.

-------------------------------------
