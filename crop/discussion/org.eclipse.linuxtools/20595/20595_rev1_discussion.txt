DESCRIPTION

TMF: Add XML state provider schema definition and test file

This patch adds to the XSD the schema definition for a full XML-defined state
provider. The valid test file is also augmented to use that definition.

Change-Id: Ib75082f04fae69f62f6c7990ee8c92ea4cc042e5
Signed-off-by: Aryana Jones xxx@xxx.xxx
Signed-off-by: Ayanna Reed xxx@xxx.xxx


COMMENTS

author: Annalise Jimenez
date: 2014-01-14 03:41:54.000000000

Patch Set 1: Code-Review-1

(4 comments)

I think a few elements of that XSD have too generic names and should be changed.

Also, you write your element names with *almost* always the same convention.

I won't change it just yet though, I'll wait for further comments on this patch.

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> attribute is too generic. There's so many attributes in XML...
Florian any interesting prefix to add to attribute?

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> value is a bit too generic. Would fieldValue make sense here?

Line:170, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> Do we apply the naming scheme (word starting with capital letter except first one) even for attributes?

Line:203, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> To be consistent with the naming scheme, should be eventField

-------------------------------------
author: Brenden Conley
date: 2014-01-14 03:44:17.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5024/

-------------------------------------
author: Brenden Conley
date: 2014-01-14 04:32:57.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5024/ : SUCCESS

-------------------------------------
author: Ayanna Reed
date: 2014-01-14 14:10:48.000000000

Patch Set 1:

(3 comments)

Alex have you a idea for the attribute name ?

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> I'm agree. But it's the name use everywhere in the TMF source code. Just open tmf.core.statesystem.StateSystem.java. We have already use this word in publication. 

However, we can use somethings like : folder, subfolder, directory, subdirectory...

Alex any idea ?

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> In fact, fieldValue is not correct because only few value are event field. Many a constant like PROCESS_RUN_USERMODE...
And we can also have a value that is a the result of a query in the state system.

Line:170, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> yes -> eventField

-------------------------------------
author: Annalise Jimenez
date: 2014-01-14 14:43:30.000000000

Patch Set 1:

(2 comments)

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> ssAttribute?

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> ok well maybe we can keep value as is then if we don't find any more interesting name to it. At least it doesn't clash with XML nomenclature.

-------------------------------------
author: Annalise Jimenez
date: 2014-01-14 16:20:32.000000000

Patch Set 1:

I added Simon to this patchset. 

Simon, you have defined and XML state system for GDB UST traces and I'd like to know your opinion on the ease of use of the XML schema, if any term was (too) confusing, if you have any idea to improve the useability of this schema or if it is perfect as it is. Thanks.

-------------------------------------
author: Braxton Mccarthy
date: 2014-01-14 19:31:53.000000000

Patch Set 1:

(3 comments)

small questions, see comments

Line:96, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> what's the difference between stateChange and stateAssignation?

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> ssAtribute, or stateAttribute, both sound fine.

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> what's the difference between this and stateValue that is defined earlier?

-------------------------------------
author: Ayanna Reed
date: 2014-01-14 19:47:11.000000000

Patch Set 1:

(3 comments)

Some answers

Line:96, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> This part is never use and can be remove. Sorry for this.

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> The question is which term is better for a user that don't know the state system structure (attribute tree). I think it's easy to explain the data structure as a file system and not as a complex tree. 
I think that a XML end user must just know that you have variable define by a path. You can assign a (state) value for an interval. And you can have condition to make or not this assignation.

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> The state value is just a map between a string and a integer (or String). We use it in the XML to define RUN_USERMODE as 1 (int).

value is the second part of a assignation or a condition, ie :
<attribute list = path> = <value>
or <attribute list = path> == <value>

-------------------------------------
author: Braxton Mccarthy
date: 2014-01-16 21:22:39.000000000

Patch Set 1:

(2 comments)

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> You use state* in other places, so "stateAttribute" should be good. Meaning "an attribute that can have a state".

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> Hmm ok, then since it is closer to the StateValue.java, shouldn't this one be called stateValue? And the other above could be called knownValue or definedValue. Or definedStateValue, etc. What do you think?

-------------------------------------
author: Ayanna Reed
date: 2014-01-16 22:09:46.000000000

Patch Set 1:

(2 comments)

Line:145, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> Ok for stateAttribute

Line:163, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> Ok for value -> stateValue (to be consistant with attribute -> stateAttribute)
And stateValue -> definedValue or juste state maybe ?

-------------------------------------
author: Annalise Jimenez
date: 2014-01-17 19:06:35.000000000

Patch Set 1:

(1 comment)

Line:89, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/tmf/analysis/xml/core/module/xmldefinition.xsd -> stateAssignation is used here. so it cannot be removed as Florian mentioned. Or should this be stateChange as well? Or is a stateAssignation a stateChange without a condition, therefore we need to keep it?

-------------------------------------
