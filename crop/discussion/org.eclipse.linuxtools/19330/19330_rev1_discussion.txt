DESCRIPTION

tmf : critical performance update to cache the history tree

Before each application create more than 10,000 objects to use only one. With this cache we save this work.

Change-Id: I9845bd457ff7e7bcbd59f7ab24914b0c2bd02553
Signed-off-by: Ayanna Reed xxx@xxx.xxx


COMMENTS

author: Ayanna Reed
date: 2013-12-04 20:41:23.000000000

Patch Set 1:

(1 comment)

Line:104, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HT_IO.java -> add the param for t

-------------------------------------
author: Ayanna Reed
date: 2013-12-04 20:49:06.000000000

Patch Set 2: Commit message was updated

-------------------------------------
author: Jordon Obrien
date: 2013-12-04 20:49:58.000000000

Patch Set 1:

(3 comments)

Take care of the "nits". The role of a contributors is to check as much a possible those nits before sending to reviewer and ask them to spend time.

Please provide improvement in the commit log. This will avoid the reviewer come to you and ask the question. Provide as much as possible information to minimize the back-and-forth.

Why do you use a "list"? Won't be faster/cheaper to use a direct cache? And hashing the sequence number?

You can avoid sequential traversing of the arraylist?
  for (HTNode node : tree.getCacheBranch())

Line:122, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HT_IO.java -> missing space after if

Line:123, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HT_IO.java -> missing space after ","

Line:518, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HistoryTree.java -> missing space after ","

-------------------------------------
author: Annalise Jimenez
date: 2013-12-04 20:51:00.000000000

Patch Set 1:

(4 comments)

Good work! It's a great improvement to have a cache for nodes.

Some questions for you and nits, I'll test it live tomorrow morning :)

Line:9, /COMMIT_MSG -> Wrap commit message at 80 characters

Line:123, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HT_IO.java -> Here do you really want to replace the node that was at this position?  You could use insert instead.

Is your cache branch ever refreshed?  Does it have a maximum number of entries?  The cache could be a Fifo where you always add nodes at the end and remove from the front when full.  But then they wouldn't be sorted by their time...

Line:74, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HistoryTree.java -> "Cache" to keep the latest nodes in memory to increase performance at query time
(or something like that)

Line:518, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HistoryTree.java -> Add space before t

-------------------------------------
author: Brenden Conley
date: 2013-12-04 21:59:01.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4406/

-------------------------------------
author: Brenden Conley
date: 2013-12-04 22:20:20.000000000

Patch Set 1: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4406/ : FAILURE

-------------------------------------
