DESCRIPTION

TMF: XML Explorer

- Integration of the XMl editors and tools
- Addition of the ability to create and edit an XML file
- Addition of the xml schema definition to the XSD catalog
- Addition of the XML explorer view

Change-Id: Ic312719bd93549d21caa61113a759cbd681ee6aa
Signed-off-by: Branden Mercer xxx@xxx.xxx


COMMENTS

author: Branden Mercer
date: 2014-04-04 15:15:45.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2014-04-04 15:15:51.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6235/

-------------------------------------
author: Brenden Conley
date: 2014-04-04 15:49:57.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6235/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2014-04-07 16:48:15.000000000

Patch Set 3: Code-Review-1

(18 comments)

Some refinement required with the delete actions, but it's getting there. Add and edit works well.

Also, I do not like where our xsd appears in the catalog, or its name. I don't know if it's possible to add it at the beginning of the list? And I guess we'll have to rename it because xmlDefinition.xsdl doesn't relate to TMF directly...

Also, after selecting the right entry in the catalog, I see in ref "More than one schema has been specified without a namespace name". Our XSD is probably not totally right. Can you check how to solve this message? And modify our XSD accordingly if required.

Line:152, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/ui/Activator.java -> Remove a line here

Line:172, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/ui/Activator.java -> Remove the blank line before this line

Line:183, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/ui/Activator.java -> Remove blank line before this line

Line:20, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/META-INF/MANIFEST.MF -> You need to add org.eclipse.linuxtools.tmf.analysis.xml.ui.views.xmlExplorer to the export-package

Line:90, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/plugin.xml -> Since this is a core extension point, you can add this extension in the xml.core plugin. This way, you can refer to a resource that is part of the same plugin, so no need for the ../ that may not have a consistent behavior.

Line:57, lttng/org.eclipse.linuxtools.tmf.ui/META-INF/MANIFEST.MF -> Remove this

Line:78, lttng/org.eclipse.linuxtools.tmf.ui/META-INF/MANIFEST.MF -> Remove this

Line:63, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> As Marc-AndrÃ© said, in plugin.xml, the ID is org.eclipse.linuxtools.tmf.analysis.xml.ui.views.xmlExplorer.XMLExplorerView

They have to match.

Line:99, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> Not is not the javadoc for this field

Line:106, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> can be final

Line:111, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> can be final

Line:117, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> Send the ID instead, that will remove the need for this field.

Line:129, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> You initialize them here and set them to null at the end. Use local variables instead.

Line:131, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> fXmlFilesPath is already a Path. You could do if (!fXmlFilesPath instanceof Path) throw IllegalStateException()

And cast it.

Line:264, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> These messages will be shown to the user, they should be externalized (remove the NON_NLS-i$, then click on the warning and selec the Open Externalize string wizard, it will do it for you.

Also, the message should be less generic: "Delete XML file", "Do you really want to delete the selected XML file" or better yet NLS.bind("Do you really want to delete file {0}", fileName) where fileName is the name of the file to delete.

Line:282, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> I clicked to delete the xml_files_dir parent directory with 2 xml files in it, and it deleted it all! I don't think we want to delete a directory that contains files. Or if we do, the confirmation message should explicitly mention directory. 

Maybe above, in the run method, do some more processing of the selected item before showing a message that depends on the selection.

Line:290, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> That if is already covered by the first one, so remove

Line:293, lttng/org.eclipse.linuxtools.tmf.analysis.xml.ui/src/org/eclipse/linuxtools/tmf/analysis/xml/ui/views/xmlExplorer/XMLExplorerView.java -> Also, once files are deleted, the list of XML analysis should be updated as well by calling XmlAnalysisModuleSource.notifyModuleChange();

-------------------------------------
author: Ivy Mitchell
date: 2014-04-08 15:49:11.000000000

Patch Set 3: Code-Review-1

in eclipse kepler, the target definition does not work and I had to install wst by hand. please fix this for the next patch. I am looking forward to trying out the patch

-------------------------------------
