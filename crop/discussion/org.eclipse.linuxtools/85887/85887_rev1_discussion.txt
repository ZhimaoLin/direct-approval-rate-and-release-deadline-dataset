DESCRIPTION

Bug 508282 - Unable to list image tags on DockerHub

Refactored the code in the AbstractRegistry class to move the logic of
retrieving the tags by type of registry in private methods, and implemented
the workflow to retrieve a Bearer token if needed when querying on DockerHub.

Also, providing the resulting list of tags in a sorted, reverse order.

Added a few tests to verify the parsing of the 'Www-Authenticate' response header,
and refactored some loops to use the Stream API.

Change-Id: I60d7d71188e2e6e3d19a32e6fb1e53cb11605bf8
Signed-off-by: Zechariah Krause xxx@xxx.xxx


COMMENTS

author: Zechariah Krause
date: 2016-11-28 17:05:11.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2016-11-28 17:05:18.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11352/

-------------------------------------
author: Brenden Conley
date: 2016-11-28 17:30:10.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11352/ : SUCCESS

-------------------------------------
author: Kaylin Maxwell
date: 2016-11-28 23:00:37.000000000

Patch Set 1: Code-Review-1

(4 comments)

I am getting a stall occurring when I try to search for php with my Chasity Mcneil dockerhub account.  I tried specifying php from main wizard and had to cancel.  I then tried specifying nothing and hitting search.  Then I entered php.  I got a hang and then hit the stop button for the search.  After that, I cannot close the search window or cancel the search window.  Any ideas?

Line:44, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/internal/docker/core/OAuth2Utils.java -> nls...same with other strings in this file.

Line:33, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/internal/docker/core/RepositoryTagV2.java -> nls

Line:45, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/internal/docker/core/RepositoryTagV2.java -> no longer nls.

Line:239, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/docker/core/AbstractRegistry.java -> nls

-------------------------------------
author: Kaylin Maxwell
date: 2016-11-28 23:23:18.000000000

Patch Set 1: -Code-Review

The second search finally came back.  When I try next on the php repo which has the largest number of stars, it shows no tags found.  However, Finish works and it shows php:latest and this successfully downloads.

-------------------------------------
author: Zechariah Krause
date: 2016-11-29 08:37:20.000000000

Patch Set 1:

Arianna Johns, I restored the call to the 'async' method with a timeout of 5s on the subsequent 'get()' to avoid blocking the UI for too long. Also, I fixed the missing NLS markers. Lastly, I resolved the case of the official images, such as PHP which needed a special treatment. Finally, I added a test to verify that tags for both "jboss/wildfly" and "php" can be retrieved.

-------------------------------------
author: Gerrit Code Review
date: 2016-11-29 21:17:57.000000000

Change has been successfully cherry-picked as 1f01289c7cbcf30ef593a0ad06448ed3c4e984ac by Kaylin Maxwell

-------------------------------------
