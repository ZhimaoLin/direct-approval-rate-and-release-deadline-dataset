DESCRIPTION

Bug 496922 - Improvements on the 'push image' dialog

Refactored the ImagePushPage to use JFace databinding
Replaced button with link to open Registry account prefs
Added options to tag with 'force' flag and to keep the
tagged image upon completion.

Refactored ImagePushPage and ImagePullPage to use the same
base WizardPage to share the UI part that provides the
registry selection and addition.

Added SWTBot tests, refactored RegistryAccountManager by
introducing a RegistryAccountStorageManager that can be
replaced during tests.

Changed the validation in the RegistryDialog to allow
for null username/password since this should not be
a requirement for pulling images (eg: DockerHub or
other public registries)

Checks the name of the image before tagging.
Checks if the selected registry provides auth before pushing.
Display push progress handlers in the Progress view only.

Change-Id: I682b2cdace11c7124be691186ed31ea41741e2ba
Signed-off-by: Zechariah Krause xxx@xxx.xxx


COMMENTS

author: Zechariah Krause
date: 2016-07-07 14:39:19.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2016-07-07 14:39:25.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11006/

-------------------------------------
author: Brenden Conley
date: 2016-07-07 14:57:47.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11006/ : SUCCESS

-------------------------------------
author: Kaylin Maxwell
date: 2016-07-07 23:34:08.000000000

Patch Set 3: Code-Review-1

(11 comments)

Worked for me this time, but I have some comments.

Line:21, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/docker/core/IRegistry.java -> Not sure if this breaks API.  Better to keep it somewhere else.

Line:33, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/docker/core/IRegistry.java -> This breaks public API.

Line:51, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/ImagePullPushPage.java -> Why are using V1?  I was successfully using index.docker.io which was AbstractRegistry.DOCKER_HUB

Does this work for V2 repos?

Line:85, containers/org.eclipse.linuxtools.docker.ui/plugin.properties -> should that be ...?

Line:33, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/docker/core/IDockerImage.java -> Again, you can't do this for 5.1.0.  This breaks public API.

Line:85, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/WizardMessages.properties -> This should be Add account or Add registry account or Add account / registry or just Add...

Line:88, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/WizardMessages.properties -> Not sure I like this.  I prefer the old Account / Server or even Account / Registry.  Chasity xxx@xxx.xxx is not a Target registry.

Line:25, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/ImagePullPushPageModel.java -> These strings should have non-NLS markers.

Line:52, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/docker/core/AbstractRegistry.java -> Why did you change this?

Line:29, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/ImagePushPageModel.java -> Need non-nls markers for strings.

Line:274, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/docker/core/IDockerConnection.java -> Unfortunately, you can't add this for 5.1.0 as this breaks API.  You can add it to the internal DockerConnection or even add an IDockerConnection2 interface.

-------------------------------------
author: Gerrit Code Review
date: 2016-08-13 00:43:51.000000000

Change has been successfully cherry-picked as e4b973120d7b935bf3a579119a1047c0f7fca0ed by Kaylin Maxwell

-------------------------------------
