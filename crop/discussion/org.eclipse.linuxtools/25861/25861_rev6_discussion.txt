DESCRIPTION

ctf: accelerate n-grams for ctf scopes

CTF based Lttng traces have 30-40% of their requests directed to the
same fields, this makes looking up these field _names_ faster.

Change-Id: I3cf32b10d22de04a1bd94ecadde37afa8e50b0a1
Signed-off-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2014-06-19 20:10:44.000000000

Uploaded patch set 6.

-------------------------------------
author: Brenden Conley
date: 2014-06-19 20:29:50.000000000

Patch Set 6:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7470/

-------------------------------------
author: Brenden Conley
date: 2014-06-19 20:30:01.000000000

Patch Set 6: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7470/ : FAILURE

-------------------------------------
author: Braxton Mccarthy
date: 2014-06-19 20:54:27.000000000

Patch Set 6: Code-Review-1

(8 comments)

There's also 7 new "null type safety" warnings introduced, those should be fixed.

Line:9, /COMMIT_MSG -> CTF-based LTTng

Line:100, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDefinition.java -> move this line to an else {} clause after the if

Line:101, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDefinition.java -> fieldNames cannot be null here (ImmutableList.copyOf) Do you mean isEmpty()?

Line:200, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDeclaration.java -> the insertions in addField() are not checked, so nothing guarantees it cannot be null here.

It should be a null check, with at least a throw IllegalStateException() or something. But you can't really SupressWarning here, it's a valid one.

Line:66, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ScopedDefinition.java -> only 1 empty line

Line:57, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/scope/RootScope.java -> but this adds up to 101%!

Line:114, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StringDeclaration.java -> y

Line:96, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/EventDeclaration.java -> null warnings, createDefinition() takes xxx@xxx.xxx parameter here, but fStream.getTrace() is not annotated.

You should extract getTrace() to a local variable, and do a null check on it. Yes, this will give resources warnings... but we know now that CTFTrace can be not AutoCloseable anymore (we just haven't removed it yet because API).

-------------------------------------
author: Brenden Conley
date: 2014-06-20 16:29:14.000000000

Patch Set 6: -Verified

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7484/

-------------------------------------
author: Brenden Conley
date: 2014-06-20 17:21:20.000000000

Patch Set 6: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7484/ : SUCCESS

-------------------------------------
