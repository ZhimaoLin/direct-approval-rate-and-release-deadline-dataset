DESCRIPTION

tmf: Coalescing for analysis framework

When opening a trace all relevant background requests (indexing,
histogram, Kernel State system Analysis etc) are coalesced so
that the trace is read only once. To make it work the method
notifyPendingRequest() of the TmfEventProvider was used (amongst some
rearrangements). This method allows to synchronize requests across
threads. This is on top of the synchronization using TMF signals.

However, due to the fact that the HistoryBuilder.buildManually() waits
for the state system request to complete, the place to use
notifyPendingRequests(false) to decrement the internal pending counter
is not obvious.

This patch is also to demonstrate that coalescing of requests is
possible with the current means provided by TMF.
The "Fun-bus-coalescing" hasn't been designed and there will be a
several challenges to make it work (e.g. multi-thread handling). Also
we don't know what the gain is. We should try to use what is already
there.

Change-Id: Ib5e156df9bca416e9546b16c5c9e06efe768372f
Signed-off-by: Ricky Reeves <Meredith xxx@xxx.xxx


COMMENTS

author: Ricky Reeves
date: 2013-12-04 15:56:32.000000000

Uploaded patch set 6.

-------------------------------------
author: Ricky Reeves
date: 2013-12-04 16:00:43.000000000

Patch Set 6:

Before bashing (ugly) implementation details of passing an array of boolean with length 0 to return a flag, please look at what I want to solve. I'd like to agree on whether we want to use this concept from TmfEventProvider.notifyPendingRequest() to achieve coalescing (at least till we have any other solution implemented). Keep in mind with statistics as analysis module 2 more requests need to be coalesced.

-------------------------------------
author: Brenden Conley
date: 2013-12-04 17:13:07.000000000

Patch Set 6:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4394/

-------------------------------------
author: Brenden Conley
date: 2013-12-04 17:53:29.000000000

Patch Set 6: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4394/ : SUCCESS

-------------------------------------
author: Ivy Mitchell
date: 2013-12-05 02:59:56.000000000

Patch Set 6: Code-Review+1 IP-Clean+1

(1 comment)

It's always fun to read your code. I am looking forward to trying it out.

Line:227, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/component/TmfEventProvider.java -> remove

-------------------------------------
author: Annalise Jimenez
date: 2013-12-05 03:28:48.000000000

Patch Set 6: Code-Review-1

This looks quite very hackish.  It requires the analysis module developer to know the functioning of the requests.  The state system factory shouldn't have to know about it...

See comment in the bug report.  If you think it's worth getting this temporary solution in, I'll remove the -1, otherwise, it can wait a bit for a better solution.

-------------------------------------
author: Ricky Reeves
date: 2013-12-05 18:02:22.000000000

Abandoned

replaced by https://git.eclipse.org/r/#/c/19388/

-------------------------------------
