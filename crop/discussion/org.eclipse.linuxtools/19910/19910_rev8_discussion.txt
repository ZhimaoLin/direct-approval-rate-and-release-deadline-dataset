DESCRIPTION

TMF: Introduce the XML state provider for data driven analysis

This patch presents how to define by XML a state provider for a trace. It
contains a test file that works for the test CtfTmfTraces. The patch for XML
analysis module source will be necessary to be able to import XML files and see
the analysis modules appear under the trace.

Change-Id: I4b2db36beb2185049c96344a5faff12d51996317
Signed-off-by: Aryana Jones xxx@xxx.xxx
Signed-off-by: Ayanna Reed xxx@xxx.xxx


COMMENTS

author: Annalise Jimenez
date: 2014-01-27 22:19:14.000000000

Uploaded patch set 8.

-------------------------------------
author: Brenden Conley
date: 2014-01-27 22:19:21.000000000

Patch Set 8:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5212/

-------------------------------------
author: Annalise Jimenez
date: 2014-01-27 22:23:06.000000000

Patch Set 8:

Florian, here too, I'll re-read the details and correct the comments, constant and variables names, etc, but the design part is pretty much over. Let me know if you see anything and if I broke your code ;-)

-------------------------------------
author: Brenden Conley
date: 2014-01-27 22:31:29.000000000

Patch Set 8: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5212/ : FAILURE

-------------------------------------
author: Annalise Jimenez
date: 2014-01-30 22:02:07.000000000

Patch Set 8:

(4 comments)

Florian, I'm quite done, just a few more questions here. When I have your answer, I'll push the(my) final version of the patch.

Line:95, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlLocation.java -> Florian, should the quark exist? Should we add a if (quark == -1) throw error here?

Line:146, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlStateAttribute.java -> Shouldn't this throw an error instead? Because this will just return the parent quark, which may not be what we want.

Line:168, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlStateAttribute.java -> Shoudl we check for -1 every iteration here and break if -1?

Line:156, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlCondition.java -> It may just mean the attribute does not exist yet, so we should not throw this error, which is handled by the state change as something that should not happen, right? Maybe another "normal" exception

-------------------------------------
author: Ayanna Reed
date: 2014-01-31 01:02:03.000000000

Patch Set 8:

(9 comments)

Line:95, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlLocation.java -> throw an error

Line:146, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlStateAttribute.java -> yes  throw an error here.

Line:168, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlStateAttribute.java -> yes

Line:190, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlStateAttribute.java -> here we can also throw an error. A the value of a query must not be null because we use this information to complete another path.

Line:201, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlStateAttribute.java -> can be return location.getLocationQuark()

Line:77, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlCondition.java -> FIXME: in the seconde ligne

Line:156, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlCondition.java -> this case throw an exception if the attribute is not found and we can chose between the <then> or the <else> condition.

Line:177, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlCondition.java -> bad tab

Line:86, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlEventHandler.java -> cut at &&

-------------------------------------
author: Annalise Jimenez
date: 2014-01-31 01:32:19.000000000

Patch Set 8:

(1 comment)

Line:156, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlCondition.java -> Actually, now we are gone out of the event handling with this throw (no try/catch at the caller site). What *should* happen if the attribute does not exist? I'll modify the code consequently.

-------------------------------------
author: Ayanna Reed
date: 2014-01-31 03:10:46.000000000

Patch Set 8:

(1 comment)

Line:156, lttng/org.eclipse.linuxtools.tmf.analysis.xml.core/src/org/eclipse/linuxtools/internal/tmf/analysis/xml/core/stateprovider/model/TmfXmlCondition.java -> We should stop the stateChange, but not the complete eventHandler.

-------------------------------------
