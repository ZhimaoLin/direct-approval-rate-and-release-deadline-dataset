DESCRIPTION

TMF: Port the LTTng Kernel state system to an analysis module

And update the views accordingly.

Change-Id: I90975b5772db24a784d99d2d0232f6f76a8e5e03
Signed-off-by: Aryana Jones xxx@xxx.xxx


COMMENTS

author: Annalise Jimenez
date: 2013-11-29 14:18:23.000000000

Uploaded patch set 6.

-------------------------------------
author: Annalise Jimenez
date: 2013-11-29 14:19:54.000000000

Patch Set 6:

Patch https://git.eclipse.org/r/#/c/19116/ will correct the supplementary file problem.  Both patches are independent though.

-------------------------------------
author: Brenden Conley
date: 2013-11-29 14:24:44.000000000

Patch Set 6:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4293/

-------------------------------------
author: Brenden Conley
date: 2013-11-29 15:08:00.000000000

Patch Set 6: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4293/ : SUCCESS

-------------------------------------
author: Ricky Reeves
date: 2013-12-04 13:52:38.000000000

Patch Set 6: Code-Review-1

(2 comments)

There are 2 things that need to be addressed (see comments in TmfStateSystemAnalysisModule). You could do the changes as a subsequent patches, but it needs to be addressed before submitting this patch.

Line:123, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/statesystem/TmfStateSystemAnalysisModule.java -> This Exception is not brought to the User's attention. It would be better to return an IStatus object where you can store the exception to be logged/displayed in the calling method.

Line:135, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/statesystem/TmfStateSystemAnalysisModule.java -> When using the progress view to cancel the job for building the state system it actually doesn't stop the building of the state system because the request to the trace is still running (as you probably already know). Right now the only way to cancel it is by closing the trace.

The building of the state system is done by a request in the HistoryBuilder class. While it's being build the build job is waiting for completion and the call to the TmfStateSystemFactory.newFullHistory() above does only return when request is finished. So, to cancel the building a handle to the request is needed and then you can call request.cancel().

-------------------------------------
author: Ricky Reeves
date: 2013-12-05 18:04:03.000000000

Patch Set 6: -Code-Review

Lift -1. 

Issue of cancelling of history build request is addressed by https://git.eclipse.org/r/#/c/19388/

-------------------------------------
author: Ricky Reeves
date: 2013-12-05 18:41:46.000000000

Patch Set 6: Verified+1 Code-Review+1 IP-Clean+1

Merge it unless Alex has objections

-------------------------------------
author: Braxton Mccarthy
date: 2013-12-05 19:02:50.000000000

Patch Set 6: Code-Review+1

If you're fine with merging this before the "regression-preventing fixes" (coalescing the requests, and making the job cancellable), then so am I! We just must not forget to get those working before June :)

-------------------------------------
author: Annalise Jimenez
date: 2013-12-05 19:10:36.000000000

Patch Set 6:

I'll wait after the hack-a-thon to merge it, just in case somebody complains of slower speed ;-)

Though another argument is to make sure it is there before the hack-a-thon so TMF has a real life example of the analysis framework.

Hmm... dilemma...

-------------------------------------
author: Braxton Mccarthy
date: 2013-12-05 22:38:44.000000000

Patch Set 6: Code-Review-2

Will have to be re-pushed to master branch.

-------------------------------------
author: Annalise Jimenez
date: 2013-12-06 14:56:51.000000000

Abandoned

pushed to master

-------------------------------------
