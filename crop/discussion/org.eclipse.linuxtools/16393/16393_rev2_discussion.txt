DESCRIPTION

tmf: Tweaks to CallStackStateProvider

- Add a considerEvent() method to put all checks in. This avoids
  running checks more than once per event.
- Make the abstract methods protected instead, they should not be called
  by external components.
- Add a check when popping state values if func_exit names are available.
  This makes sure the value matches the current function we are in. If it
  doesn't, log a warning in the error log. This will most definitely happen
  if there are lost events in the trace.

Change-Id: I1f2014486768c9317cbddb9556faf3e061f130b0
Signed-off-by: Braxton Mccarthy xxx@xxx.xxx


COMMENTS

author: Braxton Mccarthy
date: 2013-09-16 21:49:54.000000000

Uploaded patch set 2.

-------------------------------------
author: Brenden Conley
date: 2013-09-16 21:50:01.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/3492/

-------------------------------------
author: Brenden Conley
date: 2013-09-16 22:18:01.000000000

Patch Set 2: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/3492/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2013-09-17 13:53:19.000000000

Patch Set 2: Code-Review+1

I tried to find an extra whitespace somewhere, but couldn't find any ;-)

-------------------------------------
author: Luciana Barry
date: 2013-09-17 14:49:52.000000000

Patch Set 2: Code-Review-1

(4 comments)

Line:13, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/callstack/messages.properties -> So personal :)

Line:126, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/callstack/CallStackStateProvider.java -> The poppedValue might be null if we try to pop further (e.g. missed a push). The unbox will throw a NPE.

Line:127, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/callstack/CallStackStateProvider.java -> Would it be useful to use NLS.bind() and add the expected, actual values and timestamp, to help pinpoint the missing events? Or maybe it will slow it down too much?

Line:30, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/callstack/Messages.java -> U(n)matched

-------------------------------------
author: Braxton Mccarthy
date: 2013-09-17 18:31:50.000000000

Patch Set 2:

(2 comments)

Line:126, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/callstack/CallStackStateProvider.java -> Oh you're right. popAttribute() can return null.

Maybe it's time to bring back the null annotations ;)

Line:127, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/callstack/CallStackStateProvider.java -> I think it'd be worth it. Since this should only happens in "exceptional" cases, and not every event, we can afford doing it

-------------------------------------
