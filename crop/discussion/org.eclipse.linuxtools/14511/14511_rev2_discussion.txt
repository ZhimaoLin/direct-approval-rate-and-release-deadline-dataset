DESCRIPTION

tmf : Update the histogram to handle lost events correctly

Add a checkbox to toggle displaying the lost events
Display the lost event's bars in the histogram

Change-Id: Iba72f479455cadc4150efadf695f943a6572f3d2
Signed-off-by: Liana Berg xxx@xxx.xxx


COMMENTS

author: Liana Berg
date: 2013-08-07 19:27:24.000000000

Uploaded patch set 2.

-------------------------------------
author: Brenden Conley
date: 2013-08-07 19:27:30.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/3127/

-------------------------------------
author: Brenden Conley
date: 2013-08-07 19:47:05.000000000

Patch Set 2: Verified+1

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/3127/ : SUCCESS

-------------------------------------
author: Ricky Reeves
date: 2013-08-08 12:41:09.000000000

Patch Set 2: Code-Review-1

Nice addition to the Histogram View.

Please add some unit tests for org.eclipse.linuxtools.tmf.ui.tests.histogram.HistogramDataModelTest

Please also update the User Guide: org.eclipse.linuxtools.lttng.help/doc/User-Guide.mediawiki

-------------------------------------
author: Ivy Mitchell
date: 2013-08-08 17:05:36.000000000

Patch Set 2: Code-Review-1

(4 comments)

Great stuff, we need a user manual and tests, but it looks merge-ready to me.

Line:13, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/messages.properties -> Please capitalize all the words.

Line:37, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Messages.java -> can you change the tabs for spaces?

Line:107, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/request/TmfDataRequest.java -> remove this line please

Line:532, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> one line please

-------------------------------------
author: Luciana Barry
date: 2013-08-08 19:56:30.000000000

Patch Set 2: Code-Review-1

(16 comments)

Line:9, /COMMIT_MSG -> (just make sure this is still true after implementing (or not) the other review comments)

Line:75, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramScaledData.java -> fmax > fMax

Line:136, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramScaledData.java -> format police: space around operators

Line:137, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramScaledData.java -> unnecessary, Java does that for you.
(oh, I guess comment applies to fData also)

Line:157, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramScaledData.java -> it's actually fWidth/fBarWidth, but it would be even better as other.fData.length!

Line:102, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramRequest.java -> format police: space after cast

Line:593, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> fix alignment

Line:610, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> We're still not totally protected against having this list grow to be very large, and if it happens this loop will become very slow. Maybe we want to tackle this in a subsequent patch.

Line:614, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> There is a loss of precision of the data by combining these lost event ranges.

Line:620, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> you would want to break out of the loop when found

Line:201, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramView.java -> I would prefer a toggle action in the view's local toolbar.

Line:13, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/messages.properties -> and camelCase the variable name suffix

Line:292, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> leftover, remove this line

Line:638, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> could we use drawLine() to draw the histogram bars instead? (note, it draws in foreground color)

Line:642, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> I believe this value represents lost events only, so should not be called 'combined'

Line:643, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> if both 'value' and 'combinedValue' are rounded up, maybe the bucket with the max value will try to draw one or two pixels above the top bound, but I guess it will just not spill as it is outside the canvas, so it's ok...

-------------------------------------
author: Braxton Mccarthy
date: 2013-08-15 17:46:36.000000000

Patch Set 2: Code-Review-2

As if this poor patch hadn't been -1'ed to the ground already, I'll add that there don't seem to be any API breaks in there, so it could go on master instead of -luna.

This wouldn't be very important if it was by itself, but since https://git.eclipse.org/r/#/c/15491/ and https://git.eclipse.org/r/#/c/14519/ already go on master, this one should go with them too.

-------------------------------------
author: Braxton Mccarthy
date: 2013-08-16 19:15:08.000000000

Abandoned

Replaced by https://git.eclipse.org/r/#/c/15555/

-------------------------------------
