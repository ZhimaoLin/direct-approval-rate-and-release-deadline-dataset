DESCRIPTION

tmf : Update the histogram to handle lost event correctly

Change-Id: Iba72f479455cadc4150efadf695f943a6572f3d2
Signed-off-by: Liana Berg xxx@xxx.xxx


COMMENTS

author: Brenden Conley
date: 2013-07-12 15:29:13.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2897/

-------------------------------------
author: Brenden Conley
date: 2013-07-12 15:46:49.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2897/ : SUCCESS

-------------------------------------
author: Ivy Mitchell
date: 2013-07-17 17:17:36.000000000

Patch Set 1: Verified+1 Code-Review-1 IP-Clean+1

(1 comment)

please aggregate the number of lost events if two ranges overlap instead of duplicating them, they may accumulate and do not nice things to ram too.

Line:67, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> Add your name here

-------------------------------------
author: Luciana Barry
date: 2013-07-18 18:47:46.000000000

Patch Set 1: Code-Review-1

(13 comments)

Line:105, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramRequest.java -> We don't know for sure that there is such a field in that specific event. Should use ITmfLostEvent.getNbLostEvents().

Line:56, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> might no longer be

Line:58, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> lose

Line:67, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> Or at least in the copyright header, here I'm not sure

Line:321, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> feels like there should be Lost somewhere in the method name...

Line:330, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> this can easily be done with the pattern
max = Math.max(max, value)

Line:611, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> There is a potentially unlimited number of these lost event pairs. The data model should be limited to the bucket size.

Line:614, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/HistogramDataModel.java -> If three chunks of 100 lost events fall in the same bucket, the max value should be 300, not 100.

Line:382, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/request/TmfDataRequest.java -> I'm not sure we want to do this. When you have a request with a fixed number of events to read, the lost events should be counted. It's also used by the checkpoint indexer.

Line:233, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> comment not aligned?

Line:256, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> Since you are drawing lost event bars downwards from the top, shouldn't min be on top and max on bottom?

Line:303, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> min also

Line:651, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/histogram/Histogram.java -> Seems like you are reusing the same coordinates calculation. Could you perhaps just use fillRectangle?

-------------------------------------
