DESCRIPTION

Modified AbstractTest of profiling package to provide support
for remote testing. Added support for perf remote testing.

Change-Id: Ibe7db6ba807e853912723eac44a01efc2263b5b3


COMMENTS

author: Brenden Conley
date: 2013-04-02 18:13:36.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/1843/ 

-------------------------------------
author: Brenden Conley
date: 2013-04-02 18:26:49.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/1843/ : SUCCESS

-------------------------------------
author: Bryce Kline
date: 2013-04-03 12:03:48.000000000

Patch Set 1: Verified; Looks good to me, but someone else must approve; IP review completed



-------------------------------------
author: Craig Arias
date: 2013-04-04 19:55:47.000000000

Patch Set 1:

Please take into account that an username and password are necessary for the AbstractRemoteTest class, in order to the localhost connections can take place.

-------------------------------------
author: Nathanael Holden
date: 2013-04-09 16:25:17.000000000

Patch Set 1: I would prefer that you didn't submit this

(1 inline comment)

After setting a valid user/pass, and launching the tests, I see they fail with :

junit.framework.AssertionFailedError: Locating binary for "fibTest" failed.
	at junit.framework.Assert.fail(Assert.java:50)
	at org.eclipse.linuxtools.profiling.tests.AbstractTest.createConfiguration(AbstractTest.java:294)
	at org.eclipse.linuxtools.internal.perf.tests.LaunchRemoteTest.setUp(LaunchRemoteTest.java:47)
	at junit.framework.TestCase.runBare(TestCase.java:132)
	at junit.framework.TestResult$1.protect(TestResult.java:110)
	at junit.framework.TestResult.runProtected(TestResult.java:128)
	at junit.framework.TestResult.run(TestResult.java:113)
	at junit.framework.TestCase.run(TestCase.java:124)
	at junit.framework.TestSuite.runTest(TestSuite.java:243)
	at junit.framework.TestSuite.run(TestSuite.java:238)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:62)
	at org.eclipse.pde.internal.junit.runtime.PlatformUITestHarness$1.run(PlatformUITestHarness.java:47)
	at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
	at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
	at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3537)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3189)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
	at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.runApp(NonUIThreadTestApplication.java:54)
	at org.eclipse.pde.internal.junit.runtime.UITestApplication.runApp(UITestApplication.java:41)
	at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.start(NonUIThreadTestApplication.java:48)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:638)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:593)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1447)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1423)

It looks like the building of the project might be failing.

Line:59, profiling/org.eclipse.linuxtools.profiling.tests/src/org/eclipse/linuxtools/profiling/tests/AbstractRemoteTest.java -> Please remove the extraneous whitespace in this file.

-------------------------------------
author: Nathanael Holden
date: 2013-04-10 15:05:30.000000000

Patch Set 1:

After some debugging, I can see that :

URI workingDirectoryURI = ManagedBuildManager.getBuildLocationURI(configuration, builder);

returns the wrong URI. It's just 'file:/Debug' instead of the hard-coded project path with '/Debug' appended. This is happening in o.e.cdt.managedbuilder.core.ExternalBuildRunner at method invokeExternalBuild .

-------------------------------------
author: Octavio Lucero
date: 2013-04-10 15:55:39.000000000

Patch Set 1: I would prefer that you didn't submit this

I am seeing the same issue Roland described above. Also, when running the with maven the tests fail to retrieve the ptp remote tools service: http://paste.fedoraproject.org/7092/ .

-------------------------------------
author: Octavio Lucero
date: 2013-04-10 20:37:15.000000000

Patch Set 1:

Also, the next patch set should be rebased on top of master to avoid any merge conflicts, it currently depends on a fairly old commit.

-------------------------------------
