DESCRIPTION

RPM: modify behaviour of hyperlinks B#416446

The options available when Ctrl + hovering on any kind
of valid hyperlink within a specfile editor are modified based
on whether or not the hyperlink is a valid URL or file name.

Valid URLs will be given the option to OPEN IN A BROWSER. Valid
URLs that are linking to a file will be given the option to DOWNLOAD
the file. If the file does not exist and is a patch, it will offer to
CREATE it. If the file exists, then it will offer to OPEN the file.

Non URLs will either OPEN the file if it exists, or CREATE the file
if it is a patch.

Also, "Unkown Hyperlink" showing up when hovering over a macro and valid
URL will now show a simple text saying what it will do.

Bug: 416446

Change-Id: I51021ca1163dded22a74874e9133ff3c1b4f1b60
Signed-off-by: Tori Trevino xxx@xxx.xxx


COMMENTS

author: Tori Trevino
date: 2013-09-16 19:30:07.000000000

Uploaded patch set 9.

-------------------------------------
author: Brenden Conley
date: 2013-09-16 19:30:13.000000000

Patch Set 9:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/3482/

-------------------------------------
author: Brenden Conley
date: 2013-09-16 20:04:49.000000000

Patch Set 9: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/3482/ : SUCCESS

-------------------------------------
author: Tori Trevino
date: 2013-10-01 17:13:38.000000000

Patch Set 10: Patch Set 9 was rebased

-------------------------------------
author: Nathanael Holden
date: 2013-10-01 17:22:35.000000000

Patch Set 9:

(6 comments)

Line:67, rpm/org.eclipse.linuxtools.rpm.ui.editor/src/org/eclipse/linuxtools/rpm/ui/editor/utils/RPMUtils.java -> This could become 'return true' while the MalformedURLException could return false, eliminating the need for the local boolean.

Line:76, rpm/org.eclipse.linuxtools.rpm.ui.editor/src/org/eclipse/linuxtools/rpm/ui/editor/utils/RPMUtils.java -> What should this be matching ?

Line:96, rpm/org.eclipse.linuxtools.rpm.ui.editor/src/org/eclipse/linuxtools/rpm/ui/editor/utils/RPMUtils.java -> This would work for most cases but doesn't correctly handle some arguably valid URLs. For example :

http://www.foo.bar.com:8080/test/file.html?name=baz#intro

new URL(url).getFile() would get you '/test/file.html' from which you could extract the necessary file name.

Line:130, rpm/org.eclipse.linuxtools.rpm.ui.editor/src/org/eclipse/linuxtools/rpm/ui/editor/utils/RPMUtils.java -> This could become 'return false;' and the final statement could be 'return true;' , eliminating the need for 'rc'.

Line:86, rpm/org.eclipse.linuxtools.rpm.ui.editor/src/org/eclipse/linuxtools/internal/rpm/ui/editor/hyperlink/SourcesFileHyperlinkDetector.java -> Perhaps create another local variable for the resolved file name, UiUtils.resolveDefines(editor.getSpecfile(), fileName));

Line:111, rpm/org.eclipse.linuxtools.rpm.ui.editor/src/org/eclipse/linuxtools/internal/rpm/ui/editor/hyperlink/SourcesFileHyperlinkDetector.java -> This can be simplified to 'return tempHList.isEmpty() ? null : tempHList.toArray(new IHyperLink[0]);'

-------------------------------------
