DESCRIPTION

Fix lost events in a more elegant way.

* Read the stream context packet once instead of at each load of the packet.
* Clean up code.
* Change the API to handle seeks to a specific event in a timestamp.
* Update test cases.

Change-Id: I0dddf56645bc0b8a69256ac947f3a806d1cfedf3
Signed-off-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2012-08-03 20:01:25.000000000

Uploaded patch set 3.

-------------------------------------
author: Braxton Mccarthy
date: 2012-08-06 15:30:40.000000000

Patch Set 3: I would prefer that you didn't submit this

(9 inline comments)

Few comments on style. It also introduces 3 warnings.

Line:132, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/ctfadaptor/CtfTmfLightweightContext.java -> } else {

Line:306, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/StreamInputPacketReader.java -> unwrap this plz

Line:61, lttng/org.eclipse.linuxtools.tmf.core.tests/src/org/eclipse/linuxtools/tmf/core/tests/ctfadaptor/CtfIteratorTest.java -> space after comma

Line:123, lttng/org.eclipse.linuxtools.tmf.core.tests/src/org/eclipse/linuxtools/tmf/core/tests/ctfadaptor/CtfLocationTest.java -> space after comma

Line:227, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/trace/StreamInputPacketIndexEntry.java -> ?

Line:97, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/ctfadaptor/CtfLocationData.java -> Could use '/' and ']' to avoid the need for extra NON-NLS

Line:359, lttng/org.eclipse.linuxtools.tmf.core.tests/src/org/eclipse/linuxtools/tmf/core/tests/ctfadaptor/CtfTmfTraceTest.java -> location2

Line:129, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/ctfadaptor/CtfIterator.java -> ) {

Line:246, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/ctfadaptor/CtfIterator.java -> } else {

-------------------------------------
author: Ricky Reeves
date: 2012-08-06 15:59:55.000000000

Patch Set 3: (1 inline comment)

It would be good to have some unit tests for the new class CtfLocationData (expecially for methods comparteTo(), equals(), hashCode()).

Line:246, lttng/org.eclipse.linuxtools.tmf.core.tests/src/org/eclipse/linuxtools/tmf/core/tests/ctfadaptor/CtfTmfTraceTest.java -> Why was it necessary to change the expected result?

-------------------------------------
