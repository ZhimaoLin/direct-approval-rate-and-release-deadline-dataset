DESCRIPTION

tmf: Import and Export trace package

Import and export files, bookmarks, supplementary files for a
single trace as an archive (tar, tar.gz or zip)

Change-Id: I71f5f104b2c552a5dbb2721fbdde9b069dd1a306
Signed-off-by: Alivia Ritter xxx@xxx.xxx


COMMENTS

author: Kaeden Tapia
date: 2013-10-31 21:16:18.000000000

Uploaded patch set 9.

-------------------------------------
author: Luciana Barry
date: 2013-11-05 19:59:14.000000000

Patch Set 9: Verified-1 Code-Review-1

(19 comments)

Line:186, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageOperation.java -> Archive

Line:648, lttng/org.eclipse.linuxtools.tmf.ui/plugin.xml -> and or both unnecessary?

Line:61, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> group constants together

Line:122, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> should use setGrayed() when child are mixed =?

Line:309, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> could use char '\n' to avoid NLS

Line:329, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> use char

Line:461, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> Should be SWT.OPEN for the import operation.

Line:186, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> is this the variable name you intended?

Line:253, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> the wrapping... my eyes... aaahh

Line:315, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> The import operation sometimes does not import the supplementary files. By debugging I found that the newly imported trace is not yet returned in the list here, perhaps the project needs to be refreshed first (it does when it receives a ResourceChanged notification, maybe there is a small delay).

Line:319, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> you could break here

Line:340, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> Is there a potential for name clash between the trace files and the supplementary files?

Line:343, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> you could break here

Line:186, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageExportOperation.java -> I get a ResourceException here when exporting a trace from under an experiment that has bookmarks.
Resource '/Project/Experiments/experiment/trace/trace_' does not exist.

Line:262, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/ImportTracePackageWizardPage.java -> If I choose a valid path from the combo, then type garbage and press Enter, it seems to perform the Finish action with the previous valid selection, ignoring the typed value, the listener is not even called when Enter is pressed. Maybe it should validate for any key stroke, or on a modifyListener event instead?

Line:266, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/ImportTracePackageWizardPage.java -> There's probably a SWT constant for that

Line:41, lttng/org.eclipse.linuxtools.tmf.ui/schema/export-manifest.xsd -> I think the code exports all attributes of the bookmark marker, will this prevent others than location & message?

Line:316, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/ExportTracePackageWizardPage.java -> SWT.SINGLE has no effect for a Label

Line:52, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/TracePackageBookmarkElement.java -> Could this be made generic to hold any attributes of the marker?

-------------------------------------
author: Kaeden Tapia
date: 2013-11-12 06:02:58.000000000

Patch Set 9:

(19 comments)

Line:186, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageOperation.java -> Done

Line:648, lttng/org.eclipse.linuxtools.tmf.ui/plugin.xml -> Done

Line:61, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> Done

Line:122, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> Done

Line:309, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> Done

Line:329, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> Done

Line:461, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/AbstractTracePackageWizardPage.java -> Done, passed as parameter.

Line:186, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> Done. Copy paste :(

Line:253, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> Done. Maybe the formatter setting "Maximum line width for comments" should be increased. 80 is not a lot.

Line:315, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> I forced the creation of the element by calling TmfNavigatorContentProvider().getChildren(fTmfTraceFolder)

Line:319, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> Done

Line:340, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> Yes. I reworked the file structure of the archive to prevent this. At the top level, now there are two folders, Traces and .tracing, like in a project.

Line:343, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageImportOperation.java -> Done

Line:186, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/TracePackageExportOperation.java -> Done

Line:262, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/ImportTracePackageWizardPage.java -> I changed this to a TraverseListener. I stole this from the import project wizard (WizardProjectsImportPage).

Line:266, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/ImportTracePackageWizardPage.java -> Done

Line:41, lttng/org.eclipse.linuxtools.tmf.ui/schema/export-manifest.xsd -> Done. I added xs:anyAttribute so that other attributes can be added.

Line:316, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/importexport/ExportTracePackageWizardPage.java -> Done

Line:52, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/wizards/tracepkg/TracePackageBookmarkElement.java -> Done. It's just a map now.

-------------------------------------
author: Gerrit Code Review
date: 2013-11-18 19:19:07.000000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
