DESCRIPTION

Valgrind: Added quickfix for wrong de-allocation function problem from memcheck

Change-Id: I082d68f93f727feffa16724b46238e3fdeb0e38d


COMMENTS

author: Brenden Conley
date: 2013-07-10 14:39:24.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2887/

-------------------------------------
author: Brenden Conley
date: 2013-07-10 14:55:12.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2887/ : SUCCESS

-------------------------------------
author: Octavio Lucero
date: 2013-07-10 15:24:00.000000000

Patch Set 1: Code-Review-1

(3 comments)

* https://bugs.eclipse.org/bugs/show_bug.cgi?id=402058 should be referenced by bug id in your commit message. 
* Missing javadoc.
* Please add test cases where possible.
* First line in the commit message is currently at ~80 characters, please shorten it.

Line:35, valgrind/org.eclipse.linuxtools.valgrind.launch/src/org/eclipse/linuxtools/valgrind/launch/quickfixes/ValgrindWrongDeallocResolution.java -> Missing javadoc.

Line:25, valgrind/org.eclipse.linuxtools.valgrind.launch/src/org/eclipse/linuxtools/valgrind/launch/quickfixes/AbstractValgrindResolution.java -> Missing javadoc.

Line:22, valgrind/org.eclipse.linuxtools.valgrind.launch/src/org/eclipse/linuxtools/valgrind/launch/quickfixes/ValgrindResolutionGenerator.java -> Missing javadoc.

-------------------------------------
author: Octavio Lucero
date: 2013-07-10 15:26:15.000000000

Patch Set 1:

Come to think of it, this change only partly fixes https://bugs.eclipse.org/bugs/show_bug.cgi?id=402058 . For now I think it's sufficient to post link to this submission on the bug report.

-------------------------------------
author: Erick Ross
date: 2013-07-10 17:06:33.000000000

Patch Set 1: Code-Review-1

The new classes are not in internal package which makes me uncomfortable to have public API from the beginning.

-------------------------------------
author: Octavio Lucero
date: 2013-07-10 17:20:51.000000000

Patch Set 1:

An additional suggestions; functionality for quick-fixes should be included in o.e.valgrind.ui, preferably in the internal package as there is no reason at the moment to expose this functionality to the API.

-------------------------------------
author: Callum Holloway
date: 2013-07-10 17:39:36.000000000

Patch Set 1:

In fact, the new classes aren't being exported, but I forgot to put "internal" in the package name.

I'll address all comments and send a new version as soon as possible.

-------------------------------------
author: Octavio Lucero
date: 2013-07-10 17:42:05.000000000

Patch Set 1:

Just a note, you can still create a separate package for the quick-fixes, making sure to keep it in the ui bundle and internal as mentioned earlier.

-------------------------------------
author: Octavio Lucero
date: 2013-07-11 21:27:28.000000000

Patch Set 1:

A couple of things I noticed when trying out this change locally:
* Most attempts to right click on the Valgrind 'Mismatched free()...' marker (Problems view) cause the Eclipse instance to freeze while the following is logged indefinitely: http://ur1.ca/elwjo
* When right clicking on the marker is successful the corresponding quick-fix menu item is disabled or, in some instances, doesn't show up at all.
* The only time I've seen the quick-fix menu item being enabled is after restarting the eclipse instance. This brings up the quick-fix dialog,  but executing the fix triggers a NPE: http://ur1.ca/elxyh

-------------------------------------
