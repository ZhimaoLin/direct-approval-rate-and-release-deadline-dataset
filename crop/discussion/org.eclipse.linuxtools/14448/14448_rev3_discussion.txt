DESCRIPTION

Valgrind: Added quickfix for wrong de-allocation

This commit adds a quickfix suggestion for the wrong
de-allocation function problem reported by memcheck.

Change-Id: I082d68f93f727feffa16724b46238e3fdeb0e38d


COMMENTS

author: Callum Holloway
date: 2013-07-22 18:37:21.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2013-07-22 18:37:27.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2956/

-------------------------------------
author: Brenden Conley
date: 2013-07-22 18:56:31.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2956/ : SUCCESS

-------------------------------------
author: Octavio Lucero
date: 2013-07-24 16:24:53.000000000

Patch Set 3: Code-Review-1

(13 comments)

Thanks for this update, a few comments:
* Tests are failing locally, all of them throwing a NPE: http://ur1.ca/er78v
* As this fix may become public api in the future, javadoc should be properly completed.
* A few changes to the manifest are needed.
* Quickfixes should follow default code style.

Line:59, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Just a small nitpick, there shouldn't be a space between the function name and the left parentheses. I saw this when quick-fixing invalid uses of delete/delete[]  to free (e.g. 'delete ptr' becomes 'free (ptr)' , should be 'free(ptr)' instead just to be consistent with the default code style.

Line:93, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Javadoc missing on the methods above.

Line:151, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Javadoc missing.

Line:160, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Incomplete javadoc on the methods below, please provide information for javadoc tags.

Line:14, valgrind/org.eclipse.linuxtools.valgrind.ui/META-INF/MANIFEST.MF -> You can use the x-friends directive and include the corresponding tests package. Alternatively, you could make the tests package a fragment whose host is the quickfixes package, which would be a more ideal solution.

Line:30, valgrind/org.eclipse.linuxtools.valgrind.ui/META-INF/MANIFEST.MF -> org.eclipse.ui should already be provided by the org.eclipse.ui bundle, which is already required above (line 8).

Line:14, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/ValgrindMessagesException.java -> Why is this class needed? Please add class description.

Line:27, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/ValgrindResolutionGenerator.java -> Missing javadoc.

Line:36, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/ValgrindResolutionGenerator.java -> Missing javadoc.

Line:44, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/AbstractValgrindMarkerResolution.java -> Missing javadoc.

Line:50, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/AbstractValgrindMarkerResolution.java -> Incomplete javadoc, please provide information for javadoc tags.

Line:66, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/AbstractValgrindMarkerResolution.java -> Incomplete javadoc, please provide information for javadoc tags.

Line:82, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/AbstractValgrindMarkerResolution.java -> Incomplete javadoc, please provide information for javadoc tags.

-------------------------------------
author: Octavio Lucero
date: 2013-07-24 19:21:57.000000000

Patch Set 3:

(4 comments)

Some additional comments regarding missing NON-NLS flags.

Line:52, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Use NON-NLS flags for plain strings.

Line:91, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Use NON-NLS flags for plain strings.

Line:96, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> Use NON-NLS flags for plain strings.

Line:106, valgrind/org.eclipse.linuxtools.valgrind.ui/src/org/eclipse/linuxtools/internal/valgrind/ui/quickfixes/WrongDeallocationResolution.java -> This keyword should be made a constant.

-------------------------------------
