DESCRIPTION

tmf: Fix NPE in the TimeGraphControl.

On TMF startup, the variable fEventColorMap may be <null>.

    for (Color color : fEventColorMap) {

Change-Id: I83db13bffa93c4c1fbbcbc21198f3660b56866b3
Signed-off-by: Jordon Obrien xxx@xxx.xxx


COMMENTS

author: Jordon Obrien
date: 2013-11-28 00:55:53.000000000

Patch Set 1:

I have no idea why this happens to me now.
On statup (with two opened trace), TMF crash with this stack-trace.

java.lang.NullPointerException
	at org.eclipse.linuxtools.tmf.ui.widgets.timegraph.widgets.TimeGraphControl.colorSettingsChanged(TimeGraphControl.java:2421)
	at org.eclipse.linuxtools.tmf.ui.widgets.timegraph.widgets.TimeGraphControl.setTimeGraphProvider(TimeGraphControl.java:244)
	at org.eclipse.linuxtools.tmf.ui.widgets.timegraph.TimeGraphViewer.setTimeGraphProvider(TimeGraphViewer.java:142)
	at org.eclipse.linuxtools.tmf.ui.views.timegraph.AbstractTimeGraphView$TimeGraphViewerWrapper.setTimeGraphProvider(AbstractTimeGraphView.java:188)
	at org.eclipse.linuxtools.tmf.ui.views.timegraph.AbstractTimeGraphView.createPartControl(AbstractTimeGraphView.java:710)
	at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:142)
	at org.eclipse.ui.internal.e4.compatibility.CompatibilityView.createPartControl(CompatibilityView.java:174)
	at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:323)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

-------------------------------------
author: Annalise Jimenez
date: 2013-11-28 01:01:01.000000000

Patch Set 1:

I guess that's what happens when you act on a patch's comment and don't really test... my bad!

I'll merge as soon as Hudson verifies it.

-------------------------------------
author: Jordon Obrien
date: 2013-11-28 01:23:50.000000000

Patch Set 1:

thanks, I didn't take time to understand why this happen.
If you know, it's fine for me.

-------------------------------------
author: Annalise Jimenez
date: 2013-11-28 01:38:31.000000000

Patch Set 1:

It comes from my previous patch merged today https://git.eclipse.org/r/#/c/18764/

Thanks for noticing ;-)

-------------------------------------
author: Jordon Obrien
date: 2013-11-28 01:41:06.000000000

Patch Set 1:

oups, I'm on the review-list of the other commits. ;p~

-------------------------------------
author: Brenden Conley
date: 2013-11-28 05:28:17.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4252/

-------------------------------------
author: Brenden Conley
date: 2013-11-28 06:13:43.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4252/ : SUCCESS

-------------------------------------
