DESCRIPTION

tmf: Add null-annotations to the state system

Big patch bringing JDT null-analysis annotations to the state system and
related classes. It's relatively straightforward, some null checks are now
redundant, and other stuff is now xxx@xxx.xxx which enforces null
checks before use.

The main downside is that most Java standard methods (toString(), equals(),
List.get(), etc.) do not use those types of annotations, so nullability needs
to be checked every time they are used.

In cases where their Javadoc mentions that they should not return null, I simply
extracted the value in a xxx@xxx.xxx variable. This is a bit ugly, but
I really think it's worth the much more robust compile-time checking we get
from the annotations (and if the Java classes ever support those, those
SuppressWarnings will emit "unneeded SuppressWarning" warnings and it will
be very simple to remove them).

The use of null annotations on fields requires a recent version of JDT to compile,
which means the project can only be built with Eclipse 4.3+. However, since there
are no run-time dependencies, the compiled plugin can then be installed on previous
versions with no problems (I tested with 4.2). I don't think this limiation is
problematic.

Change-Id: Id3e9ed49c3fdda7098dc1f380dc56710c55b92ae
Signed-off-by: Braxton Mccarthy xxx@xxx.xxx


COMMENTS

author: Braxton Mccarthy
date: 2013-11-26 22:18:33.000000000

Uploaded patch set 2.

-------------------------------------
author: Braxton Mccarthy
date: 2013-11-26 22:22:55.000000000

Patch Set 2:

Rebased to latest master.

After digging/testing a bit more, I found out that the JDT null annotations are not a runtime dependencies, just a compile-time one (which is why we don't add the plugin to the Manifests). This means that the compiled plugin can be installed on previous versions of Eclipse with no problems (I tested with 4.2, 3.8 should work too).

Eclipse 4.3 is still needed to compile the code, but I assume everybody developing is on 4.3 (or 4.4!) by now.

tl;dr This is now ready for review!

-------------------------------------
author: Brenden Conley
date: 2013-11-26 22:50:40.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4193/

-------------------------------------
author: Brenden Conley
date: 2013-11-26 23:17:58.000000000

Patch Set 2: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4193/ : FAILURE

-------------------------------------
