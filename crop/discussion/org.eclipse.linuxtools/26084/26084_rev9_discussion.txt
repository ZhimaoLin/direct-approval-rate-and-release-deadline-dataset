DESCRIPTION

ctf: Introducing the FixedLengthStringDefintion

This patch introduces the fixedlength string that will make sequences
and arrays read faster when it's a string, as the ctf spec specifies
that they are aligned on 8 bits and always 8 bits wide per character.

Sequences and arrays can either be ArrayDefinition2s or
FixedStringDefintions.

This patch gives a 20% acceleration in sequential reading.

Signed-off-by: Ivy Mitchell xxx@xxx.xxx
Change-Id: I7933268b7f9271f74f7d59339ea9b8343fdb021e


COMMENTS

author: Ivy Mitchell
date: 2014-06-18 18:57:36.000000000

Uploaded patch set 9.

-------------------------------------
author: Braxton Mccarthy
date: 2014-06-18 19:31:14.000000000

Patch Set 9: Code-Review-1

(8 comments)

Previous comments were addressed, that's good.

The checks in CtfTmfEventField are good to have (protects against malicious traces etc...)

However, right now it's a work-around because the CTF parser sends String with duplicate \0's all the time... There should be added tests in ctf.core to check for that, and we should make sure the new StringDefintions thingies do not create strings with duplicate \0's.

Line:9, /COMMIT_MSG -> fixed-length

Line:10, /COMMIT_MSG -> CTF

Line:13, /COMMIT_MSG -> There is no ArrayDefinition2 anymore

Line:111, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEventField.java -> ... and here /* Array of other types */

Line:109, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEventField.java -> "other" related to what? This comment doesn't make sense here.

It could say "Array of generic element types" ?

Line:118, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEventField.java -> Add a comment below here, /* Array of integers */ ...

Line:150, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEventField.java -> Add some comments as to what is happening here, it's not obvious.

  /* If we find a \0 before the real end of the string, consider that as the real end of the string */

pos -> realEndPos or something

Line:152, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEventField.java -> this block needs Ctrl+Shift+F

-------------------------------------
author: Brenden Conley
date: 2014-06-18 22:09:23.000000000

Patch Set 9:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7439/

-------------------------------------
author: Brenden Conley
date: 2014-06-18 22:16:15.000000000

Patch Set 9: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7439/ : FAILURE

-------------------------------------
