DESCRIPTION

Fix npe thrown during auto-completion of invalid probes.

Change-Id: I8148fff182fd7c2dd796bac50058c6e6a2d48371


COMMENTS

author: Brenden Conley
date: 2012-12-12 19:48:00.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/771/ 

-------------------------------------
author: Brenden Conley
date: 2012-12-12 20:00:52.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/771/ : SUCCESS

-------------------------------------
author: Kamila Nguyen
date: 2012-12-12 20:22:00.000000000

Patch Set 1:

What if we make NO_COMPLETIONS an empty array instead ?
That way we don't always have to check the length of what is returned. WDYT ?

-------------------------------------
author: Octavio Lucero
date: 2012-12-12 21:12:53.000000000

Patch Set 1:

The only place I check the length is in STPMetadataSingleton#getProviderVariableCompletion when checking that STPMetadataSingleton#getMatchingChildren didn't return an empty array. Also, STPCompletionProcessor#NO_COMPLETION is private. Did you perhaps mean NO_MATCHES? To avoid the length check I would change STPMetadataSingleton#getMatchingChildren to return ArrayList<String> and use isEmpty() instead.

-------------------------------------
author: Kamila Nguyen
date: 2012-12-12 21:45:21.000000000

Patch Set 1: (2 inline comments)

Yes, my bad; I meant NO_MATCHES.
I have made the comments inline

Line:106, systemtap/org.eclipse.linuxtools.systemtap.ui.ide/src/org/eclipse/linuxtools/internal/systemtap/ui/ide/editors/stp/STPMetadataSingleton.java -> Here if we change NO_MATCHES to be of length 0 then we would not need this change because any array of length 0 would do

Line:132, systemtap/org.eclipse.linuxtools.systemtap.ui.ide/src/org/eclipse/linuxtools/internal/systemtap/ui/ide/editors/stp/STPCompletionProcessor.java -> If NO_MATCHES has length 0 we would not need the above check.
because the loop below will never be entered, but yes is empty can be used to avoid doing the extra work below.

-------------------------------------
author: Octavio Lucero
date: 2012-12-13 00:55:45.000000000

Patch Set 1: (1 inline comment)



Line:106, systemtap/org.eclipse.linuxtools.systemtap.ui.ide/src/org/eclipse/linuxtools/internal/systemtap/ui/ide/editors/stp/STPMetadataSingleton.java -> * The fix is very simple, thanks :)
* Also, changing NO_MATCHES to be of length 0 would mean "No completion Data" will not show up anymore. I think this makes sense since we'll always have the static probes available.

-------------------------------------
