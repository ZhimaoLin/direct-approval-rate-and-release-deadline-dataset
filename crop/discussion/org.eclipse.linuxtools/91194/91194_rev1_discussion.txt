DESCRIPTION

Bug 495600 - Improve UI for Docker reconnection use case

- fix hasChildren() and getChildren() of DockerExplorerContentProvider
  to treat a closed connection the same as an unknown connection, i.e.
  try to open and use loading stubs as place holders until the
  connection is known to be un-openable

Change-Id: I4dd898510e14883626d451d61a0c537b5d0a5823


COMMENTS

author: Kaylin Maxwell
date: 2017-02-15 17:50:06.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2017-02-15 17:50:12.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11452/

-------------------------------------
author: Brenden Conley
date: 2017-02-15 18:10:47.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11452/ : SUCCESS

-------------------------------------
author: Nathanael Holden
date: 2017-02-21 17:40:43.000000000

Patch Set 1: Code-Review-1

I'm not sure if we want to do this. This actually causes the the query against the offline connection to happen forever, or until the connection comes back up.

Basically, the LoadingJob called by open() in getChildren(), ends up calling refreshTargets, which causes the viewer to refresh, triggering yet another getChildren() call.

-------------------------------------
author: Nathanael Holden
date: 2017-02-21 17:45:56.000000000

Patch Set 1:

(1 comment)

I noticed that un-expanding the tree stops the check which seems better. However we'd still need to reduce all those messages ending up in the error log.

Line:914, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/views/DockerExplorerContentProvider.java -> If this code is allowed to run more freely (ie. until a connection is up) then you'll need to guard against a viewer being disposed, as someone might expand a connection that's offline, let it run, and then shut down Eclipse leading to various 'widget is disposed' errors.

-------------------------------------
author: Gerrit Code Review
date: 2017-02-22 04:17:44.000000000

Change has been successfully cherry-picked as 5b4ec5e39a8acb75deee74ce460f513dab8da3bc by Kaylin Maxwell

-------------------------------------
