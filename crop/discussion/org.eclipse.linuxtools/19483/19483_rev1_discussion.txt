DESCRIPTION

ctf: Reformat and remove debugs in the CTF-Grammar.

This is mostly a grammar reformatting.
My plan is to change some rules in the grammar.
I prefer to land the reformatting before playing with the grammar.

The 'debug_print' is useless in the grammar.
Antlr (and antlrworks) provides a really good debugger for debugging
this kind of grammar.

Change-Id: I6e590a168d2e5ff4502c36ea2fd8523b723d4399
Signed-off-by: Jordon Obrien xxx@xxx.xxx


COMMENTS

author: Brenden Conley
date: 2013-12-08 02:39:46.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4501/

-------------------------------------
author: Brenden Conley
date: 2013-12-08 02:49:39.000000000

Patch Set 1: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4501/ : FAILURE

-------------------------------------
author: Ivy Mitchell
date: 2013-12-09 15:03:05.000000000

Patch Set 1:

The change looks good to me, but could you take a look at this bug please, it seems to be linked to the patch.

ANTLR Parser Generator  Version 3.2 Sep 23, 2009 14:05:07
org/eclipse/linuxtools/ctf/parser/CTFLexer.g
error(100): org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:1: syntax error: antlr: org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:1: unexpected token: @
error(100): org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:12: syntax error: antlr: org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:12: unexpected token: 
    catch (RecognitionException e) {
        throw e;
    }

org/eclipse/linuxtools/ctf/parser/CTFParser.g
error(100): org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:1: syntax error: antlr: org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:1: unexpected token: @
error(100): org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:12: syntax error: antlr: org/eclipse/linuxtools/ctf/parser/CTFParser.g:170:12: unexpected token: 
    catch (RecognitionException e) {
        throw e;
    }

warning(200): org/eclipse/linuxtools/ctf/parser/CTFParser.g:212:3: Decision can match input such as "EVENTTOK" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
warning(200): org/eclipse/linuxtools/ctf/parser/CTFParser.g:431:13: Decision can match input such as "LCURL" using multiple alternatives: 2, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): org/eclipse/linuxtools/ctf/parser/CTFParser.g:599:15: Decision can match input such as "LCURL"

-------------------------------------
author: Jordon Obrien
date: 2013-12-09 15:08:08.000000000

Patch Set 1:

Yes, this is related to the patch and I don't get it.

I had the same issue with an older version of ANTLR.
Now, I'm using a more recent one. This doens't happend locally  but seems to be broken on your build bots.

Thus, I cannot check in details the reason, I do not have access to your build bot.

-------------------------------------
author: Ivy Mitchell
date: 2013-12-09 15:56:05.000000000

Patch Set 1:

This probably means we need to upgrade the antlr version in the target config. Alex, could you confirm?

-------------------------------------
author: Kaeden Tapia
date: 2013-12-10 05:08:17.000000000

Patch Set 1:

Which version of antlr do you guys need? The latest version available for the *runtime* in Eclipse is 3.2.0, see http://download.eclipse.org/tools/orbit/downloads/drops/R20130827064939/

If we need a more recent one we'll need to add it to Orbit and have it go through the IP process.

- The version used in the maven build is specified in lttng/org.eclipse.linuxtools.ctf.parser/pom.xml
I tried to use 3.5.1 in the maven build (pom.xml) but it didn't work.

- The version of the runtime used to compile and run the java classes is specified in lttng/org.eclipse.linuxtools.ctf.parser/META-INF/MANIFEST.MF
- For development, we specify where to download it from in target definitions files, lttng/org.eclipse.linuxtools.lttng.target/lttng-e4.3.target and friends.

-------------------------------------
author: Jordon Obrien
date: 2013-12-10 05:22:53.000000000

Patch Set 1:

There is a bug with 3.5.1 documented on the web.
I was able to build it with 3.5.2.

But, I don't understand why my modifs broke the code.
Even an older version of "antlr" working an the previous build should be able to build this one.

-------------------------------------
author: Braxton Mccarthy
date: 2013-12-13 19:37:26.000000000

Patch Set 1:

As Marc-Andr√© explained, we are currently using Antlr 3.2 to build the grammar files (see the pom.xml file in ctf.parser, it specifies version 3.2). And I know the current version doesn't compile on 3.4 for example, so there can be actual syntax changes between version.

I'm all for using a more recent version. 3.4 is already in Orbit, but 3.5 is not afaik. So we might have to go through another CQ process to get that one added.

-------------------------------------
author: Kaeden Tapia
date: 2013-12-13 19:51:20.000000000

Patch Set 1:

Etienne, where did you get version 3.5.2? I don't see an official 3.5.2 release. Did you build it yourself? We need the release in maven central so that things get built as part of the maven build but I only see 3.5.1. http://search.maven.org/#search|ga|1|antlr

-------------------------------------
author: Jordon Obrien
date: 2013-12-16 02:02:15.000000000

Patch Set 1:

I really don't know what to say.
On the websize, I can't find it anymore.
I really downloaded it from the official source.

That's really strange.

06/12/2013  11:29 PM         2,959,184 antlrworks-1.5.2-complete.jar

-------------------------------------
author: Jordon Obrien
date: 2013-12-16 02:05:07.000000000

Patch Set 1:

Here is the link:

http://www.antlr3.org/works/

http://www.antlr3.org/download/antlrworks-1.5.2-complete.jar

-------------------------------------
author: Kaeden Tapia
date: 2013-12-16 23:26:29.000000000

Patch Set 1:

It think the Antlrworks jar might contain a "preview" version. Their pom.xml still has the 3.5.2-SNAPSHOT

https://github.com/antlr/antlr3/blob/master/pom.xml

-------------------------------------
