DESCRIPTION

lttng: Convert performance results from Derby to JSON

The performance tests and conversion can be executed from the command line:
mvn clean install -Pperformance

To connect to the database, additional properties have to be set.
See perf.database.loc and perf.config in
org.eclipse.linuxtools.lttng.alltests/pom.xml

A destination can also be specified with -DperfFilesDestination

Change-Id: I70b83b151d739eee7964cceef3f2b3d8078561b9
Signed-off-by: Alivia Ritter xxx@xxx.xxx


COMMENTS

author: Kaeden Tapia
date: 2014-07-23 23:05:54.000000000

Uploaded patch set 8.

-------------------------------------
author: Kaeden Tapia
date: 2014-07-23 23:06:37.000000000

Patch Set 8: -Code-Review

Ready for review!

-------------------------------------
author: Brenden Conley
date: 2014-07-24 02:54:47.000000000

Patch Set 8:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7919/

-------------------------------------
author: Brenden Conley
date: 2014-07-24 03:44:11.000000000

Patch Set 8: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7919/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2014-07-28 19:31:39.000000000

Patch Set 8: Code-Review-1

(8 comments)

Some comments after a first review

Line:39, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> You should add more info regarding what is "suitable for display". Now that we know what we want, it should be documented somewhere, like here. For example: the metadata file, what it should contain, an example; for each scenario chart, what is the json string format, an example of it, etc.

Also, you could add a link to Jonathan's github, just so we know with what to use those generated results.

Line:91, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Strings like 'jvm', 'build', 'os' and many more below that are repeated or are expected constants in the json files should be extracted to constants, easy to modify if need be.

Line:95, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> debug line

Line:149, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Activator.logError?

Line:157, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> To be fully multi-thread ready, you could do a int numChart = fNumChart++; here and use numChart later on, to avoid surprises.

Line:207, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Here too you could extract fNumOverviewChart to a local variable

Line:350, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> The selected dimension should come from the summary. For example, for performance tests who calculate memory usage, in the addToSummary, the USED_JAVA_HEAP dimension should have been used.

You actually use the summary's dimension when you create the metadata in the createScenarioChart method.

Line:431, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> in the else, date would stay null so you can remove this else.

-------------------------------------
author: Kaeden Tapia
date: 2014-07-28 22:02:26.000000000

Patch Set 8:

(8 comments)

Line:39, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Done

Line:91, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Done

Line:95, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> I thought it was useful to see progress but I guess this is sort of debug.

Line:149, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Done

Line:157, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Running this in multi-thread didn't even cross my mind ;) but I can do this, it's easy enough.

Line:207, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Done

Line:350, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Great! Good catch. I thought we would have to hardcode this all the time but I forgot about the summary entry.

Line:431, lttng/org.eclipse.linuxtools.lttng.alltests/src/org/eclipse/linuxtools/lttng/alltests/PerfResultsToJSon.java -> Done

-------------------------------------
author: Gerrit Code Review
date: 2014-07-30 13:34:15.000000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
