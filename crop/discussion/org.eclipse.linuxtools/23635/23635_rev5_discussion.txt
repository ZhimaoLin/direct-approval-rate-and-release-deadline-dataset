DESCRIPTION

[WIP] tmf: only dispatch events to relevant event providers

When coalescing request across event providers (e.g. Experiment and
traces) then the requests done on the traces are not interested
in events from other requests. Before this patch each implementation
of handleData() had to do this.

Change-Id: I1482c79ef3a0359b9b3526212c4555b57c102650
Signed-off-by: Ricky Reeves <Meredith xxx@xxx.xxx
Signed-off-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2014-03-28 21:52:58.000000000

Uploaded patch set 5.

-------------------------------------
author: Ivy Mitchell
date: 2014-03-28 22:08:46.000000000

Patch Set 5: -Code-Review

This new patch seems to work well, here's some specific test results 

Number of traces coalesced	Master time (seconds)	Original patch (seconds)	New patch (seconds)
1	2.715	2.071	2.104
2	1.785	1.874	1.944
3	1.764	1.62	1.593
4	1.912	1.797	1.743
5	2.195	1.928	1.869
6	2.418	2.141	2.106
7	2.629	2.333	2.261
8	2.879	2.454	2.404
9	3.082	2.784	2.627
11	3.694	2.985	2.845
13	3.98	3.385	3.221
15	4.383	3.82	3.518
17	4.951	4.271	3.868
19	5.149	4.606	4.145
22	5.853	5.553	4.611
25	6.599	5.999	5.566
28	7.348	7.337	6.212
31	8.13	7.676	6.881
35	9.2	8.816	7.399
39	10.237	10.225	7.908
44	11.667	11.864	9.367
49	13.839	13.308	9.977
55	14.755	15.471	11.175
61	16.683	17.027	12.421
68	18.144	19.947	15.198
75	20.236	22.77	16.211
83	22.422	25.967	18.382
92	25.633	31.719	20.404
102	29.077	35.044	23.81
113	33.536	42.5	26.187
125	36.955	48.955	30.047
138	43.026	57.502	35.458
152	48.795	69.68	39.427

-------------------------------------
author: Ivy Mitchell
date: 2014-03-28 22:11:13.000000000

Patch Set 5:

gerrit reflowed my table.

basically we get a log(n) performance gain ranging from 20% - 60% so we scale better.

-------------------------------------
author: Brenden Conley
date: 2014-03-28 23:14:55.000000000

Patch Set 5:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6146/

-------------------------------------
author: Brenden Conley
date: 2014-03-28 23:57:57.000000000

Patch Set 5: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6146/ : SUCCESS

-------------------------------------
author: Ricky Reeves
date: 2014-04-02 11:40:44.000000000

Patch Set 5:

Thank you Matthew for your great effort to improve the performance of this patch. It's a very good idea to cache the requests for each trace so that we limit the number of loop iterations that will call the costly TmfEventProvider.isEventProvidedBy() method. 

Having said that, I would like to update the way the cache is built. I think the upcoming change will improve the readability of the code while keeping the good performance of your idea.

-------------------------------------
author: Ivy Mitchell
date: 2014-04-02 15:18:46.000000000

Patch Set 5:

(1 comment)

oops

Line:339, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> oops

-------------------------------------
