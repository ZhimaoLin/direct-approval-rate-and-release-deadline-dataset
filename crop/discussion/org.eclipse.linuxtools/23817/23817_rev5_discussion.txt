DESCRIPTION

tmf: Fix time graph combo freezing when expanding parent of many items

When expanding an item in the time graph combo, the expanded state of
every child item needs to be synched between the tree and the time
graph, due to inconsistent behavior between platforms. When the parent
has hundreds of child items, this can take several seconds due to the
inefficient searching for the item corresponding to a time graph entry
in both the tree and the time graph, for getting and setting the
expanded state.

For the tree, instead of gettting the expanded state of each item from
the tree viewer using the model element, the set of expanded elements
is retrieved once and the expanded state can be deduced by the presence
or absence of a model element in this set. Furthermore the synching of
expanded state is only performed for child items that have children
themselves.

For the time graph, the item model is changed to use a map from time
graph entry to time graph item, which greatly reduced the time necessary
to find the item corresponding to an entry. The expanded item index is
also stored directly in the item which avoids the need to iterate to
find an expanded time graph entry's index.

Change-Id: Icefc393be8a5e2ee1a98b98a2c6b126da7490035
Signed-off-by: Luciana Barry xxx@xxx.xxx


COMMENTS

author: Gerrit Code Review
date: 2014-03-27 14:15:05.000000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Brenden Conley
date: 2014-03-27 14:15:25.000000000

Patch Set 5:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6116/

-------------------------------------
author: Brenden Conley
date: 2014-03-27 14:36:47.000000000

Patch Set 5: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6116/ : FAILURE

-------------------------------------
author: Brenden Conley
date: 2014-03-27 14:53:36.000000000

Patch Set 5: -Verified

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6117/

-------------------------------------
author: Brenden Conley
date: 2014-03-27 15:35:52.000000000

Patch Set 5: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6117/ : SUCCESS

-------------------------------------
author: Luciana Barry
date: 2014-03-27 15:59:11.000000000

Patch Set 5: Code-Review+2 IP-Clean+1

-------------------------------------
