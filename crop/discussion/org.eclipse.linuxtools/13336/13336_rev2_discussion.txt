DESCRIPTION

lttng: Fix for empty CFV and RV after restart (Bug 409345)

All views in Tmf/LTTng are affected by this problem:

- Extract signal handling of TmfTraceOpenedSignal and
TmfTraceSelectedSignal into TmfView base class. All view that extend
TmfView are updated for that.
- The TmfUml2SDSyncLoader handles now the TmfTraceOpenedSignal
- TmfTrace is now registered as VIP listener for signals

Change-Id: Id0275bb44f72e4a05be8b91699958975c7b108f9
Signed-off-by: Ricky Reeves <Meredith xxx@xxx.xxx

COMMENTS

author: Ricky Reeves
date: 2013-05-29 18:46:57.000000000

Uploaded patch set 2.

-------------------------------------
author: Brenden Conley
date: 2013-05-29 18:47:02.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2533/ 

-------------------------------------
author: Brenden Conley
date: 2013-05-29 19:03:55.000000000

Patch Set 2: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2533/ : SUCCESS

-------------------------------------
author: Luciana Barry
date: 2013-05-29 19:35:59.000000000

Patch Set 2: (1 inline comment)



Line:60, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/TmfView.java -> I guess Sonar will complain about this protected member (and those above) to create an accessor for it. How about keeping the fTrace member in the individual views, and below change the new method to loadTrace(signal.getTrace()). Or add the accessor and have them do fTrace = getTrace(). A private copy is still needed here to prevent unnecessary loadTrace on trace selected after trace opened.

-------------------------------------
author: Luciana Barry
date: 2013-05-29 19:42:45.000000000

Patch Set 2: Looks good to me, but someone else must approve; IP review completed



-------------------------------------
author: Braxton Mccarthy
date: 2013-05-30 17:14:25.000000000

Patch Set 2: Verified; Looks good to me, but someone else must approve; IP review completed

(4 inline comments)

Looks good, the views are now populated correctly. Had some minor comments, not even worthy of a -1 hehe

Line:7, /COMMIT_MSG -> The change now affects the "tmf" feature more than lttng. Not really important...

Line:60, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/TmfView.java -> I think it's better to have fTrace here (since potentially all views should keep track of a fTrace), but you're right, it should be private and have protected getter/setter.

Other fields above are already protected, so whoever will do Sonar fixes in this class will have to fix them ;)

Line:182, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/TmfView.java -> Perhaps this method could be abstract (with TmfView abstract too), so that somebody implementing a new view wouldn't forget to implement this. But it doesn't really matter...

Line:728, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/trace/TmfTrace.java -> This could go in the TmfSignalTraceManager?

-------------------------------------
author: Ricky Reeves
date: 2013-05-30 17:36:05.000000000

Patch Set 2: (3 inline comments)



Line:7, /COMMIT_MSG -> Done

Line:182, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/TmfView.java -> No, it's better to have a default implementation so that sub-classes don't need to implement them. See FilterView or ColorView which don't do anything when receiving a signal.

Line:728, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/trace/TmfTrace.java -> I'll update the register/registerVIP methods to first deregister from the other list before registering again. This makes this method obsolete.

-------------------------------------
