DESCRIPTION

tmf : add stream compression for the HTInterval.

Use a Varint implementation to save 30% of the size of the historytree file.

Change-Id: I325c15ec343d8ed6a98581e937267f1da19e09fb
Signed-off-by: Ayanna Reed xxx@xxx.xxx


COMMENTS

author: Ayanna Reed
date: 2014-04-15 22:25:56.000000000

Uploaded patch set 2.

-------------------------------------
author: Ayanna Reed
date: 2014-04-15 22:30:58.000000000

Patch Set 2:

I haven't mentioned performance's results. I noticed an improvement in the speed of the build of 8%, we use less the disk. -> I will add a note in the commit message in the next PS.

-------------------------------------
author: Brenden Conley
date: 2014-04-16 02:16:03.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6470/

-------------------------------------
author: Brenden Conley
date: 2014-04-16 03:08:13.000000000

Patch Set 2: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6470/ : SUCCESS

-------------------------------------
author: Ivy Mitchell
date: 2014-04-16 03:12:15.000000000

Patch Set 2: Code-Review-1

This is very interesting, I will assume it can boost the speed of experiments a lot. 

the code is not yours though and needs to be cqed I think. Genevieve, could you please look into this?

-------------------------------------
author: Ivy Mitchell
date: 2014-04-16 11:03:47.000000000

Patch Set 2:

gotta note, the code is apache and contains no encryption, so the cq should be less painful

-------------------------------------
author: Annalise Jimenez
date: 2014-04-16 17:45:04.000000000

Patch Set 2:

(1 comment)

Line:10, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/StreamEncoder.java -> Do you have to keep the original license and class naming if all the code comes from an external file?

Florian, did you change anything else in this class, or just the name and the license?

-------------------------------------
author: Ayanna Reed
date: 2014-04-16 18:24:41.000000000

Patch Set 2:

(1 comment)

Line:10, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/StreamEncoder.java -> I use this file ; https://github.com/addthis/stream-lib/blob/master/src/main/java/com/clearspring/analytics/util/Varint.java
The original license is Apache.


I have change the class name and I use a java.nio.ByteBuffer in place of java.io.DataInput and java.io.DataOutput.

-------------------------------------
author: Ivy Mitchell
date: 2014-04-18 15:10:28.000000000

Patch Set 2: Code-Review-2

I am putting a temporary -2 until the problem is solved. Florian, we love you, this is only to avoid accidentally comiting this code.

-------------------------------------
author: Annalise Jimenez
date: 2014-04-24 20:26:12.000000000

Patch Set 2: Code-Review-2

Ok, I'll take care of the CQ for this, alex told me how to do it and I'm agree I will do it :p

-------------------------------------
author: Ivy Mitchell
date: 2014-04-24 20:26:13.000000000

Patch Set 2: -Code-Review

giving the positions of -2 holder to genevieve. Live long and propser

-------------------------------------
author: Ivy Mitchell
date: 2014-07-11 01:49:54.000000000

Patch Set 2:

any news here? it could help performance a bit where we need it.

-------------------------------------
author: Ayanna Reed
date: 2014-07-11 07:06:12.000000000

Patch Set 2:

I think it can be very interesting to add the varint support to TMF. But I'm not sure if this code is the best in term of licence to be intergred quickly. 

For the performance, I'm not sure if we can have a gain with this kind of patches, because actually the time spent in Read/Write on disk is ridiculous in comparision of the creation/destruction of each java object use in TMF.

However, we can reduce by 3 size of the historytree file on disk. I think is very good because, we have less problem with the limit of the node size when we have a lot of attribute in the SS.

-------------------------------------
author: Erick Ross
date: 2015-03-06 21:01:47.000000000

Abandoned

Lttng module is separate project now. Consider submitting your patch to
https://projects.eclipse.org/projects/tools.tracecompass .

-------------------------------------
