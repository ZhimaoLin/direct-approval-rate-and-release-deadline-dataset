DESCRIPTION

ctf: Make CTFTrace and its reader classes AutoCloseable

Basically just replace their dipose() method with close(). This
small change allows us to benefit from the compiler warnings for
when a resource is allocated locally in a method but never disposed.

Which then allows to find leaks. Many leaks ! Many tests were leaking
CTFTraceReaders and the like, but the biggest offender is probably the
validation methods in LttngKernelTrace and LttngUstTrace: trying to
validate a non-CTF trace could potentially leak a number of file
descriptors equal to the number of files in that trace(!)

Change-Id: I7e54416b608992a14a7bfd3cd29ffb8dc3cee898
Signed-off-by: Braxton Mccarthy xxx@xxx.xxx


COMMENTS

author: Braxton Mccarthy
date: 2014-04-15 23:19:50.000000000

Uploaded patch set 2.

-------------------------------------
author: Brenden Conley
date: 2014-04-16 03:03:59.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6472/

-------------------------------------
author: Brenden Conley
date: 2014-04-16 03:56:12.000000000

Patch Set 2: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6472/ : SUCCESS

-------------------------------------
author: Ivy Mitchell
date: 2014-04-16 04:38:00.000000000

Patch Set 2: Code-Review+1

(1 comment)

Line:31, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/headless/ReadTrace.java -> needs fixing

-------------------------------------
author: Braxton Mccarthy
date: 2014-04-16 22:35:36.000000000

Patch Set 2: Code-Review+2

-------------------------------------
