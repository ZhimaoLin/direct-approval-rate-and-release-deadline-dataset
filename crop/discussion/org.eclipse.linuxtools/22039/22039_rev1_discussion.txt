DESCRIPTION

Systemtap: Fix errors with opening .stp files.

Prevent editor errors caused by opening out-of-workspace .stp
files, or by using OpenFileAction to open any .stp file:

-PathEditorInput's getAdapter(Class) now returns a default adapter,
allowing out-of-workspace files to open properly with it.
(Resolves EBZ #428149.)

-OpenFileAction now behaves like Eclipse's OpenLocalFileAction,
meaning that it uses default behaviour to choose the appropriate
input & editor type. This also means that File->Open File... and
the "Open" button on the Systemtap toolbar now choose the same
kind of editor to use for a .stp file.

Also, allow PathEditorInput to be a persistable element, so editors
won't be marked as changed when all edits are undone.

Change-Id: If526eb4459efce5caa906e6cf18298d579751942
Signed-off-by: Landon Wilkins xxx@xxx.xxx


COMMENTS

author: Landon Wilkins
date: 2014-02-14 22:03:46.000000000

Patch Set 1:

An issue with this patch is that out-of-workspace .stp files can't be run with the Ctrl+F11 shortcut, and their editors' context menus don't show the "Run Configurations" option. 

This is because the file's doc provider now sees the it as an outside file, and Eclipse defaults to using "outside" launch options (Any builds).

Using a Run Configuration on an out-of-workspace Systemtap file is still possible (it's still available in any STPEditor's context menu), but it's slightly less immediate than before.

-------------------------------------
author: Brenden Conley
date: 2014-02-14 22:24:11.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5506/

-------------------------------------
author: Brenden Conley
date: 2014-02-14 23:14:19.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5506/ : SUCCESS

-------------------------------------
author: Landon Wilkins
date: 2014-02-17 14:12:39.000000000

Patch Set 1: Code-Review-1

Undoing all unsaved changes in a non-workspace .stp file doesn't unmark it as unchanged (* in editor doesn't go away), and opening the same .stp file with the Open toolbar button and the "Open File..." item in the menu bar still opens two identical editors rather than using the same editor for both actions.

-------------------------------------
author: Gerrit Code Review
date: 2014-02-27 15:01:34.000000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
