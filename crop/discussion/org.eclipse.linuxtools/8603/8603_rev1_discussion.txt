DESCRIPTION

Fix initial trace time range.

The initial start time of TmfTrace is set to BIG_BANG so that the
initial time range is equal to NULL_RANGE. This allows to prevent
unnecessary histogram requests when a trace is opened.

Since its base class defaults to NULL_RANGE, it is no longer necessary
to explicitly set it in the TmfExperiment constructor.

Unit tests updated accordingly.

A fix is implemented in custom traces for possible NullPointerException
that uncovered this issue.

Change-Id: Ib1e49f372e1c5b1eaa3aecb972cc2b3830b3fbe3


COMMENTS

author: Brenden Conley
date: 2012-11-08 16:32:08.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/543/ 

-------------------------------------
author: Brenden Conley
date: 2012-11-08 16:44:28.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/543/ : SUCCESS

-------------------------------------
author: Braxton Mccarthy
date: 2012-11-12 15:54:33.000000000

Patch Set 1: Looks good to me, but someone else must approve

From what I understood, the start time is initially set to the latest possible time first, and then goes back as we find events that happen earlier than the registered start time (ie, it's not merely taking the timestamp of the first event for start time).

This allows it to handle the case where events are not ordered, and you have an event further in the trace that has a timestamp *before* the first event. Then the trace's start time gets updated.

It pains me (I'd like the start time to be a final value set at the constructor ;) ), but if we want to support this case I don't see how we can do it.

-------------------------------------
author: Braxton Mccarthy
date: 2012-11-12 15:54:49.000000000

Patch Set 1: No score



-------------------------------------
author: Luciana Barry
date: 2012-11-12 16:05:05.000000000

Patch Set 1:

Reply to Alexandre's comments

The behavior you describe is unchanged even if the start time is initialized to BIG_BANG, because the method updateAttributes covers both cases: it updates the start time if new time < current start time OR if current start time == BIG_BANG.

-------------------------------------
author: Braxton Mccarthy
date: 2012-11-12 16:44:47.000000000

Patch Set 1: Verified; Looks good to me, but someone else must approve; IP review completed

Oh ok, I missed that. Sounds good to me then, it also makes more sense. I tested it and couldn't make it break so I guess it's good stuff!

For the future, commit titles should not have a period at the end.

-------------------------------------
author: Ricky Reeves
date: 2012-11-15 19:34:16.000000000

Patch Set 1: Looks good to me, but someone else must approve; IP review completed



-------------------------------------
author: Luciana Barry
date: 2012-11-15 20:45:37.000000000

Patch Set 1: Verified; Looks good to me, approved; IP review completed



-------------------------------------
