DESCRIPTION

[TMF] Optimize TimeGraphControl.drawState() method.

Gain on Linux after optimization is about 25%.
Note that it changes a bit the way events are displayed.

Change-Id: I0ff437c0d4ba832de73d6deb04c381015393617d
Signed-off-by: Bryce Kline xxx@xxx.xxx


COMMENTS

author: Bryce Kline
date: 2014-01-14 09:16:02.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2014-01-14 09:16:07.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5028/

-------------------------------------
author: Brenden Conley
date: 2014-01-14 09:56:07.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/5028/ : SUCCESS

-------------------------------------
author: Luciana Barry
date: 2014-01-14 19:41:07.000000000

Patch Set 3: Code-Review-1

(1 comment)

Line:1710, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/widgets/timegraph/widgets/TimeGraphControl.java -> After trying it, we would prefer that the black highlighting would be drawn with two lines. The reason is that when the 'real' state interval extends beyond the window limits, a rectangle highlighting gives the false impression that the state starts and ends at the window edges.

We tested this code which seems ok:

 gc.drawLine(rect.x, rect.y - 1, rect.x + rect.width - 1,  rect.y - 1);
 gc.drawLine(rect.x, rect.y + rect.height, rect.x + rect.width - 1,  rect.y + rect.height);

Or I guess alternatively you could draw the highlighting rectangle first then fill the state color which would overwrite the left and right edges...

-------------------------------------
author: Bryce Kline
date: 2014-01-16 08:57:45.000000000

Patch Set 3:

(1 comment)

Line:1710, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/widgets/timegraph/widgets/TimeGraphControl.java -> Done

-------------------------------------
author: Gerrit Code Review
date: 2014-01-17 08:28:18.000000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
