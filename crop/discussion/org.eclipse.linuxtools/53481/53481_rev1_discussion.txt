DESCRIPTION

Bug 474606 - Allow for search and pull images from the Docker Explorer view

Change-Id: I83c086c4aa8a8e73c3364a885cefcdb2d36cb7f8


COMMENTS

author: Zechariah Krause
date: 2015-08-10 13:02:29.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2015-08-10 13:02:35.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/9796/

-------------------------------------
author: Brenden Conley
date: 2015-08-10 13:25:20.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/9796/ : SUCCESS

-------------------------------------
author: Nathanael Holden
date: 2015-08-10 17:37:31.000000000

Patch Set 1: Code-Review-1 Verified-1

(3 comments)

There's a few things to fix in the code that I've found so far, but I also have some issues how the new wizard functions :

With the old Image Pull Wizard, it was possible to pull a very specific Image (eg. 'fedora:20'). With the new one, I can only select the official 'fedora' option, which pulls fedora:20, fedora:21, fedora:22, and fedora:rawhide.

Also, attempting to even search for 'fedora:20' triggers an NPE, likely because passing ':' in the query string causes searchImage to throw some error.

Line:806, containers/org.eclipse.linuxtools.docker.ui/plugin.xml -> Would it also make sense to have "Pull Image" also appear for selecting the IDockerConnection itself ? Even from that context, the intent is clear.

Line:26, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/ImagePullPage.java -> Since this is internal, we can simply remove the class.

Line:15, containers/org.eclipse.linuxtools.docker.ui/src/org/eclipse/linuxtools/internal/docker/ui/wizards/ImagePull.java -> Since this is internal, we can simply remove the class.

-------------------------------------
author: Nathanael Holden
date: 2015-08-10 17:42:55.000000000

Patch Set 1:

I don't know if search has the ability to display the tags for an image but I think we should preserve the old functionality.

Also searching from the commandline with a ':', yields : FATA[0000] Error response from daemon: Invalid repository name (fedora:20), only [a-z0-9-_.] are allowed , so maybe we should validate the input passed to the search field.

-------------------------------------
author: Zechariah Krause
date: 2015-08-11 09:02:10.000000000

Patch Set 1:

(1 comment)

Thanks for your review, Roland. I have to see how I can fix the problem with the image version, since the Search API does _not_ return any tag (see https://docs.docker.com/docker/reference/api/docker_remote_api_v1.19/#search-images). So yes, assuming "latest" by default makes sense, as weel as allowing a specific version.

Line:806, containers/org.eclipse.linuxtools.docker.ui/plugin.xml -> Agreed, I'll add that case, too.

-------------------------------------
author: Zechariah Krause
date: 2015-08-11 11:46:25.000000000

Patch Set 1:

Roland, please take a look at https://bugs.eclipse.org/bugs/show_bug.cgi?id=474667#c1 and let me know if this makes sense to you. If so, I suggest that I update this patch once the Spotify client has been updated and released.

-------------------------------------
author: Gerrit Code Review
date: 2015-08-19 17:40:59.000000000

Change has been successfully cherry-picked as c2a2ca8efb3c3fd1825f412e49810f2a84cc62f9 by Nathanael Holden

-------------------------------------
