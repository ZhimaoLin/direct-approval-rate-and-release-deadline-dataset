DESCRIPTION

[TMF][RFC] Batch Trace Import

Added a batch trace import wizard

Change-Id: I32bfa9c8f49e00d7e6741500c914f2816f4d7834
Signed-off-by: Ivy Mitchell xxx@xxx.xxx
Signed-off-by: Alivia Ritter xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2013-05-01 17:43:09.000000000

Uploaded patch set 10.

-------------------------------------
author: Brenden Conley
date: 2013-05-01 17:43:14.000000000

Patch Set 10:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2153/ 

-------------------------------------
author: Brenden Conley
date: 2013-05-01 17:57:53.000000000

Patch Set 10: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2153/ : SUCCESS

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-01 18:30:22.000000000

Patch Set 10: (49 inline comments)

First round of comments.

Also, I think the new package name should be wizards.import. We can't really import anything other than traces...

Line:69, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPageScan.java -> section-type comments are a good idea, but they should be of the type

  // --------
  // Stuff
  // --------

Line:107, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPageScan.java -> no!

Line:40, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPageSelectDirectories.java -> add empty line below

Line:170, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPageSelectDirectories.java -> auto-formatted comment completely lost its meaning. could be remove completely.

Line:19, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceToValidate.java -> space before {

Line:21, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceToValidate.java -> private final

Line:19, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> Add a description

Line:26, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> private final

Line:96, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> no!

Line:43, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/AbstractImportTraceWizardPage.java -> put an empty line between each field

Line:100, lttng/org.eclipse.linuxtools.tmf.ui/plugin.properties -> Should be "Batch Import..."

Line:37, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> public final

Line:42, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Should be exernalized. They are probably already defined somewhere, you can re-use that.

Line:54, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Now it's fine, but if we end up adding something in this class that depends on ImportUtils itself, it will cause a circular dependency and be unable to load.

You should initialize it to null, and in the getInstance():
  if (fInstance == null) {
    fInstance = new ImportUtils();
  }
  return fInstance;

Line:60, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Add a description too

Line:71, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Description too plz

Line:74, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Do you *really* need to return an array here? (I ask since it's not an interface method). If all you do is iterate on it, you could return a Set and not have to create a new container every time.

Line:81, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> ctrl+shift+f the file

Line:91, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Description

Line:142, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Description

Line:151, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Write real doc, or remove the comment

Line:191, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> externalized

Line:195, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Descritpion

Line:209, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Description

Line:226, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Minor detail, but this method could be closer to the start of the file, with the constructor and getInstance()

Line:263, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Description, and all methods below too

Line:270, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> this seems a bit weird to create an array every time we validate. Could it be done the other way around? as in, have a validate method with 1 trace as parameter, and in the method that takes an array, call the first method for each element in the array.

Line:47, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/handlers/ImportTraceHandler.java -> ctrl+shift+f

Line:11, lttng/org.eclipse.linuxtools.tmf.ui/.settings/.api_filters -> woah woah, why was an API filter set for this? We have one for the UnsortedPropertySheetPage, and it's documented why with the Eclipse bug #. 

What are those new filters there for?

Line:139, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPageSelectTraceType.java -> else on same line

Line:171, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPageSelectTraceType.java -> here too

Line:30, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceContentProvider.java -> Applicable for all files too, try to delete the empty line xxx@xxx.xxx it's useless.

  xxx@xxx.xxx Bozo
  xxx@xxx.xxx 2.0
  */

Line:34, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceContentProvider.java -> should be private too, with a getter if needed

Line:36, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceContentProvider.java -> Add empty line above, and description

Line:54, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceContentProvider.java -> R

Line:25, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/CElement.java -> space before {

Line:27, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/CElement.java -> private final

Line:94, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/CElement.java -> no suppresswarning was needed here?

Line:35, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/NonModalWizard.java -> this should be private, and have a setter if needed

Line:60, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/NonModalWizard.java -> Add a description too (can be a copy-paste of the line below...)

Line:77, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/NonModalWizard.java -> B

Line:101, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/NonModalWizard.java -> if the class can be private, it should be

Line:130, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardPage.java -> why extra lines?

Line:111, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/Messages.java -> those should go in a separate Messages.java file in the new package (so you won't xxx@xxx.xxx to every one of them).

Line:11, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceTypeContentProvider.java -> applicable for all files, but try to keep an empty line between ***** and "package"

Line:22, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceTypeContentProvider.java -> Add some description, can be short

Line:28, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceTypeContentProvider.java -> private final

Line:32, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/FileAndName.java -> you can copy-paste the the comment type in TmfTrace

Line:130, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/FileAndName.java -> kill it! kill it with fire!

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-01 18:42:14.000000000

Patch Set 10: I would prefer that you didn't submit this



-------------------------------------
author: Kaeden Tapia
date: 2013-05-01 20:30:58.000000000

Patch Set 10: (10 inline comments)



Line:130, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/AbstractImportTraceWizardPage.java -> Did you mean methods?

Line:95, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/handlers/ImportTraceHandler.java -> It seems unnecessary to check this, just return traceFolder even if it's null.

Line:123, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> It this necessary? The init() method javadoc says "This method is called after the no argument constructor and before other methods are called." Which means this will be empty anyway.

Line:124, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Same here.

Line:189, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Perhaps you meant to log this exception or just swallow it?

Line:191, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Same here.

Line:216, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Is this too heavyweight to run on the UI thread? Not sure...

Line:294, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Maybe combine the two ifs?

Line:541, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Got this exception, not sure what to do about it as we discussed. Perhaps it should display "Only first X results are displayed. Refine your search by selecting a subdirectory".
Caused by: java.lang.IllegalStateException: Queue full
	at java.util.AbstractQueue.add(AbstractQueue.java:71)
	at java.util.concurrent.ArrayBlockingQueue.add(ArrayBlockingQueue.java:209)
	at org.eclipse.linuxtools.tmf.ui.project.wizards.importtrace.BatchImportTraceWizard.updateFiles(BatchImportTraceWizard.java:541)

Line:111, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/Messages.java -> I don't think any of the messages in this file are used. If I remove them I get no errors.

-------------------------------------
