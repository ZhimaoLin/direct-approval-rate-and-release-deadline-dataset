DESCRIPTION

Tmf: Batch Trace Import

Added a batch trace import wizard

Change-Id: I32bfa9c8f49e00d7e6741500c914f2816f4d7834
Signed-off-by: Ivy Mitchell xxx@xxx.xxx
Signed-off-by: Alivia Ritter xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2013-05-01 22:43:57.000000000

Uploaded patch set 14.

-------------------------------------
author: Brenden Conley
date: 2013-05-01 22:44:02.000000000

Patch Set 14:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2164/ 

-------------------------------------
author: Ivy Mitchell
date: 2013-05-01 22:44:57.000000000

Patch Set 14: Verified; Looks good to me, approved; IP review completed

I can vouch for this, I need someone else to push though to spread the blame. :)

-------------------------------------
author: Brenden Conley
date: 2013-05-01 22:58:29.000000000

Patch Set 14: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2164/ : SUCCESS

-------------------------------------
author: Ricky Reeves
date: 2013-05-02 12:29:10.000000000

Patch Set 14: I would prefer that you didn't submit this

The feature looks good. 

However, I have still some issues with the ImportUtil. I've already commented on that on patch set 5. This class has trace type specific utility methods. In TMF there are already classes that also do similar things. Actually, some things are basically the same. This duplication of utilities means having to maintain multiple APIs. If we have to change something for some reason, we have to change it in multiple places.

See content of following classes:
org.eclipse.linuxtools.tmf.ui.project.model.TmfTraceType.java org.eclipse.linuxtools.tmf.ui.project.wizards.importtrace.ImportUtil.java
org.eclipse.linuxtools.internal.tmf.ui.project.handlers.SelectTraceTypeHandler.java
org.eclipse.linuxtools.tmf.ui.project.model.TmfTraceElement.java
org.eclipse.linuxtools.internal.tmf.ui.project.handlers.DropAdapterAssistant.java

I think there should be only one Utility class to handle the trace type (e.g. in TmfTraceType.java). If we decide to deliver the batch import feature in Kepler, we have to fix duplication of code for Kepler.

-------------------------------------
author: Ivy Mitchell
date: 2013-05-02 13:37:46.000000000

Patch Set 14: Looks good to me, but someone else must approve



-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 14:54:28.000000000

Patch Set 14: Do not submit

(16 inline comments)

Putting -2 at Matthew's request ;)

Still in some files:
- empty line before "package"
- Description to Javadoc methods (many were fixed though, thanks)

Also said in a previous patch set, I think the package name should be wizard.import instead of wizard.importtrace. Package names are usually just one word.

Line:20, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceToValidate.java -> I would call this TraceValidation or something similar. It's not a trace itself, it's an object used to validate traces

Line:105, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardSelectDirectoriesPage.java -> remove comment if this is not used

Line:169, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardSelectDirectoriesPage.java -> which bug? Link to bug # please. If not it's not technically a bug ;)

or remove the comment

Line:11, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> empty line before package.

applies to all files

Line:28, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> private final

Line:33, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> Description

Line:81, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/TraceType.java -> ctrl+shift+f

Line:42, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Specify in the javadoc if/why this string should not be externalized. At first glance, it looks like a string that is shown in the UI.

Line:98, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> G

Line:205, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> Returns the list...

Line:287, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> once again,

The method to validate a single trace should have the test itself, and the method that takes an array in parameter should call it for every element in the array.

Line:292, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> V

Line:303, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> V

Line:326, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportUtils.java -> this code here should go in the validate() method

Line:23, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/Messages.java -> empty line

Line:41, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/Messages.java -> empty line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:29.000000000

Patch Set 14: (15 inline comments)

Couple more style comments. Will try running it next.

Make sure you review the patch (with egit or gitk etc.) before pushing it, some stuff is very easy to catch (missing lines, missing descriptions)

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:15:58.000000000

Patch Set 14:

Also check compiler warnings. I'm getting an unused variable, and a more mysterious:

Referenced identifier 'org.eclipse.ui.file.batch_import' in attribute 'commandId' cannot be found	plugin.xml	/org.eclipse.linuxtools.tmf.ui	line 689	Plug-in Problem

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:32:14.000000000

Patch Set 14: I would prefer that you didn't submit this

Now trying the functionality...

One thing for sure, this feature is very useful! It will definitely save time when one wants to import many traces at the same time.

Small comments:
- Would it be possible to make the window bigger by default? With the options at the bottom, we always have to resize it manually to see anything.
- "Select None" should be "Unselect All" (that's what we use in the time chart filters)
- A clear button on the page with the list of paths
- Important: There should be a spinner or something indicating that the background thread is working when parsing. If the path is long, we don't see the end of the path changing because it goes outside of the window.
- When a name conflict is indicated (red icon in the list), a message should be displayed saying what this red icon means, and why the Finish button is disabled. Either in the top part of the window, or on the line itself.

I'd be fine with having these tweaks done in separate patches afterwards, but we should at least discuss them.

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:56, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardScanPage.java -> remove line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:65, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardScanPage.java -> private final!

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:103, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardScanPage.java -> use // ----- type comments here too

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:196, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardScanPage.java -> here too

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:400, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardScanPage.java -> this should go on the previous line

 });

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:406, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceWizardScanPage.java -> { on same line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:32, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/internal/tmf/ui/project/handlers/BatchImportTraceHandler.java -> remove line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:42, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/FileAndName.java -> remove line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:83, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/FileAndName.java -> Description

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:119, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/FileAndName.java -> it's not really helper methods here. You could say 
 // ----
 // Comparable
 // ----
and
 // ----
 // Object
 // ---

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:61, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> remove line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:97, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> Description.

Constructor/init should be above class methods

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:472, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/BatchImportTraceWizard.java -> descriptions...

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:23, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/wizards/importtrace/ImportTraceLabelProvider.java -> remove line

-------------------------------------
author: Braxton Mccarthy
date: 2013-05-02 15:09:28.000000000

MISMATCHED INLINE COMMENT
Line:210, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/model/TmfTraceElement.java -> ctrl+shift+f

-------------------------------------
