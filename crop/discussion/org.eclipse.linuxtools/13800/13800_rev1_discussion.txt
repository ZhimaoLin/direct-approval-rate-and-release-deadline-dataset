DESCRIPTION

[TMF-RFC]: Can select a time range in time graph control, without zooming

This selection feature allow to select a time range in a time graph control
without zooming in the range.  All other views will be notified of the time
range change, and will display this time range, but the original view will
have the time selection highlighted only, not zoomed.
It is useful to keep a full view of the trace, while being able to get
statistics or other information for the interesting part of it.

To select a time range in the view, either press the Ctrl key while selecting
time with left mouse button, or press the arrow icon in the action icons of the
view.

I would like to get some feedback on this feature, how should the selection
behave, how should the originating view behave when it receives time signals
from other views, etc.  For now, any other events cancels the selection.

Change-Id: I6a39c9b15e19d08f4b0218f61dc919c362976f2f
Signed-off-by: Aryana Jones xxx@xxx.xxx


COMMENTS

author: Brenden Conley
date: 2013-06-13 17:22:16.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2714/ 

-------------------------------------
author: Brenden Conley
date: 2013-06-13 17:36:48.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2714/ : SUCCESS

-------------------------------------
author: Bryce Kline
date: 2013-06-14 07:25:20.000000000

Patch Set 1:

It's very nice to see you are working on that ! Many thanks.

Hera at Kalray, I've built a trace viewer on top of TMF, and this kind of feature is often requested by users. However, they request something slighly different:

- They want to select a timezone
- They want to see (in the status bar), the start date, end date, and duration of the selection.
- They DO NOT want other views to zoom to selection.

Xavier

-------------------------------------
author: Annalise Jimenez
date: 2013-06-17 19:12:37.000000000

Patch Set 1:

Hi Xavier,

Thanks for your feedback.  Here's some specifics

>  They want to select a timezone

This is a feature I think the people are Ericsson are working on.  It won't be with this patch.

> They want to see (in the status bar), the start date, end date, and duration of the selection.

That could be added

> They DO NOT want other views to zoom to selection.

What DO they want to happen?  Should all the views have the same start/end and show the same selection as the view it was made from?  

I'm not sure either what should happen...

-------------------------------------
author: Bryce Kline
date: 2013-06-18 08:38:19.000000000

Patch Set 1:

Hi Genevieve

I did not know that Ericsson people are working on a timezone selection. That's another great news!

So, I do not know if my comments apply to your proposal.
We just need a way to calculate duration between two points of a timechart easily. In this context, timezone selection should be reflected in all timecharts. But once again, it perhaps do not apply to your proposal.

-------------------------------------
author: Ricky Reeves
date: 2013-06-18 12:46:10.000000000

Patch Set 1:

Hi Xavier and Genevieve

Just to clarify, we at Ericsson don't work on the timezone selection for the Time Graph Widgets. However, we updated the time format preferences to be able to select the timezone for all timestamp that implements ITmfTimestamp (used in e.g. Events Table, Histogram, Sequence Diagram Framework). This will be pushed soon after the Kepler release. Please note that the time graph scale which is used in the views that uses the time graph widgets (e.g. ControlFlowView) doesn't use the time format preferences. It has it's own implementation for formatting the timestamp, and hence it's not impacted by the new timezone preference.

Meredith Scott

-------------------------------------
author: Luciana Barry
date: 2013-06-21 22:05:39.000000000

Patch Set 1:

We also received an internal request for a similar feature. I plan to work on it and provide an updated patch.

Here is what I would propose:

Mouse handling in time graph:
- Left-button drag sets a selection range
- Middle-button drag moves the view left or right
- Right-button drag zooms to selection (like today)
- Ctrl-left-button does the same as middle button for mouse with only two buttons
- Left-click sets a single-time selection
- Shift-click sets the selection range 'other' time
- Left-button drag when cursor is close to one of the selection range limits modifies that selection time

Cursor and selection time display:
- Cursor position time shown in status bar when moving mouse
- Selection start/end/duration shown in status bar

Selection and zoom range synchronization:
- Selection range provided in time synch signal
- Zoom range provided in range synch signal
- Selection range does not affect and is independent from the zoom range

Statistics View
- "Events in selected time range" column uses the selection range instead of zoom range

Event table:
- Support event range selection with shift-click to 'other' event

Histogram View:
- Highlight the selection range
- Support range selection with shift-click

-------------------------------------
author: Annalise Jimenez
date: 2013-06-25 14:20:05.000000000

Patch Set 1:

Nice spec for this feature, that makes sense.

I'd add this to mouse handling in time graph view
- Double-click in selection, zoom on it

And just to be clear, the timeSynchSignal will also now have a time range and not just a timestamp?

Patrick, will you be taking over this patch?  Or should I work on it to make it respect [some of] this spec?

-------------------------------------
author: Luciana Barry
date: 2013-06-25 20:09:29.000000000

Patch Set 1:

The double-click feature could be useful but it should be possible to disable it if a user wants to implement a different double-click action.

The time synch signal could now carry a range, or a second time stamp, depending on the amount of API-breakage we want...

I'm planning to provide an updated patch that builds on the first proposed implementation.

-------------------------------------
author: Bryce Kline
date: 2013-06-26 14:14:07.000000000

Patch Set 1:

+1

Thanks Patrick

-------------------------------------
author: Braxton Mccarthy
date: 2013-07-04 22:24:28.000000000

Patch Set 1:

Patrick push a (completely) new version at https://git.eclipse.org/r/#/c/14292/, mistakenly creating a new entry on Gerrit.

I wasn't sure if this one was now completely obsolete...

-------------------------------------
author: Annalise Jimenez
date: 2013-07-08 13:10:20.000000000

Abandoned

New and more complete patch here:
https://git.eclipse.org/r/#/c/14292/

-------------------------------------
