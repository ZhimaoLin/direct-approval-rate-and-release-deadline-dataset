DESCRIPTION

Add 2D queries support in the HistoryTreeBackend.

We allow to make automatic range 2D queries in the History Tree.
For the standard HistoryTree, it means that we query the complete branch that intersects a time.
The result is a TmfStateIntervalList that contains the intervals list, the begin and the end time of this query.

2D query will populate the view by asking the backend a list of intervals that suits its.
This method is a thread safe adaptation of "dynamic cache" implements in the patch : https://git.eclipse.org/r/#/c/19330/.
For the history tree backend, the range is the size of the leaf for the query's time.

Change-Id: Ifc104d70c472fe6e878780ff19f277145b8a2429
Signed-off-by: Ayanna Reed xxx@xxx.xxx


COMMENTS

author: Ayanna Reed
date: 2013-12-10 20:15:06.000000000

Uploaded patch set 7.

-------------------------------------
author: Brenden Conley
date: 2013-12-10 22:14:56.000000000

Patch Set 7:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4564/

-------------------------------------
author: Brenden Conley
date: 2013-12-10 22:18:13.000000000

Patch Set 7: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4564/ : ABORTED

-------------------------------------
author: Jordon Obrien
date: 2013-12-11 06:29:27.000000000

Patch Set 7:

(8 comments)

moar comments.

Line:23, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> The StateIntervalList* represents

rename it

Line:25, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> returned by -> populated by

Line:57, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> this comment should be updated.

Retrieve the start time of the intervals list.

->

Retrieve the start time of the snapshot.

or

Retrieve the start time of the intervals snapshot.

Line:102, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> I don't get why you need setStartTime/setEndTime if the addIntervals keep track of the interval ranges.

Line:119, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> intersecting*

and the attribute -> for a given attribute

Line:151, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> Why is this needed?
As much as possible, don't exposed implementation details.

You will get stuck with the list implementation.
Which is bad.

Line:190, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HistoryTreeBackend.java -> thanks!

Line:165, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/IStateHistoryBackend.java -> I don't get this one

   'currentStateInfo' is an "out" parameter, that is, write to it the needed information and return.

I believe you mean

  'currentStateInfo' received the requested intervals.

received -> told you the notion of "out".
requeted -> results of the query
intervals -> the kind of data

Comments should be structured to get to the point efficiently.

-------------------------------------
author: Annalise Jimenez
date: 2013-12-11 15:25:52.000000000

Patch Set 7: Code-Review-1

(8 comments)

Some comments, haven't tried it yet.

Line:14, /COMMIT_MSG -> A line in the commit message should have at most 80 characters

Line:24, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> can be queried*

Line:35, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> Fields name usually start with f, so fStart.

Line:40, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> fEnd

Line:100, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/interval/TmfStateIntervalSnapshot.java -> If you add only one interval, call the function addInterval without s

Line:172, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/IStateHistoryBackend.java -> It is not a list, but something class containing among other things a list I suppose.

Line:324, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HTNode.java -> Remove "The method to" and describe the "stateInfo" into a sentence
Like "Fill up (or Initialize or Populate) the state information (or snapshot) for this node for the purpose of... what?"

Line:329, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/internal/tmf/core/statesystem/backends/historytree/HTNode.java -> It is a TmfStateIntervalSnapshot, not a list.  How would you describe that?

-------------------------------------
author: Ivy Mitchell
date: 2014-03-11 22:05:01.000000000

Patch Set 7:

this patch has been sitting around for a while, should we go forward with it or abandon it or leave it on gerrit for others to wonder about it?

-------------------------------------
author: Kaeden Tapia
date: 2014-05-01 15:19:55.000000000

Abandoned

Abandoning for now. You can restore it if necessary but there doesn't seem to be much interest at this moment.

-------------------------------------
