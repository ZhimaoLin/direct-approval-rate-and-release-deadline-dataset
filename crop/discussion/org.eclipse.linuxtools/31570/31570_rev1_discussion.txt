DESCRIPTION

lttng-control: Workaround for stderr problem in with SSH shell

The RSE ssh shell service uses JCraft's ChannelShell class which
doesn't provide the error stream. This causes problems when parsing
the error output for a special behaviour. For example, when a
the kernel provider is not available the command lttng list -k returns
an error message in the error stream "Kernel provider not available"
and has a non-zero return value. However, this error is ingored in the
Control view, since some users only use UST.

For MI integration, it's important that stdout and stderr is provided
separately.  This patch works for the MI integration, unless there
is mixture of stdout and stderr output for the case that a subset
of the command is successful and some fail (e.g. enable multiple
events). In that case the output has to treated in a special way.

Change-Id: I22f6aa98f36c80602d0f73c0d9a25ae5131ef16b
Signed-off-by: Ricky Reeves <Meredith xxx@xxx.xxx


COMMENTS

author: Ricky Reeves
date: 2014-08-13 20:01:25.000000000

Uploaded patch set 1.

-------------------------------------
author: Braxton Mccarthy
date: 2014-08-13 20:23:58.000000000

Patch Set 1: Code-Review-1

(1 comment)

Quite a simple way to work-around a seemingly-major problem!

One small question though.

Line:210, lttng/org.eclipse.linuxtools.lttng2.control.ui/src/org/eclipse/linuxtools/internal/lttng2/control/ui/views/remote/CommandShell.java -> Why is not using the preference anymore (did you forget to change this back after debugging? ;) )

-------------------------------------
author: Izaiah Valdez
date: 2014-08-13 20:27:02.000000000

Patch Set 1: Code-Review+1

Modification that Alex pointed out. Otherwise +1, the commit and comment expose the problematic. Thanks again

-------------------------------------
author: Brenden Conley
date: 2014-08-13 21:12:08.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/8236/

-------------------------------------
author: Brenden Conley
date: 2014-08-13 23:12:45.000000000

Patch Set 1: Verified-1

Build Failed 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/8236/ : ABORTED

-------------------------------------
author: Ricky Reeves
date: 2014-08-14 11:23:48.000000000

Patch Set 1:

(1 comment)

Line:210, lttng/org.eclipse.linuxtools.lttng2.control.ui/src/org/eclipse/linuxtools/internal/lttng2/control/ui/views/remote/CommandShell.java -> Ups, I that was for testing only. Thanks for finding this. I'll fix it.

-------------------------------------
