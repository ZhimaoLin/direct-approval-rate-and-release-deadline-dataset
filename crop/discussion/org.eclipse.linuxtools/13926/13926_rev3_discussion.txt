DESCRIPTION

Perf: Add stat diff view menu actions to switch between old/new/diff data.

* Introduce PerfDataFile class to encapsulate file-to-string logic.
* Allow access to inspect/replace contents of stat-diff views.

Change-Id: I78346fada37a2a7710a1b2a799023efbe1ffde01


COMMENTS

author: Octavio Lucero
date: 2013-06-19 21:29:56.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2013-06-19 21:30:01.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2730/ 

-------------------------------------
author: Octavio Lucero
date: 2013-06-19 21:35:12.000000000

Patch Set 3:

* Last change: fixed build failure issue.

-------------------------------------
author: Brenden Conley
date: 2013-06-19 21:46:38.000000000

Patch Set 3: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2730/ : SUCCESS

-------------------------------------
author: Kaylin Maxwell
date: 2013-06-20 21:25:49.000000000

Patch Set 3:

A few comments:

1. It would be preferable to have buttons on the menu bar 
   than an anonymous pull-down.

2. Currently, if I create a diff and then run perf again, the
   new values change as the perf.stat file is overwritten. I
   think maybe timestamps should be added in the view
   and the old/new data cached internally so that the comparison
   remains constant.  That way, one could have multiple diff
   views opened that compared various runs.  Thoughts?

-------------------------------------
author: Octavio Lucero
date: 2013-06-20 21:47:54.000000000

Patch Set 3:

1. Agreed, I'll change this.
2. In this change each view keeps a reference to the old/new compared data files, so each instance of comparison view should be remaining constant. The perf.stat/perf.stat.old files are there only for the 'Compare Latest' menu action in the 'Perf Statistics' view.

-------------------------------------
author: Octavio Lucero
date: 2013-06-20 21:56:39.000000000

Patch Set 3: I would prefer that you didn't submit this

Re 2. Agreed with using timestamps, a view's underlying file can change at any time, having a cached copy of the file at the time of the diff can take care of this issue. I will work on this.

-------------------------------------
author: Nathanael Holden
date: 2013-06-21 17:18:54.000000000

Patch Set 3: (1 inline comment)



Line:22, perf/org.eclipse.linuxtools.perf/src/org/eclipse/linuxtools/internal/perf/PerfDataFile.java -> It seems to me like this is very similar to StatData (the main difference being the source of the data). Perhaps it might be worth pushing some common functionality like parsing from a stream, getting the title into a common base class that both can use.

-------------------------------------
author: Octavio Lucero
date: 2013-06-21 17:21:03.000000000

Patch Set 3: (1 inline comment)



Line:22, perf/org.eclipse.linuxtools.perf/src/org/eclipse/linuxtools/internal/perf/PerfDataFile.java -> Good idea, I'll add this to the patch.

-------------------------------------
author: Octavio Lucero
date: 2013-06-24 18:33:46.000000000

Patch Set 3: (1 inline comment)



Line:22, perf/org.eclipse.linuxtools.perf/src/org/eclipse/linuxtools/internal/perf/PerfDataFile.java -> Getting the title is a characteristic of  classes implementing the IPerfData interface, I think putting it in a base class would limit the uses of it. I created this base class as BaseDataManipulator in the patch set 4 if you want to take a look at it.

-------------------------------------
