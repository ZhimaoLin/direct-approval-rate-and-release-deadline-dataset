DESCRIPTION

tmf: remove open trace directory and use open trace file instead

For directory traces like CTF the user has to select one of the
files of the directory trace. The open procedure will first verify
that the parent directory is a valid directory trace. If yes, then it
will be opened with the corresponding trace type. To cover the index
file of CTF which is in a subdirectory of the trace directory, also
the grandparent directory of the selected file will be checked for
a directory trace type. If neither parent or grandparent directory
is a valid directory the file will be imported as before.

Change-Id: Id6b4d8b177875b5c018cbbed82816f3ba52b067a
Signed-off-by: Ricky Reeves <Meredith xxx@xxx.xxx


COMMENTS

author: Kaeden Tapia
date: 2014-05-05 20:11:39.000000000

Uploaded patch set 7.

-------------------------------------
author: Brenden Conley
date: 2014-05-05 20:39:29.000000000

Patch Set 7:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6854/

-------------------------------------
author: Brenden Conley
date: 2014-05-05 21:40:42.000000000

Patch Set 7: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/6854/ : SUCCESS

-------------------------------------
author: Kaeden Tapia
date: 2014-05-06 20:15:49.000000000

Patch Set 7: Verified+1 Code-Review+1

This looks good to me but this needs another +1 since I made the last changes.

-------------------------------------
author: Annalise Jimenez
date: 2014-05-06 21:04:49.000000000

Patch Set 7: Code-Review-1

Wait wait don't! I was demo'ing to someone today and it absolutely failed to work... but that might be the demo effect. I'll let you know

-------------------------------------
author: Annalise Jimenez
date: 2014-05-06 21:54:11.000000000

Patch Set 7:

(1 comment)

Ok, it all works fine... except!!... the thing I tried in the demo! Which is run the RCP, do nothing at all at first except file -> Open Trace ... (my workspace has 3 tracing projects). It seems it does not know where to put the trace, the destinatination folder is null. But if I select one of the projects, it puts the trace into that project.

I know the documentation says to right-click a Traces folder, but it's there, under File -> Open Trace...

Line:124, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/project/model/TmfOpenTraceHelper.java -> I get a NPE here when no project is selected

-------------------------------------
author: Ricky Reeves
date: 2014-05-08 11:39:30.000000000

Patch Set 7:

Thanks, Genevieve, for finding this bug. This bug was introduced earlier before this patch. However, I'll change fix it and bring back the initial behaviour in a new version of this patch. The initial behaviour for opening a trace from the main file menu was, that it is opened in the default tracing project (Tracing), independent what the user selected.

-------------------------------------
