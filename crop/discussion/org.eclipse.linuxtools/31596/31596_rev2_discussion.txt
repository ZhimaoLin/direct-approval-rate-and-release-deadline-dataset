DESCRIPTION

pcap: Convert filePath to java.nio.file.Path

The new Java 7 API for handling file paths is quite versatile,
and much more robust (cross-platform, etc.) than dealing with
simple Strings.

One note: I removed the check to verify that the files end in
".cap" or ".pcap". While it would still have been possible to
do with Path.toString(), on Unix typically the file contents
indicates the type, not the extension.

Change-Id: I327272dd99b298ccd61c1e53d4ded4ed79885d1c
Signed-off-by: Braxton Mccarthy xxx@xxx.xxx


COMMENTS

author: Braxton Mccarthy
date: 2014-08-13 23:19:47.000000000

Uploaded patch set 2.

-------------------------------------
author: Braxton Mccarthy
date: 2014-08-13 23:21:14.000000000

Patch Set 2:

Sorry for hijacking this ;)  but how about a "deeper" fix : using the new Path API, we eliminate all this problem of / vs \.

I see eventually we could change TmfTrace.initTrace() to use a Path instead of a String too. But one step at a time...

-------------------------------------
author: Ivy Mitchell
date: 2014-08-14 00:53:48.000000000

Patch Set 2:

@Alex, this should be a separate patch set.

-------------------------------------
author: Braxton Mccarthy
date: 2014-08-14 03:06:33.000000000

Patch Set 2:

Separate from what? It's quite stand-alone already ;)

-------------------------------------
author: Brenden Conley
date: 2014-08-14 03:39:51.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/8255/

-------------------------------------
author: Brenden Conley
date: 2014-08-14 04:36:44.000000000

Patch Set 2: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/8255/ : SUCCESS

-------------------------------------
author: Ricky Reeves
date: 2014-08-14 16:58:49.000000000

Patch Set 2: Code-Review-1

-1 because we need to discuss this.

Eclipse (in org.eclipse.core.runtime) has a class Path that implements IPath. IPath is used all over the place in Eclipse. Also it is by eclipse resource implementations like IResource, IFile, IFolder. We often need to convert between IPath and IFile/IFolder. 
Introducing Path from java.nio.file might not help us in the end and we might mix the up. In some cases we will have to qualify with the package in classes where we use both Path implementations

-------------------------------------
author: Braxton Mccarthy
date: 2014-08-14 17:20:47.000000000

Patch Set 2:

java.nio.file.Files and .Path now pretty much replace the old java.io.File and manual "new InputStream()" and "getChannel()" mechanisms. If you look at the Java tutorials on the Oracle website, that's the API they recommend now. It's coming! :)

Although the name clash with org.eclipse.core.*.Path is indeed annoying. pcap/CTF sounded like good starting points, since we try to have those as basic Java libraries, independent from Eclipse stuff as much as possible. But propagating that to everywhere else could wait.

-------------------------------------
author: Ricky Reeves
date: 2014-08-14 17:36:43.000000000

Patch Set 2: -Code-Review

Fair enough. 

BTW, CTF and PCAP parser depends on Eclipse in one way or the other right now, or do you want to remove the null annotations :-)

-------------------------------------
author: Braxton Mccarthy
date: 2014-08-14 17:53:02.000000000

Patch Set 2:

Nooooo, not the null annotations xD

Yeah they do depend on some Eclipse stuff anyway (Activators and whatnot).

-------------------------------------
author: Ivy Mitchell
date: 2014-08-15 01:28:14.000000000

Patch Set 2:

I really think this patch is overkill, why not push the first patch then worry about this after.

-------------------------------------
author: Braxton Mccarthy
date: 2014-08-15 01:38:22.000000000

Patch Set 2:

Why have 2 separate bugfixes for the same problem? Only 2 files are effectively modified.

That's like patching your muffler with Coke cans, instead of changing the whole muffler xD

-------------------------------------
author: Ricky Reeves
date: 2014-08-15 13:37:52.000000000

Patch Set 2: Code-Review+1

The change works. However, I'm not looking forward to the day when we have convert from Path (eclipse version) to Path (java version) and vice verca.

-------------------------------------
author: Itzel Singleton
date: 2014-08-15 14:21:30.000000000

Patch Set 2: Code-Review+1

-------------------------------------
author: Ivy Mitchell
date: 2014-08-15 14:28:44.000000000

Patch Set 2: Code-Review+2

Coke cans work great on the trip to the garage, so cops don't pull you over. ;)

@Meredith Scott, I think we should consider finding helpers to convert from java paths to eclipse paths an vice versa... when that day comes.

-------------------------------------
author: Itzel Singleton
date: 2014-08-15 14:30:52.000000000

Patch Set 2:

http://bit.ly/1oOBx9s

-------------------------------------
