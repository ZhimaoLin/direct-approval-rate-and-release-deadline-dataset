DESCRIPTION

ctf: Generate synthetic trace in test traces folder instead of temp dir

I was having problems with the synthetic trace now that the Luna branch
is merged into master because the index files got generated into the
synthetic trace folder and the folder would not get deleted on exit
because of that. Then the next test run, the trace would not get
generated because the folder already exists. I think it makes sense to
move the trace to the test traces folder and only generate it once.

Change-Id: I03e815c50e22adf2d5355856b8031cc7a8b4c9b1
Signed-off-by: Alivia Ritter xxx@xxx.xxx

COMMENTS

author: Kaeden Tapia
date: 2013-12-12 06:34:38.000000000

Uploaded patch set 3.

-------------------------------------
author: Brenden Conley
date: 2013-12-12 06:38:17.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4600/

-------------------------------------
author: Jordon Obrien
date: 2013-12-12 07:08:13.000000000

Patch Set 3: Code-Review+1

(2 comments)

seem good to me, minus one style question.

Line:183, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/synthetictraces/LttngKernelTraceGenerator.java -> There is other cases in the code base where "/tmp" is used instead of the getProperty (much more cleaner).

By doing a simple text-search for "/tmp" you will find them.

Line:209, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/synthetictraces/LttngKernelTraceGenerator.java -> Why catching the exception?
The test will fail with any exception?

-------------------------------------
author: Brenden Conley
date: 2013-12-12 07:24:54.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4600/ : SUCCESS

-------------------------------------
author: Braxton Mccarthy
date: 2013-12-12 16:20:03.000000000

Patch Set 3:

(1 comment)

Should the synthetic-traces directory be added to the Maven 'clean' target too?

Line:209, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/synthetictraces/LttngKernelTraceGenerator.java -> But then, since IOException is a checked exception, you'd have to add it to the method signature, and then to every single test method.

It's not very "clean", but since this is just tests, and it's for the sake of making it simpler/lighter, I think it's fine.

-------------------------------------
author: Jordon Obrien
date: 2013-12-12 16:23:14.000000000

Patch Set 3:

(1 comment)

thanks for clarification

Line:209, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/synthetictraces/LttngKernelTraceGenerator.java -> good point.
I missed this fact, now I remember the difference with runtime exception.

I'm fine with this.

-------------------------------------
author: Kaeden Tapia
date: 2013-12-12 16:41:17.000000000

Patch Set 3:

(1 comment)

Line:183, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/synthetictraces/LttngKernelTraceGenerator.java -> I don't think /tmp would work on Windows, would it? Using getProperty, it will go in the user's temp directory. But I'd have to double check.

-------------------------------------
author: Jordon Obrien
date: 2013-12-12 16:43:37.000000000

Patch Set 3:

(1 comment)

Line:183, lttng/org.eclipse.linuxtools.ctf.core.tests/src/org/eclipse/linuxtools/ctf/core/tests/synthetictraces/LttngKernelTraceGenerator.java -> I remember having a test failing for that reason.
I started a patch, but I abandon it... 
I choose my battles.

This should be fixed in a separate patch-set.

-------------------------------------
