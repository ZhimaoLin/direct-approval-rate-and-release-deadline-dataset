DESCRIPTION

tmf: Implement a cache of TmfStateValue.

This patch provides a caching implementation in the TmfStateValue factory.
TmfStateValue are immutable and can be shared.

By changing the size of the cache, we observed this cache ratio.

size         hit      total     ratio
  2 count:  7369956/15551000 [0.4739216770625683]
  4 count: 11742495/15530000 [0.7561168705730843]
  8 count: 14622383/15545000 [0.9406486330009649]
 16 count: 15007948/15552000 [0.965017232510288]
 32 count: 15372868/15543000 [0.9890541079585665]
 64 count: 15432506/15523000 [0.9941703279005347]
128 count: 15488720/15534000 [0.9970851036436205]

Which seems to be an excellent ratio for a really small cache.
The same idea is used with Integer.valueOf(...).

Change-Id: I3701b900035d83b19531101ab60e7292899d8cef
Signed-off-by: Jordon Obrien xxx@xxx.xxx


COMMENTS

author: Jordon Obrien
date: 2013-12-05 03:09:08.000000000

Uploaded patch set 6.

-------------------------------------
author: Ivy Mitchell
date: 2013-12-05 03:27:46.000000000

Patch Set 6:

String acceleration suggestion.

-------------------------------------
author: Jordon Obrien
date: 2013-12-05 03:32:26.000000000

Patch Set 6:

I'll postponed strings investigation.
I didn't find any of them in my trace.
It doesn't seem to be a speed issue.

In fact, string could be internized when the are read.
But still, the wrapper TmfStateValue won't be shared.

-------------------------------------
author: Brenden Conley
date: 2013-12-05 04:11:18.000000000

Patch Set 6:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4426/

-------------------------------------
author: Brenden Conley
date: 2013-12-05 04:52:40.000000000

Patch Set 6: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/4426/ : SUCCESS

-------------------------------------
