DESCRIPTION

ctf: Move the performance tests to the new infrastructure

Convert the existing performance tests to org.eclipse.test.performance
tests.

Change-Id: Idae9706d1e7203c30942c361c55bba9265615682
Signed-off-by: Braxton Mccarthy xxx@xxx.xxx


COMMENTS

author: Braxton Mccarthy
date: 2014-07-02 21:30:01.000000000

Uploaded patch set 1.

-------------------------------------
author: Brenden Conley
date: 2014-07-02 21:30:07.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7589/

-------------------------------------
author: Brenden Conley
date: 2014-07-02 22:28:19.000000000

Patch Set 1: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7589/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2014-07-03 14:12:28.000000000

Patch Set 1: Code-Review-1

(6 comments)

Small comments

Line:51, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceSeekBenchmark.java -> LOOP_COUNT is very small

Line:106, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceSeekBenchmark.java -> Here too a more verbose fail message might be useful

Line:39, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> The tests are not too long, I'd put a higher loop count to have higher accuracy. Maybe 20, 30?

Line:50, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> bigger... but it still only takes a second to read!

Line:82, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> Maybe add a verbose message to the fail, with the loops number when the error happened (may not be the same reason if it's the first or run X)

Line:84, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> The performance meter is not like a resource that needs to be stopped if it was started. The fail will insure the commit is never called. It would look cleaner with the pm.stop not in a finally block.

-------------------------------------
author: Braxton Mccarthy
date: 2014-07-03 14:51:44.000000000

Patch Set 1:

(5 comments)

Line:51, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceSeekBenchmark.java -> It used to be 4!

Line:39, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> Original version had 10 loops. But yeah it's relatively quick, we can increase it a bit.

Line:50, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> I know rite! But this trace is noticeably slower in TMF... either it's TMF that slows down, or this test here that doesn't do much...

Line:82, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> woah, you can put text in there?!?

Line:84, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> Ok. I was not sure if we had to call .stop() after calling .start(), or else the monitoring would never end.

-------------------------------------
author: Annalise Jimenez
date: 2014-07-03 14:55:25.000000000

Patch Set 1:

(1 comment)

Line:84, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceReadBenchmark.java -> Actually, there is no monitoring per se, start and stop takes a "snapshot" of the system. But you do have to call the stop after start before calling another start on a performance meter, but here, the 'fail' will just kill the performance meter and any data it had taken so far.

-------------------------------------
author: Braxton Mccarthy
date: 2014-07-03 14:58:33.000000000

Patch Set 1:

(1 comment)

Line:91, lttng/org.eclipse.linuxtools.ctf.core.tests/perf/org/eclipse/linuxtools/ctf/core/tests/perf/trace/TraceSeekBenchmark.java -> \(o.O)/

-------------------------------------
