DESCRIPTION

lttng: Support live updating of Control Flow view and Resources view

- Update AbstractTimeGraphView to use a list as input element and to
support a time graph content provider.

- Update AbstractTimeGraphView to create one separate BuildThread per
trace in the trace set. Change buildEventList method to be called
independently for each trace in the trace set.

- Update AbstractTimeGraphView to use a CopyOnWriteArrayList for the
entry list of each trace, and stop exposing the entry list map to
subclasses. Add interface to add or remove a list of entries to/from the
entry list of a trace.

- Update AbstractTimeGraphView refresh method to refresh the time graph
combo or time graph viewer when possible and avoid calling setInput,
which resets all tree elements.

- Update AbstractTimeGraphView to perform packing of tree columns only
once.

- Add support in TimeGraphEntry to update the end time and to replace
the last event with an event starting at the same time.

- Fix TmfEventsEditor sending TmfTraceClosed with null trace.

- Update ControlFlowView and ResourcesView to build the event list for a
trace continuously in a loop until its state system build is complete.
Support continuous updating of the entry list and its tree structure,
and partial updating of the event list at each iteration.

- Update state system history range query to allow punctual time range.

Change-Id: I440c369ddef703f8fbceac221cfea0c0699348c0
Signed-off-by: Luciana Barry xxx@xxx.xxx
Reviewed-on: https://git.eclipse.org/r/21161
Tested-by: Brenden Conley
Reviewed-by: Braxton Mccarthy xxx@xxx.xxx
Reviewed-by: Ivy Mitchell xxx@xxx.xxx
IP-Clean: Ivy Mitchell xxx@xxx.xxx
Tested-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Luciana Barry
date: 2014-01-31 20:33:38.000000000

Change has been successfully cherry-picked as fee8656ab1f86e0e2aca573b8fd966c8167e4fc3

-------------------------------------
author: Annalise Jimenez
date: 2014-02-05 20:26:08.000000000

Patch Set 5:

(1 comment)

I hate to highjack a merged thread, but here's a problem I got when merging the master branch into luna_dorsal.

Maybe we can discuss it in person next time.

Line:1011, lttng/org.eclipse.linuxtools.tmf.ui/src/org/eclipse/linuxtools/tmf/ui/views/timegraph/AbstractTimeGraphView.java -> I have a problem with a view that is meant for an experiment (Mohamad's virtual machine view). This loop actually creates a build thread for every trace inside the experiment, which is not what we want. Our buildEventList method now needs to take parentTrace instead of trace, but then one BuildThread would be enough.

Anyway, that brings the question of how we will handle that kind of experiment specific view (where data from all traces are correlated for the view) in live mode, with or without synchronization.

Open question...

-------------------------------------
