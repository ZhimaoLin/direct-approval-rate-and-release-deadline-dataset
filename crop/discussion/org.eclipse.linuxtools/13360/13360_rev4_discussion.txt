DESCRIPTION

tmf: document how to add a trace type

Change-Id: Ia9df95e282ad900963d9de2ee46950714363430c
Signed-off-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2013-05-30 20:22:52.000000000

Uploaded patch set 4.

-------------------------------------
author: Brenden Conley
date: 2013-05-30 20:22:57.000000000

Patch Set 4:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/2564/ 

-------------------------------------
author: Kaeden Tapia
date: 2013-05-30 20:24:14.000000000

Patch Set 4: Looks good to me, but someone else must approve



-------------------------------------
author: Brenden Conley
date: 2013-05-30 20:37:37.000000000

Patch Set 4: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/2564/ : SUCCESS

-------------------------------------
author: Luciana Barry
date: 2013-05-31 15:01:24.000000000

Patch Set 4: I would prefer that you didn't submit this

(20 inline comments)



Line:959, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> tracetype > trace type

Line:969, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> What is a "Associations in TMF.UI"? Do you mean traceType extension point in org.eclipse.linuxtools.tmf.ui?

Line:971, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> Maybe just me, but the reference to thread context doesn't help. For trace context, "required to go to a certain event..." should be something like "required by the trace reader to parse events as it iterates the trace and to keep track of its rank and location". ephemerial > ephemeral (fancy pants). tracetype > trace type.

Line:979, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> trailing spaces and a few more below

Line:1097, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> fCurrent is only thread safe when called within getNext()...

Line:1111, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> Would be better to show that TmfTraceException should be thrown here (and below for two other exceptions)

Line:1127, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> possible ArithmeticException

Line:1138, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> If we get an exception we should probably return a context that won't provide any event, e.g. return null at getNext().

Line:1156, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> fMappedByteBuffer could be modified by seek() from different threads! it's an example of the kind of stuff you could put in the context

Line:1160, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> no need to override this method

Line:1165, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> no need to override this method

Line:1191, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> use the constant in ITmfTimestamp

Line:1196, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> events > fields

Line:1201, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> Using the rank as a ITmfLocation is not really a good example to give...

Line:1216, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> Only needed because we implement ITmfEventParser, because if we don't and don't provide and external parser, super.initTrace() throws an exception. But the method is never really called because we override getNext(). You ignore the context, and fCurrentEvent is not thread safe. It's a really bad example but that is how we do it ourselves :(

Line:1237, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> That would be better, but in the code example it represents the rank...

Line:1241, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> mention the full name of the traceType extension point. access the given 'event > trace' type. eclipse > Eclipse. go to > select.

Line:1257, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> I wouldn't encourage not using the built-in plug-in editor...

Line:1273, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> Eclipse

Line:1274, lttng/org.eclipse.linuxtools.tmf.help/doc/User-Guide.mediawiki -> Explain how (add to Exported Packages in Runtime tab). This is to export the trace reader's package, not the trace type, that could be confused with the traceType extension point. manifest.mf > MANIFEST.MF

-------------------------------------
