DESCRIPTION

ctf/tmf: reduce memory consumption

Free "native" ctfevent once it is parsed.

Change-Id: Iec337d8ff92e94ee0df3646c832dd945e5796540
Signed-off-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Brenden Conley
date: 2014-09-05 02:21:41.000000000

Patch Set 3:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/8742/

-------------------------------------
author: Brenden Conley
date: 2014-09-05 03:21:03.000000000

Patch Set 3: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/8742/ : SUCCESS

-------------------------------------
author: Annalise Jimenez
date: 2014-09-05 19:41:08.000000000

Patch Set 3: Code-Review-1

(2 comments)

The event matching memory usage performance test went from 324 MB to 193. That's a nice improvement.And it doesn't seem to hurt performance. Just some minor comments

Line:194, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEvent.java -> Why did you change this? Unless you know the field is final and not null, code at the left is better practice.

Line:228, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEvent.java -> Sounds good, but are you sure that once you called the getcontent method, you will not ever need the event definition again? For now, fContent is only set in this method, but maybe you should add a comment over the field to say that it should only be set in the getContent, just to make sure somebody later does not add a method that brings it back to null.

-------------------------------------
author: Ivy Mitchell
date: 2014-09-05 20:58:00.000000000

Patch Set 3:

(2 comments)

Maybe I'll change this later, but I am making these patches on my spare time so if you need them, try them out. :)

Line:194, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEvent.java -> That was to remove warnings.

Line:228, lttng/org.eclipse.linuxtools.tmf.ctf.core/src/org/eclipse/linuxtools/tmf/ctf/core/CtfTmfEvent.java -> good idea. The event def so far is not needed after, if it is, we can change this again. :)

-------------------------------------
author: Erick Ross
date: 2015-03-06 21:03:53.000000000

Abandoned

Lttng module is separate project now. Consider submitting your patch to
https://projects.eclipse.org/projects/tools.tracecompass .

-------------------------------------
