DESCRIPTION

tmf: Add the Histogram query API to ITmfStatistics

See the added Javadoc for the complete description. This will
allow the Histogram view to easily plug into the trace's
ITmfStatistics object to get its information (so it can be
optimized for each trace type, etc.)

The current implementation does not work with the event-requests
back-end, because of a bug in the framework itself wrt the event
requests. This will have to be investigated further.

Change-Id: Ib94aeaa369a8bf40da5246825152e26326a45e92
Signed-off-by: Braxton Mccarthy xxx@xxx.xxx


COMMENTS

author: Brenden Conley
date: 2012-11-13 21:37:50.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/556/ 

-------------------------------------
author: Brenden Conley
date: 2012-11-13 21:54:05.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/556/ : SUCCESS

-------------------------------------
author: Ricky Reeves
date: 2012-11-14 12:48:09.000000000

Patch Set 1: Verified; Looks good to me, but someone else must approve; IP review completed

(1 inline comment)

Once you have integrated it with the HistogramView, you could used the old Histogram Model to verify the numbers of the new implementation using the state system.

Line:264, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/statistics/TmfStateStatistics.java -> you removed stats.waitUntilBuilt(). Why?

-------------------------------------
author: Braxton Mccarthy
date: 2012-11-14 18:15:33.000000000

Patch Set 1: (1 inline comment)

It might be hard to compare the results with the current histogram implementation, since that one works with "buckets", and the number of buckets per pixel can vary from one to the other.

However, the values I used in the unit tests were calculated using Babeltrace on the reference trace, so they should be a good reference.

Thanks for the review, I'll push a new version that removes the redundant waitUntilBuilt().

Line:264, lttng/org.eclipse.linuxtools.tmf.core/src/org/eclipse/linuxtools/tmf/core/statistics/TmfStateStatistics.java -> It calls the new getEventCountAt(), which does a waitUntilBuilt().

I guess I could remove it from histogramQuery() too... I'll respin the patch.

-------------------------------------
author: Ricky Reeves
date: 2012-11-14 18:44:49.000000000

Patch Set 1:

In JUnit test you would have control of the number of buckets. It was just an idea for cross validation.

-------------------------------------
