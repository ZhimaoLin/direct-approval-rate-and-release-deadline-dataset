DESCRIPTION

Bug 501240 - Do not hide image with <none>:<none> as a result of a build

Extracted the way qualifier is computed, based on images
Set the 'dangling images' filter activation state to 'false' by default
 to get the same result as the CLI
Added tests to verify the qualifier computation

Also:
- renamed custom Assertions with plural form (as AssrtJ does)
- fixed failing tests because mocking the IDockerConnection#getState()
method returns unexpected values in some cases.

Change-Id: I21c4eb03523dd88e18ca23b8a3f30d18f0497efa
Signed-off-by: Zechariah Krause xxx@xxx.xxx


COMMENTS

author: Zechariah Krause
date: 2016-09-26 15:32:22.000000000

Uploaded patch set 2: Patch Set 1 was rebased.

-------------------------------------
author: Brenden Conley
date: 2016-09-26 15:32:28.000000000

Patch Set 2:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11235/

-------------------------------------
author: Brenden Conley
date: 2016-09-26 15:49:18.000000000

Patch Set 2: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/11235/ : SUCCESS

-------------------------------------
author: Kaylin Maxwell
date: 2016-09-26 16:40:14.000000000

Patch Set 2: Code-Review-1

(2 comments)

Line:975, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/internal/docker/core/DockerConnection.java -> Do not rename the local array as "images" as this matches the global field this.images and can easily cause confusion with someone changing from local to global or vice-versa.  Not a good practice.

Line:1036, containers/org.eclipse.linuxtools.docker.core/src/org/eclipse/linuxtools/internal/docker/core/DockerConnection.java -> I do not agree with this.  The reason for the imageLock over all the processing is that lock keeps reporting in the correct order.  Thread A finds 5 images, 1 is removed externally and Thread B finds 4 images.  If nothing prevents Thread B from beating thread A to the finally clause finish line, then the UI will incorrectly end up with 5 images, one of them invalid. I believe we have discussed this before.

-------------------------------------
author: Gerrit Code Review
date: 2016-10-04 02:38:50.000000000

Change has been successfully cherry-picked as f7804b3a331df8f7aef861539a8d18293526b06e by Kaylin Maxwell

-------------------------------------
