DESCRIPTION

Disable Valgrind binary execution by default.

Change-Id: I844f43ca363a42d317f5b7ec8e39c39541d79a8e


COMMENTS

author: Brenden Conley
date: 2013-02-06 17:32:14.000000000

Patch Set 1:

Build Started https://hudson.eclipse.org/sandbox/job/linuxtools/1307/ 

-------------------------------------
author: Brenden Conley
date: 2013-02-06 17:41:12.000000000

Patch Set 1: Verified

Build Successful 

https://hudson.eclipse.org/sandbox/job/linuxtools/1307/ : SUCCESS

-------------------------------------
author: Erick Ross
date: 2013-02-06 17:43:53.000000000

Patch Set 1: I would prefer that you didn't submit this

I would like to see valgrind tests getting executed if valgrind executable is there. So please add a check whether /usr/bin/valgrind exists and if it exists set it to true.

-------------------------------------
author: Nathanael Holden
date: 2013-02-06 17:48:16.000000000

Patch Set 1:

We were running into this issue on the sonar builds. Valgrind is there, but the version is much lower and causes some different behaviour (resulting in the test failures). We could test for the existence of a range of valgrind versions.

-------------------------------------
author: Erick Ross
date: 2013-02-06 18:01:09.000000000

Patch Set 1:

This means that if a user tries to use it with too old valgrind he will get unpredictable error instead of clear message that his version is unsupported ? If true we need to guard about that in the plugin.

-------------------------------------
author: Nathanael Holden
date: 2013-02-06 18:20:58.000000000

Patch Set 1:

In the cases Camilo has brought up, there hasn't been an error in one version and proper functionality in the other. It has been a matter of more/less sensitive reporting of memory leaks/race conditions/etc. A lot of the tests assert that the number of errors found by running valgrind should match the pre-generated output, but this seems to vary among versions.

We could probably move towards having the test plugins do better error checking.

-------------------------------------
author: Octavio Lucero
date: 2013-02-06 18:55:17.000000000

Patch Set 1:

Agreed, we should guard this. I will test versions  > 3.5 (SLES 11 version) to check if our plug-in supports them.

-------------------------------------
author: Octavio Lucero
date: 2013-02-06 19:00:52.000000000

Patch Set 1:

@Roland: Yeah, we should be checking the types of errors Valgrind found, as opposed to asserting a number of errors.

-------------------------------------
author: Octavio Lucero
date: 2013-02-06 19:33:46.000000000

Patch Set 1:

I'll include the improved tests in the next patch set.

-------------------------------------
author: Octavio Lucero
date: 2013-02-08 16:06:57.000000000

Patch Set 1:

Just an update, I believe the reason why a lot of our tests are failing is because we're hitting a bug with Valgrind in our sandbox instance. I've commented on this at https://bugs.eclipse.org/bugs/show_bug.cgi?id=393442.

-------------------------------------
author: Octavio Lucero
date: 2013-02-08 16:07:34.000000000

Patch Set 1:

Proper link to bug: https://bugs.eclipse.org/bugs/show_bug.cgi?id=393442

-------------------------------------
author: Octavio Lucero
date: 2013-02-08 19:52:36.000000000

Patch Set 1:

I'll still be working on better error checking to avoid spending time tracking bugs with valgrind itself.

-------------------------------------
