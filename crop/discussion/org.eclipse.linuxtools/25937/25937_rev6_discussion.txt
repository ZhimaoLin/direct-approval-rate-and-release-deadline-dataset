DESCRIPTION

ctf: add Event header data types

This is a composite datatype described in the examples of the ctf spec.
Right now, the chances are that many people will re-use this pattern so why not
enhance its performance.

Change-Id: I2042be35fee38e42680691af879357ebb1aff95b
Signed-off-by: Ivy Mitchell xxx@xxx.xxx


COMMENTS

author: Ivy Mitchell
date: 2014-07-07 21:44:09.000000000

Uploaded patch set 6.

-------------------------------------
author: Brenden Conley
date: 2014-07-07 22:14:49.000000000

Patch Set 6:

Build Started https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7634/

-------------------------------------
author: Brenden Conley
date: 2014-07-07 23:02:18.000000000

Patch Set 6: Verified+1

Build Successful 

https://hudson.eclipse.org/linuxtools/job/linuxtools-gerrit/7634/ : SUCCESS

-------------------------------------
author: Ivy Mitchell
date: 2014-07-08 17:34:59.000000000

Patch Set 6:

(1 comment)

Line:188, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStream.java -> suggest something better

-------------------------------------
author: Braxton Mccarthy
date: 2014-07-08 18:58:44.000000000

Patch Set 6: Code-Review-1

(29 comments)

Line:9, /COMMIT_MSG -> CTF

Line:75, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/Definition.java -> explain what is different between this constructor and the previous one.

Line:79, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/Definition.java -> remove this empty line

Line:184, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDeclaration.java -> Explain how this method is different from the one above

Line:210, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDeclaration.java -> bestest part of CTF right here :P

Line:141, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStream.java -> deprecated?

Line:178, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStream.java -> add xxx@xxx.xxx in the Javadoc telling users to use the new one.

Line:188, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStream.java -> it could be as stupid as getEventHeaderDeclaration().  It would be different from the old deprecated one, but would still work "long-term", so we don't have to break the API again to remove the 2.

Line:137, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> xxx@xxx.xxx explain what to use instead

Line:428, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> nice, never noticed that one

Line:476, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> xxx@xxx.xxx + link to new method

Line:400, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> isn't there one 'i' too many? why not variantIdDef?

Line:409, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> just a thought, for those definitions that we know should be there, there  could be methods like lookupTimestampDefinition(), that return a IntegerDefinition directly.

Line:517, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> how about getStreamEventHeader()?  Is the "Current" really important?

Line:58, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderLargeDecl.java -> same, perhaps some comments about these

Line:79, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderLargeDecl.java -> should be a define

Line:105, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderLargeDecl.java -> isLargeEventHeader (to follow the naming scheme of the Compact one)

Line:22, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/AbstractEventHeaderDecl.java -> remove this empty line

Line:25, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/AbstractEventHeaderDecl.java -> space before {

Line:27, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/AbstractEventHeaderDecl.java -> why not public?

Line:18, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ICompositeDefinition.java -> Explain a bit more. This is like a struct, right? (this is why it exposes a List, and not a Collection/Set? etc.)

Line:22, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ICompositeDefinition.java -> space before {

add empty line after

Line:36, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ICompositeDefinition.java -> remove this (class already mentions 3.1)

Line:58, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderCompactDecl.java -> maybe explain (javadoc?) what these values are, and where they come from (Section in the CTF spec?)

Line:60, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderCompactDecl.java -> remove one empty line

Line:33, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderDef.java -> space before {

Line:38, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderDef.java -> fFields

is "fields" really the best name for this?

Line:53, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderDef.java -> don't you have a define somewhere for "event.header" ?

Line:89, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderDef.java -> ctrl+shift+f

-------------------------------------
author: Ivy Mitchell
date: 2014-07-08 20:51:01.000000000

Patch Set 6:

(13 comments)

Line:184, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDeclaration.java -> Done

Line:210, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/StructDeclaration.java -> we'll figure this out soon enough. :)

Line:141, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStream.java -> Done

Line:188, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStream.java -> Done

Line:400, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> Done

Line:409, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> Done

Line:517, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/trace/CTFStreamInputPacketReader.java -> Done

Line:58, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderLargeDecl.java -> Done

Line:79, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderLargeDecl.java -> Done

Line:105, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderLargeDecl.java -> Done

Line:58, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderCompactDecl.java -> Done

Line:60, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderCompactDecl.java -> Done

Line:53, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/EventHeaderDef.java -> in n-grams

-------------------------------------
author: Ivy Mitchell
date: 2014-07-08 20:56:17.000000000

Patch Set 6:

(9 comments)

Line:9, /COMMIT_MSG -> Done

Line:75, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/Definition.java -> Done

Line:79, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/Definition.java -> Done

Line:22, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/AbstractEventHeaderDecl.java -> Done

Line:25, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/AbstractEventHeaderDecl.java -> Done

Line:27, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/internal/ctf/core/event/types/composite/AbstractEventHeaderDecl.java -> Done

Line:18, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ICompositeDefinition.java -> Done

Line:22, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ICompositeDefinition.java -> Done

Line:36, lttng/org.eclipse.linuxtools.ctf.core/src/org/eclipse/linuxtools/ctf/core/event/types/ICompositeDefinition.java -> Done

-------------------------------------
