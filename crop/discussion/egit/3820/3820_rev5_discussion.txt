DESCRIPTION

[sync] Simplify implementation of git remote objects

Simplify implementation of git remote objects by using
CachedResourceVariant from team framework.

Also makes some cleanup in core tests.

Signed-off-by: Leslie Stephenson xxx@xxx.xxx
Change-Id: I32bb63c96676f8213b800558e7d52eb67ae30b2a


COMMENTS

author: Leslie Stephenson
date: 2011-08-10 22:40:40.000000000

Uploaded patch set 5.

-------------------------------------
author: Leslie Stephenson
date: 2011-08-10 22:42:07.000000000

Patch Set 5:

rebased

-------------------------------------
author: Brenden Conley
date: 2011-08-10 22:52:32.000000000

Patch Set 5:

Build Started https://hudson.eclipse.org/sandbox/job/egit.gerrit/1401/ 

-------------------------------------
author: Brenden Conley
date: 2011-08-10 23:03:06.000000000

Patch Set 5: I would prefer that you didn't submit this

Build Unstable 
 
https://hudson.eclipse.org/sandbox/job/egit.gerrit/1401/ : UNSTABLE

-------------------------------------
author: Douglas Trujillo
date: 2011-08-14 20:56:51.000000000

Patch Set 5: I would prefer that you didn't submit this

(15 inline comments)

the UI tests reported the following problems on Mac OS X, on current master they succeed without any error :

AllTests
org.eclipse.egit.ui.test.AllTests
org.eclipse.egit.ui.test.AllLocalTests
org.eclipse.egit.ui.view.synchronize.SynchronizeViewWorkspaceModelTest
shouldListFileDeletedChange(org.eclipse.egit.ui.view.synchronize.SynchronizeViewWorkspaceModelTest)
org.eclipse.swtbot.swt.finder.exceptions.WidgetNotFoundException: Could not find widget.
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntilWidgetAppears(SWTBotFactory.java:348)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.widget(SWTBotFactory.java:308)
	at org.eclipse.swtbot.swt.finder.SWTBot.tree(SWTBot.java:1110)
	at org.eclipse.swtbot.swt.finder.SWTBot.tree(SWTBot.java:1099)
	at org.eclipse.egit.ui.view.synchronize.SynchronizeViewWorkspaceModelTest.shouldListFileDeletedChange(SynchronizeViewWorkspaceModelTest.java:137)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
...
	at java.lang.Thread.run(Thread.java:680)
Caused by: org.eclipse.swtbot.swt.finder.widgets.TimeoutException: Timeout after: 5000 ms.: Could not find widget matching: (of type 'Tree')
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:398)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:372)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:360)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntilWidgetAppears(SWTBotFactory.java:346)
	... 51 more

org.eclipse.egit.ui.view.synchronize.SynchronizeViewGitChangeSetModelTest
shouldListFileDeletedChange(org.eclipse.egit.ui.view.synchronize.SynchronizeViewGitChangeSetModelTest)
org.eclipse.swtbot.swt.finder.exceptions.WidgetNotFoundException: Could not find widget.
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntilWidgetAppears(SWTBotFactory.java:348)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.widget(SWTBotFactory.java:308)
	at org.eclipse.swtbot.swt.finder.SWTBot.tree(SWTBot.java:1110)
	at org.eclipse.swtbot.swt.finder.SWTBot.tree(SWTBot.java:1099)
	at org.eclipse.egit.ui.view.synchronize.SynchronizeViewGitChangeSetModelTest.shouldListFileDeletedChange(SynchronizeViewGitChangeSetModelTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
...
Caused by: org.eclipse.swtbot.swt.finder.widgets.TimeoutException: Timeout after: 5000 ms.: Could not find widget matching: (of type 'Tree')
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:398)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:372)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:360)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntilWidgetAppears(SWTBotFactory.java:346)
	... 51 more

shouldSynchronizeInEmptyRepository(org.eclipse.egit.ui.view.synchronize.SynchronizeViewGitChangeSetModelTest)
org.eclipse.swtbot.swt.finder.widgets.TimeoutException: Timeout after: 10000 ms.: null
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:398)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:372)
	at org.eclipse.egit.ui.test.TestUtil.waitUntilTreeHasNodeContainsText(TestUtil.java:182)
	at org.eclipse.egit.ui.view.synchronize.AbstractSynchronizeViewTest.waitForNodeWithText(AbstractSynchronizeViewTest.java:253)
	at org.eclipse.egit.ui.view.synchronize.SynchronizeViewGitChangeSetModelTest.shouldSynchronizeInEmptyRepository(SynchronizeViewGitChangeSetModelTest.java:168)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
...

Line:170, org.eclipse.egit.core/src/org/eclipse/egit/core/synchronize/GitResourceVariantTree.java -> remove dead code which was commented out

Line:79, org.eclipse.egit.ui.test/src/org/eclipse/egit/ui/internal/synchronize/model/GitModelBlobTest.java -> typo: s/Symetric/Symmetric/

Line:93, org.eclipse.egit.ui.test/src/org/eclipse/egit/ui/internal/synchronize/model/GitModelBlobTest.java -> typo: s/Symetric/Symmetric/

Line:98, org.eclipse.egit.ui.test/src/org/eclipse/egit/ui/internal/synchronize/model/GitModelBlobTest.java -> remove dead code

Line:1, org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/synchronize/GitChangeSetCapability.java -> missing license header

Line:11, org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/synchronize/GitChangeSetCapability.java -> ? we do not use author tags and your name isn't lock ...

missing javadoc for public class

Line:30, org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/synchronize/GitChangeSetCapability.java -> remove TODOs (more below) ?

Line:233, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:271, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:311, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:355, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:392, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:433, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:639, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

Line:682, org.eclipse.egit.core.test/src/org/eclipse/egit/core/synchronize/GitResourceVariantComparatorTest.java -> avoid mixing in pure formatting changes

-------------------------------------
