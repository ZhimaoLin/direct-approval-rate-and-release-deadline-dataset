DESCRIPTION

MB-20142: fix worker pool panic and cleanupbucket().

Change-Id: Ie1aa798d2cfb303bd6519726842a4e69e2352b0f


COMMENTS

author: Leonel Abbott
date: 2016-07-27 06:33:52.093000000

Uploaded patch set 4: Patch Set 3 was rebased.

-------------------------------------
author: Dominique Stanton
date: 2016-07-27 17:22:52.224000000

Patch Set 4:

(1 comment)

Line:546, secondary/projector/feed.go -> Leonel Abbott, feed.cleanupBucket() will now be called even if feed.actTss[cmd.Bucket] returns !ok.  Is this intended?

-------------------------------------
author: Leonel Abbott
date: 2016-07-28 08:59:11.524000000

Patch Set 4:

(1 comment)

Line:546, secondary/projector/feed.go -> Previously, KVDATA shall be called only after all StreamEnd for
dcp-bucket is posted to feed's back-channel.
Now, with the introduction of multiple DCP connection, and also if
there is a crash in KVDATA, there can be some streams active.

Which we observed in one of the logs.

cleanupBucket() is a safe call. Probably I should have made it mandatory
for all edge cases during KVDATA exit.

Please let me know if you find any problems with this.

-------------------------------------
author: Tate Garrett
date: 2016-08-04 09:27:38.643000000

Change has been successfully merged into the git repository by Deangelo Blevins

-------------------------------------
