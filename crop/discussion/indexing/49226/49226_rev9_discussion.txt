DESCRIPTION

MB-100 Indexer: Add cpu/mem profiling settings

Change-Id: Iee706efefdce76e052ab9bcbc6b5d299400d7904


COMMENTS

author: Maliyah Fischer
date: 2015-04-28 13:23:38.907000000

Uploaded patch set 9: Patch Set 8 was rebased.

-------------------------------------
author: Leonel Abbott
date: 2015-04-29 09:27:36.717000000

Patch Set 9: Code-Review+1

(1 comment)

Line:596, secondary/common/config.go -> I believe you want this to be false, for mutable. That is, for this configuratio 
can be updated in runtime.

-------------------------------------
author: Kinsley Fox
date: 2015-04-29 10:04:32.767000000

Patch Set 9: Code-Review-1

I think this is a duplicate of functionality that we have already. You can always dynamically do cpu or heap profiling using the http endpoint as follows:

go tool pprof http://localhost:9102/debug/pprof/profile - for cpu profile
go tool pprof http://localhost:9102/debug/pprof/heap - for heap profile

-------------------------------------
author: Maliyah Fischer
date: 2015-04-29 10:59:14.619000000

Patch Set 9:

With these flags, I can turn on/off cpu profiling. So I can measure from time t1 to t2 rather than the full run length. Can we do the same thing with pprof rest url?

-------------------------------------
author: Kinsley Fox
date: 2015-04-29 11:25:34.819000000

Patch Set 9:

Sorry. I should have advertised this ability.

go tool pprof http://localhost:9102/debug/pprof/profile -seconds=interval (Default:30s)

Whenever this command is issued, it starts profiling and stop when the given time period expires.

-------------------------------------
author: Maliyah Fischer
date: 2015-04-29 12:45:15.100000000

Patch Set 9:

Alright. And if we don't know beforehand how much time its going to take for the operations we want to profile, then is there a option to force stop it as well?

-------------------------------------
author: Maliyah Fischer
date: 2015-04-29 13:20:55.495000000

Patch Set 9:

(1 comment)

Line:596, secondary/common/config.go -> I wanted the ability to turn profiling on/off while indexer is running.

-------------------------------------
author: Tate Garrett
date: 2015-04-29 18:32:36.666000000

Change has been successfully merged into the git repository.

-------------------------------------
