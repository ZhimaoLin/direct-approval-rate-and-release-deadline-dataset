DESCRIPTION

MB-15327 indexer: Fix index fragmentation calculation

Multiple index snapshots are retained after the compaction.
Hence fragmentation needs to be computed by considering
all snapshots data blocks present in the index file.
But, it is expensive to estimate data blocks other than
then one present in the latest tree. Hence we came up
with an approximate fragmentation calculation formula as follows:

fragmentation = current_fragmentation - fragmentation_after_last_compaction

Change-Id: Ia6a851395b5aec93ae8de7cbd690907d3d9930ca


COMMENTS

author: Kinsley Fox
date: 2015-06-22 04:59:25.782000000

Uploaded patch set 2: Patch Set 1 was rebased.

-------------------------------------
author: Tate Garrett
date: 2015-06-22 09:53:01.060000000

Change has been successfully merged into the git repository.

-------------------------------------
