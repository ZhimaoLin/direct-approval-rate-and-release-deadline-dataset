DESCRIPTION

MB-19705 - Handle panic related to setting max_array_seckey_size

When large arrays are indexed and the above setting is decreased,
if old arrays receive mutation, it leads to panic in forestdb indexes.
Handling previous large arrays during update and delete path.

Change-Id: Ifa66b3bca849562fb1888df985695dbde2851f16


COMMENTS

author: Alden Ashley
date: 2016-08-03 09:21:42.266000000

Uploaded patch set 3.

-------------------------------------
author: Kinsley Fox
date: 2016-08-03 09:52:47.657000000

Patch Set 3: Code-Review+1

(1 comment)

Line:507, secondary/indexer/forestdb_slice_writer.go -> you could write a comment or use a const to say why is it multiplied by 3.

-------------------------------------
author: Leonel Abbott
date: 2016-08-03 10:31:19.578000000

Patch Set 3:

(2 comments)

Line:91, secondary/indexer/array.go -> You may want to flip the order of comparision

checkSize && (l-from) > maxIndexEntrySize

Line:95, secondary/indexer/array.go -> Same as above.

-------------------------------------
author: Alden Ashley
date: 2016-08-03 10:40:12.699000000

Patch Set 3:

(3 comments)

Line:91, secondary/indexer/array.go -> Done

Line:95, secondary/indexer/array.go -> Done

Line:507, secondary/indexer/forestdb_slice_writer.go -> Done

-------------------------------------
author: Tate Garrett
date: 2016-08-03 12:49:32.606000000

Change has been successfully merged into the git repository by Alden Ashley

-------------------------------------
