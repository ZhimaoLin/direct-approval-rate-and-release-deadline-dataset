DESCRIPTION

indexer: Implement refcounting for slice close/destroy

When an index needs to be destroyed, all the slice
resources (forestdb handles, physical files) need to
be deallocated. But, there could be a number of consumers
using slice resources while a drop index needs to be processed.

Added refcounting methods IncrRef(), DecrRef() that can be used
by consumers. Destructive functions Close() and Destory() will
become a lazy operation and will be performed only when refcount
becomes zero. ie, all the consumers have finished using the resource.

Change-Id: I1d3b10b96d2698099b8e4ef7420397bb3ba263d7


COMMENTS

author: Kinsley Fox
date: 2014-12-07 06:28:45.706000000

Uploaded patch set 1.

-------------------------------------
