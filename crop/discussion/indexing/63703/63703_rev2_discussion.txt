DESCRIPTION

MB-19499 memdb: Close() should wait until all iterators have exited

The memdb frees all the nodes before all the iterators have finished.
During bucket flush or rollback, we close the memdb instance immediately
and creates a new instance. But, there could be live iterators for the
old instance and it may accees free nodes. This leads to crash.
Implemented waiting in the memdb.Close() until all snapshots have been
closed.

Change-Id: If747d575b8fb10de525b20ce47c0eeb07acd11d1


COMMENTS

author: Kinsley Fox
date: 2016-05-04 10:05:39.560000000

Uploaded patch set 2.

-------------------------------------
author: Kinsley Fox
date: 2016-05-04 10:13:01.881000000

Patch Set 3: Patch Set 2 was rebased

-------------------------------------
author: Tate Garrett
date: 2016-05-05 06:27:48.940000000

Change has been successfully merged into the git repository by Kinsley Fox

-------------------------------------
