DESCRIPTION

indexer: Serialize access to snapshot handle readers

Scan coordinator receives a snapshot handle and it spawns
a scanner goroutine that internally clones the snapshot
handle for scanning. But, clone operation involves access
to the main snapshot handle concurrently if multiple
requests are served using same index snapshot. ForestDB
requires exclusive access to the db handle by consumer
threads.

Change-Id: Ib60be8c8c41fabcd682a6b0721dbdd6fa4bed168


COMMENTS

author: Kinsley Fox
date: 2015-03-04 13:46:25.648000000

Uploaded patch set 2: Commit message was updated.

-------------------------------------
author: Maliyah Fischer
date: 2015-03-04 15:35:22.057000000

Patch Set 2:

(1 comment)

Line:29, secondary/indexer/forestdb_iterator.go -> "s" is an interface. I think you need to do fdbSnap.lock.Lock() ?

-------------------------------------
author: Kinsley Fox
date: 2015-03-04 15:49:45.557000000

Patch Set 2:

(1 comment)

Line:29, secondary/indexer/forestdb_iterator.go -> Yeah, noticed when compilation failed.
Updated patchset 3

-------------------------------------
author: Tate Garrett
date: 2015-03-05 09:17:08.060000000

Change has been successfully merged into the git repository.

-------------------------------------
