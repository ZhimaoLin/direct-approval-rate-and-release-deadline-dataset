DESCRIPTION

Always use only a single ebucketmigrator process per src/dst

We also always use the same name for the connection. This allows the
connection to resume even when we intentionally interrupt it to change
the filters.

Since ebucketmigrator drops any messages for unasked for vbuckets on
the floor, we shouldn't need to worry about receiving any extra
mutations, but we do need to be careful that we don't miss any in
cases where we do want to backfill.

Change-Id: I5a0668a5b0f601d19cf2017dfd73da762e221ab8


COMMENTS

author: Magdalena Oconnell
date: 2011-04-05 16:59:40.711000000

Uploaded patch set 2.

-------------------------------------
author: Nathalie Landry
date: 2011-04-05 21:31:14.427000000

Patch Set 2: Verified

breakes something. memcached just keeps disconnecting. I'm seeing memcached messages like that.


xxx@xxx.xxx Dropped 8 log lines from memcached
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#87): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()
memcached<0.162.0>: Received negative TAP ack from xxx@xxx.xxx (#86): Code: 7 ()

-------------------------------------
author: Nathalie Landry
date: 2011-04-05 21:31:20.008000000

Patch Set 2: Fails



-------------------------------------
