DESCRIPTION

complete chain switch in Harley Martinitor if new master is active.MB-4988

When rebalance is stopped and future master is already active
previously Harley Martinitor would use new master but mess up replicas.

We're conservatively detect if active vbucket is on future master as
seen on fast forward map. And if all nodes in fast forward chain are
replicas. In that case we can safely assume takeover was done and we
simply update vbucket map.

Change-Id: Id268b701c548277d47a765f788033cecd09840ac


COMMENTS

author: Nathalie Landry
date: 2012-04-11 02:09:23.812000000

Patch Set 1:

please do additional round of changing of this scary place and be extra careful when reviewing it.

-------------------------------------
author: Meghan Vazquez
date: 2012-04-11 12:51:15.057000000

Patch Set 1: Verified; Looks good to me, approved



-------------------------------------
author: Nathalie Landry
date: 2012-04-11 19:17:06.374000000

Change has been successfully cherry-picked as 06d79ee1d7b921802d004e4eea6ee4145f0c7f01.

-------------------------------------
