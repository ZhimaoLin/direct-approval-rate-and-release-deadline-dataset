DESCRIPTION

MB-6108 change aggregate method for view ops stats

from sum to max.
Reason: Each view query hits all nodes.
Thus adding view hits from all nodes multiplies
query rate by times number of nodes if sum is
used to aggregate values between nodes.

Change-Id: Ic9bc502a25071afb8a30f1b7e5cd6742f695f5b8


COMMENTS

author: Philip Lara
date: 2013-08-26 19:17:38.931000000

Patch Set 1: Verified+1

NOTE: default behavior of aggregate_stat_kv_pairs slightly changed (see aggregate_stat_kv_pairs_test). now if it tries to aggregate 2 undefined values the result will be undefined. This is done because 1. It seems more correct 2. replacing undefined with 0 will break max method.

I checked that UI handles undefined gracefully displaying '?' where the value shpuld be.

-------------------------------------
author: Nathalie Landry
date: 2013-08-26 19:21:18.825000000

Patch Set 1:

Let me quickly note that this cannot be uploaded against 2.2.0. Rebase for master.

-------------------------------------
author: Nathalie Landry
date: 2013-08-26 19:23:26.149000000

Patch Set 1: Code-Review-1

See my comment above. Also on code itself. On preliminary code examination looks ok, but please consider measuring perf effect of this change. We've seen this code to be quite a problem on larger number of nodes.

-------------------------------------
author: Philip Lara
date: 2013-08-27 01:28:00.401000000

Abandoned

should be submitted to master

-------------------------------------
