DESCRIPTION

MB-13842 ns_audit_cfg always notify memcached if audit config changes

if ns_server_sup is restarted the memcached don't get restarted. so
ns_port_setup can be down while memcached is up. This causes
ns_audit_cfg to lose the notification about audit.json change.

we need to make sure that:
- audit.json is created when memcached process is started
- memcached always gets notification if audit config had changed

I decided that it won't harm if the memcached gets extra notification
even if it was started with the correct config. So on init ns_audit_cfg
needs to create audit.json before ns_post_setup is started, but it should
notify after ns_ports_setup starts memcached process.

Change-Id: If3554ba4debc6b47b47c66c2383ca6b340ba231e


COMMENTS

author: Philip Lara
date: 2015-03-26 20:10:44.156000000

Uploaded patch set 2.

-------------------------------------
author: Philip Lara
date: 2015-03-26 20:12:04.838000000

Patch Set 2: Verified+1

-------------------------------------
author: Roselyn Villegas Code Review
date: 2015-04-03 00:06:14.327000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Roselyn Villegas Code Review
date: 2015-04-03 00:06:29.182000000

Change has been successfully cherry-picked as 545e7ef3dda2b0f83ca3251a10e5e6b8eece3c8f

-------------------------------------
