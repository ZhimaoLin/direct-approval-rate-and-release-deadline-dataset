DESCRIPTION

MB-17279 Explicitly close dcp streams when replicator is nuked.

dcp_sup:nuke uses {shutdown, nuke} reason to terminate individual
replicators, which meant that there would be no attempt made to close
dcp_streams prior to termination. It should be perfectly safe, but
unfortunately in reality it can bring memcached down. To lower the
probability of this happening, we now handle nuked shutdown the same
way we do the regular shutdown.

Change-Id: I2fda44d51c38311943d6006cf0d386b55bd06752


COMMENTS

author: Meghan Vazquez
date: 2016-01-08 20:26:15.000000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2016-01-08 20:26:25.587000000

Patch Set 1: Well-Formed-1

Permission denied to commit to restricted branch: 

http://server.jenkins.couchbase.com/job/restricted-branch-check/1286/console : FAILURE

-------------------------------------
author: Meghan Vazquez
date: 2016-01-08 20:26:29.841000000

Patch Set 1: Code-Review+2 Verified+1

-------------------------------------
author: Meghan Vazquez
date: 2016-01-08 20:26:57.402000000

Patch Set 1: -Code-Review

-------------------------------------
author: Ella Beltran
date: 2016-01-08 20:41:24.254000000

Patch Set 1: Code-Review+2

-------------------------------------
author: Hugo Blankenship
date: 2016-01-11 20:29:05.275000000

Patch Set 1: Well-Formed+1

Permission granted to commit to restricted branch

-------------------------------------
author: Roselyn Villegas Code Review
date: 2016-01-11 23:27:09.798000000

Change has been successfully cherry-picked as 1375dd3a7824ec505629dd400fa3ba837676b0f0

-------------------------------------
