DESCRIPTION

MB-22083 attach memcached auth info to the built in users

Change-Id: I44b0bc95f6dae755db575766011ef615ff2ffc18


COMMENTS

author: Philip Lara
date: 2016-12-21 23:21:59.791000000

Uploaded patch set 1.

-------------------------------------
author: Philip Lara
date: 2016-12-21 23:22:48.051000000

Patch Set 1: Verified+1

-------------------------------------
author: Meghan Vazquez
date: 2016-12-22 16:26:46.816000000

Patch Set 1:

I don't understand what the benefit is of starting cbsasladm via goport.

-------------------------------------
author: Philip Lara
date: 2016-12-22 20:51:04.191000000

Patch Set 1:

It needs caller to close stdin in order to do the stuff. Erlang port doesn't have this functionality.

-------------------------------------
author: Meghan Vazquez
date: 2017-01-06 21:45:00.125000000

Patch Set 1:

I believe port_close closes stdin.

-------------------------------------
author: Meghan Vazquez
date: 2017-01-06 21:46:02.148000000

Patch Set 1:

Or is it the case that you need to read after closing stdin?

-------------------------------------
author: Philip Lara
date: 2017-01-06 22:03:10.244000000

Patch Set 1:

Yes. I need to send data to stdin. On receiving EOF the utility processes the data and pours result to stdout. There's no way in current erlang port implementation to send EOF without closing the port.

-------------------------------------
author: Meghan Vazquez
date: 2017-01-06 22:05:28.581000000

Patch Set 1:

Got it.

-------------------------------------
author: Meghan Vazquez
date: 2017-01-09 21:20:52.905000000

Patch Set 1:

This is unrelated to your change, but passwords can have whitespaces. Doesn't seem that cbsasladm handles it.

Besides that, build_auth is called from inside ns_config transaction. And now it can spawn a new OS process. Like I described before, the transaction body should be kept to bare minimum. So I'd like to ask you to do something about it.

-------------------------------------
author: Meghan Vazquez
date: 2017-01-09 21:22:58.458000000

Patch Set 1:

Or is it one of those things you were planning to keep outside ns_config?

-------------------------------------
author: Philip Lara
date: 2017-01-10 01:11:54.761000000

Patch Set 1:

Filed bug for spaces in passwords: MB-22248
Thanks for finding it.

-------------------------------------
author: Philip Lara
date: 2017-01-10 02:35:43.728000000

Patch Set 1:

This will be gone from config, but for now the fix is here: http://review.couchbase.org/71782

-------------------------------------
author: Roselyn Villegas Code Review
date: 2017-01-14 19:18:36.236000000

Change has been successfully cherry-picked as e0a30f42a426b584f37e37af8c8b23917bafbf90 by Meghan Vazquez

-------------------------------------
