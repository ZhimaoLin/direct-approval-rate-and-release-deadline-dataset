DESCRIPTION

Add spatial index cleanup

It is now possible to cleanup the spatial indexes
on a cluster. It's the same API as for a normal
GeoCouch.

Change-Id: Id701f950a689412303e58b076f6e427e0c382b73


COMMENTS

author: Ayla Reynolds
date: 2012-02-13 13:18:23.121000000

Uploaded patch set 10.

-------------------------------------
author: Porter Oconnor
date: 2012-02-13 15:59:42.513000000

Patch Set 10:

Looking into this briefly, wouldn't it be much simpler to have the autocompaction daemon do the cleanup?

It would just call  couch_spatial:cleanup_index_files(Db) for every vbucket database. One single line addition to couchbase_compaction_daemon.erl in ns_server.

-------------------------------------
author: Ayla Reynolds
date: 2012-02-13 16:14:46.565000000

Patch Set 10:

Filipe: sounds good.

Alk: could you please tell me what you think about Filipe's idea?

-------------------------------------
author: Nathalie Landry
date: 2012-02-13 18:03:39.364000000

Patch Set 10:

Ayla Reynolds: Filipe is right.

-------------------------------------
