DESCRIPTION

MB-17628: Cleanup streams from old master to old replicas ...

before state of the vbucket changes on the old master. 

Change-Id: I9b7f9172c614fe0eab10818715dc687c9f8d12aa

COMMENTS

author: Kian Santos
date: 2016-02-04 06:27:34.520000000

Patch Set 4: Commit message was updated

-------------------------------------
author: Hugo Blankenship
date: 2016-02-04 06:27:41.872000000

Patch Set 4: Well-Formed+1

Permission granted to commit to restricted branch

-------------------------------------
author: Kian Santos
date: 2016-02-04 06:28:13.742000000

Patch Set 4:

Updated commit message to get the Hugo Blankenship to fire now that I've added this ticket to the 3.1.4 tracking ticket.

-------------------------------------
author: Leah Mcdaniel
date: 2016-02-04 17:45:32.862000000

Patch Set 4:

(1 comment)

Line:361, src/ns_single_vbucket_mover.erl -> I don't know which would be most efficient, but for me the following makes the intention clearer.
ordset:union(ordset:from_list(OldReplicaNodes), ordset:from_list(ReplicaNodes))

-------------------------------------
author: Meghan Vazquez
date: 2016-02-04 18:12:00.922000000

Patch Set 4:

(1 comment)

Line:361, src/ns_single_vbucket_mover.erl -> I'd suggest lists:usort(ReplicaNodes ++ OldReplicaNodes)

-------------------------------------
author: Ella Beltran
date: 2016-02-04 18:43:51.906000000

Patch Set 4:

Unless there are correctness issues or people feel strongly about the style, I would like to keep this as is. 

I am already halfway thru my unit tests and each unit test/rebalance takes long time to complete because of the # of nodes and buckets involved. I will need to redo them if I change this.

-------------------------------------
author: Ella Beltran
date: 2016-02-05 04:43:05.735000000

Patch Set 4: Verified+1

-------------------------------------
author: Meghan Vazquez
date: 2016-02-05 17:29:29.363000000

Patch Set 4: Code-Review+2

-------------------------------------
author: Roselyn Villegas Code Review
date: 2016-02-05 17:29:31.374000000

Change has been successfully cherry-picked as 0847beb4fbaf67f8719ba5efbc7a81140a0bc588

-------------------------------------
