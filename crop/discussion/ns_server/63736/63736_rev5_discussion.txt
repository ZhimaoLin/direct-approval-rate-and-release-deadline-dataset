DESCRIPTION

MB-19429 aggregate RAM and disk information only for kv nodes

...on Cluster Overview page

Server Nodes page will display RAM and disk information for node
even if it doesn't run kv service

Change-Id: I6809b618e6556b5ae06c4f09c11de6ff22a0682a


COMMENTS

author: Philip Lara
date: 2016-05-12 04:33:22.792000000

Uploaded patch set 5.

-------------------------------------
author: Philip Lara
date: 2016-05-12 04:33:53.517000000

Patch Set 5: Verified+1

-------------------------------------
author: Ella Beltran
date: 2016-05-13 20:00:53.377000000

Patch Set 5:

(1 comment)

Code looks good but I have one comment below.

Line:276, src/ns_storage_conf.erl -> Seems OK.

cluster_storage_info() gets called via various code paths.
It will be good to confirm that none of those upstream functions
make an assumption that #of entries returned by cluster_storage_info()  matches the  ns_cluster_membership:active_nodes() count.

I have seen stuff like this in our stats code at other places.

-------------------------------------
author: Philip Lara
date: 2016-05-13 21:23:55.852000000

Patch Set 5:

(1 comment)

Line:276, src/ns_storage_conf.erl -> cluster_storage_info() returns aggregated values, not entries for each node. and everywhere where we used it it is assumed that the quotes are aggregated for kv nodes only.

-------------------------------------
author: Ella Beltran
date: 2016-05-13 22:27:29.000000000

Patch Set 5: Code-Review+2

(1 comment)

Line:276, src/ns_storage_conf.erl -> Ok.

I did not look deeply into all the values returned by cluster_storage_info() so was not sure if all of them are aggregated.

-------------------------------------
author: Roselyn Villegas Code Review
date: 2016-05-13 22:52:54.839000000

Change has been successfully cherry-picked as 279e068f7e40fc751714d6029d3ae0b852b8fd94 by Philip Lara

-------------------------------------
