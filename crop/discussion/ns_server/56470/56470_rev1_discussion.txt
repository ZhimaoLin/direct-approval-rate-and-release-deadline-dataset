DESCRIPTION

MB-16513: Optimize the search order based on stat prefix.

Change-Id: Ia035a9667f9ddd824639b50d8d274892a7aa6844


COMMENTS

author: Ella Beltran
date: 2015-10-27 23:23:21.912000000

Uploaded patch set 1.

-------------------------------------
author: Ella Beltran
date: 2015-10-28 15:16:50.572000000

Patch Set 1: Verified+1

-------------------------------------
author: Philip Lara
date: 2015-10-30 22:02:36.498000000

Patch Set 1:

(2 comments)

Line:406, src/menelaus_stats.erl -> You can use erlang pattern matching:

case Stat of
   "query_" ++ _Rest ->
          xxx@xxx.xxx

...and so on

Line:431, src/menelaus_stats.erl -> If prefix is "query_" the stat definitely is not in "@xdcr" list. So for such stat the search list has to be xxx@xxx.xxx BucketName]

-------------------------------------
author: Ella Beltran
date: 2015-10-30 22:18:50.660000000

Patch Set 1:

(2 comments)

Line:406, src/menelaus_stats.erl -> Ok, I will look into this.

Line:431, src/menelaus_stats.erl -> This is defensive programming.
Normally, we will find a query_stat in @query and we won't have to traverse the rest of the list at all. But we cannot guarantee that someone will not add a stat say "query_replication..." xxx@xxx.xxx in future. The code covers for that possibility.

-------------------------------------
author: Philip Lara
date: 2015-10-30 22:26:37.669000000

Patch Set 1:

(1 comment)

Line:431, src/menelaus_stats.erl -> ok

-------------------------------------
author: Roselyn Villegas Code Review
date: 2015-11-17 09:15:55.925000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
author: Roselyn Villegas Code Review
date: 2015-11-17 09:18:39.089000000

Change has been successfully cherry-picked as edfbfa7ffb5a707a3fe7b97c5527a7120eff8577

-------------------------------------
