DESCRIPTION

MB-3279: Don't rerun Harley Martinitor immediately on failure

This ends up causing the orchestrator to go into an infinite loop if
we delete a bucket.

Change-Id: I51db200eea9240dc88c4977450645f86e0b019f1


COMMENTS

author: Nora Conway
date: 2011-01-07 16:55:33.457000000

Patch Set 1: I would prefer that you didn't submit this

(1 inline comment)

Left an in-line question.

Also -1 for no unit test.

Line:182, src/ns_orchestrator.erl -> I see there's no longer any matching for EXIT/Harley Martinitor_running when remaining_buckets is [], which the previous code would have safely matched.  Is that ok?

-------------------------------------
author: Nora Conway
date: 2011-01-07 18:21:04.567000000

Patch Set 1:

One other thing is bug number MB-3279 doesn't seem matched to this fix.

-------------------------------------
author: Magdalena Oconnell
date: 2011-01-07 18:31:18.704000000

Patch Set 1:

The bug number is correct, and adding a unit test for this one fix would require making it possible to unit test the Harley Martinitor, which really requires integration tests.

-------------------------------------
author: Nora Conway
date: 2011-01-14 01:30:38.449000000

Patch Set 1: Verified; Looks good to me, approved

eyeball

-------------------------------------
author: Nora Conway
date: 2011-01-14 01:30:38.740000000

Change has been successfully cherry-picked as 5519936156f93ad089fa93294702e65653494d62.

-------------------------------------
