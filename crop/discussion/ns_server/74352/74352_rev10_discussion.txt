DESCRIPTION

MB-22909: Support XATTR replication.

In order to support replication of XATTRs we need to negotiate
the XATTR feature on the target node when we are setting up the
DCP proxy. If the XATTR feature is enabled on the target node
then we need to set the XATTR bit while issuing an open conn
DCP command.

During upgrade the replications will be setup without XATTRs
and when the cluster becomes Spock then we need to reset the
connections in order to enable XATTRs on all the replications.

In the mixed mode, the expectation is that a client is not
allowed to set XATTRs and any attempt to do so will result in
a failure.

Change-Id: Ibd9aacedd6028516eafa5d76edf5a26bd635a013


COMMENTS

author: Noe Perry
date: 2017-03-06 04:37:52.343000000

Uploaded patch set 10.

-------------------------------------
author: Noe Perry
date: 2017-03-06 04:41:15.998000000

Patch Set 10: Verified+1

(1 comment)

Line:75, src/dcp_sup.erl -> Implemented very similar to your suggestion. Wanted to keep the existing start_replicator as is.

-------------------------------------
author: Meghan Vazquez
date: 2017-03-06 19:59:21.266000000

Patch Set 10: Code-Review+2

-------------------------------------
