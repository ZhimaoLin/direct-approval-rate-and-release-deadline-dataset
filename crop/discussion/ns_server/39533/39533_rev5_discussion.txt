DESCRIPTION

MB-11616: warning message during samples loading

Change-Id: Id08fbe7b5c8406006bde9510818964843cb51337


COMMENTS

author: Shaniya Barton
date: 2014-07-23 11:50:03.572000000

Uploaded patch set 5.

-------------------------------------
author: Nathalie Landry
date: 2014-07-24 20:25:39.326000000

Patch Set 5: Verified-1

http://i.imgur.com/fnOCDzp.png

-------------------------------------
author: Nathalie Landry
date: 2014-07-24 20:47:15.289000000

Patch Set 5:

http://i.imgur.com/fnOCDzp.png

I've uploaded commit that makes it work here: http://review.couchbase.org/39828

also consider calling refreshEverything on change of mayrebalance cell. E.g.:

diff --git a/priv/public/js/core-data.js b/priv/public/js/core-data.js
index 976fffb..55a0d01 100644
--- a/priv/public/js/core-data.js
+++ b/priv/public/js/core-data.js
@@ -514,7 xxx@xxx.xxx var DAL = {
     pendingEject = _.without(pendingEject, node);
     cell.invalidate();
   };
-  DAL.cells.mayRebalanceWithoutSampleLoadingCell = Cell.compute(function (v) {
+  DAL.cells.mayRebalanceWithoutSampleLoadingCell = Cell.computeEager(function (v) {
     var details = v.need(DAL.cells.currentPoolDetailsCell);
     var isRebalancing = details && details.rebalanceStatus !== 'none';
     var isBalanced = details && details.balanced;
@@ -530,7 xxx@xxx.xxx var DAL = {
     });
 
     return details && !isRebalancing && !isInRecoveryMode && !isBalanced && isPedingServersAvailable && !unhealthyActive;
-  });
+  }).name("mayRebalanceWithoutSampleLoadingCell");
 }());
 
 // detailedBuckets
diff --git a/priv/public/js/servers.js b/priv/public/js/servers.js
index f2b4248..1cff748 100644
--- a/priv/public/js/servers.js
+++ b/priv/public/js/servers.js
@@ -317,10 xxx@xxx.xxx var ServersSection = {
       });
     });
 
-    self.serversCell.subscribeAny($m(self, "refreshEverything"));
-    self.inRecoveryModeCell.subscribeAny($m(self, "refreshEverything"));
-
-    self.isLoadingSamplesCell.subscribeAny($m(self, "refreshEverything"));
+    Cell.subscribeMultipleValues(function () {
+      self.refreshEverything();
+    }, self.serversCell, self.inRecoveryModeCell, self.isLoadingSamplesCell, DAL.cells.mayRebalanceWithoutSampleLoadingCell);
 
     Cell.subscribeMultipleValues(function (currentSection, isSampleLoading, mayRebalanceWithoutSampleLoading) {
       if (currentSection !== "servers") {

-------------------------------------
author: Nathalie Landry
date: 2014-07-25 17:55:53.362000000

Patch Set 5:

Ping

-------------------------------------
author: Roselyn Villegas Code Review
date: 2014-07-28 20:25:11.093000000

The change could not be merged due to a path conflict.

Please rebase the change locally and upload the rebased commit for review.

-------------------------------------
