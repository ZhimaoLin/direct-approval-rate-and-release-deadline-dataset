DESCRIPTION

MB-16576 crash terse_bucket_info_uploader if ns_memcached:set_cluster_config

...returns error. terse_bucket_info_uploader will restart in 1sec and retry

Change-Id: Ib8e0eb77a739a24b2646f46d4db9ef5739e0bf3f


COMMENTS

author: Philip Lara
date: 2015-10-16 00:39:12.505000000

Uploaded patch set 1.

-------------------------------------
author: Philip Lara
date: 2015-10-16 00:40:06.068000000

Patch Set 1: Verified+1

-------------------------------------
author: Leah Mcdaniel
date: 2015-10-16 00:48:30.674000000

Patch Set 1: Code-Review+1

-------------------------------------
author: Kian Santos
date: 2015-10-16 01:01:03.554000000

Patch Set 1:

code looks good. I'll hold off giving +2 until I hear from Eric / Raju on whether they are cool with it going into 3.1.2

-------------------------------------
author: Meghan Vazquez
date: 2015-10-16 03:02:56.114000000

Patch Set 1:

From brief look at the ep-engine code, it does seem like SET_CLUSTER_CONFIG can only return success (there's other code path that has to do with session tokens, but we don't use those). If we are tNathalie Landrying about connection drops or similar kind of conditions, this is handled by ns_memcached_sup supervising policy. So it seems like this retry logic will be a dead code path. I would just match against ok and be done with it.

-------------------------------------
author: Roselyn Villegas Code Review
date: 2015-10-24 00:25:02.250000000

Change has been successfully cherry-picked as 6b7ec715b8a9d9d90d263e2d2dbcfbfb7f21c383

-------------------------------------
