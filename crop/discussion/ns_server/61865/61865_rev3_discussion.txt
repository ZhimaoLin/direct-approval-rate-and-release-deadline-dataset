DESCRIPTION

MB-17962: don't alert on indexer RAM with forestdb storage mode

Simply add a check to only fire the alert if the storage mode is
memory optimized. I couldn't bring myself to add another binary
literal so I added an is_memory_optimized() function and defined
macros for both memory optimized and forestdb storage modes.

Change-Id: I4288630cc2adcdafa29e232588938877fed75f3d


COMMENTS

author: Kian Santos
date: 2016-03-24 01:37:42.437000000

Uploaded patch set 3.

-------------------------------------
author: Kian Santos
date: 2016-03-24 01:38:17.665000000

Patch Set 3: Verified+1

Spoke to the PMs. They are good with this, so let's proceed.

-------------------------------------
author: Kian Santos
date: 2016-03-24 01:39:19.636000000

Patch Set 3:

Ignore my previous reply; that's intended for my other open patch.

-------------------------------------
author: Meghan Vazquez
date: 2016-03-24 08:37:25.574000000

Patch Set 3:

(1 comment)

Line:315, src/menelaus_web_alerts_srv.erl -> It would be good not to xxx@xxx.xxx stats whatsoever if the storage mode is "forestdb".

-------------------------------------
author: Kian Santos
date: 2016-03-24 16:37:40.443000000

Patch Set 3:

(1 comment)

Line:315, src/menelaus_web_alerts_srv.erl -> Ah. :-)

You mean not xxx@xxx.xxx in the list of things we gather stats for since indexer_max_ram_usage is the only index related warning?

-------------------------------------
author: Meghan Vazquez
date: 2016-03-24 18:22:20.972000000

Patch Set 3:

(1 comment)

Line:315, src/menelaus_web_alerts_srv.erl -> Yes, that's what I meant. More generally, it doesn't even make sense to allow to enable this alert if storage mode is "forestdb".

-------------------------------------
author: Roselyn Villegas Code Review
date: 2016-03-29 20:00:49.323000000

Change has been successfully cherry-picked as 4853b557aa746d1b5308699b3d64601b19fd6efb

-------------------------------------
