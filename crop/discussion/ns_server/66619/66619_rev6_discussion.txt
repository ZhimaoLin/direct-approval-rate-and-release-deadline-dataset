DESCRIPTION

MB-11401: Monitor the caller that issues memcached ctrl commands.

The following are the changes added:
[1] Added a wrapper funtion in mc_client_binary module that gets
    the token and passes it as a parameter to the fun that is
    passed in to the wrapper function. The wrapper later releases
    the token.

[2] Made all the control commands defined in mc_client_binary
    module that need session token to accept the Token as a
    parameter.

[3] Removed the cmd_ctrl helper function that was defined to handle
    token server interactions. This is now being taken care of
    by the wrapper function.

[4] The ns_memcached module has been modified to utilize the above
    mentioned wrapper function in the context of all the exposed
    APIs that need session tokens. This would make sure thar the
    caller process gets monitored by the token server and the current
    token gets reset whenever the caller process dies.

[5] Have renamed the dictionary in ns_memcached_token module to
    signfiy what it's being used for.

Change-Id: Ia7a48096a50e8bbdcf6467db7e1bc53094971a93


COMMENTS

author: Noe Perry
date: 2016-10-04 06:48:13.433000000

Uploaded patch set 6.

-------------------------------------
author: Noe Perry
date: 2016-10-04 06:55:21.284000000

Patch Set 6: Verified+1

-------------------------------------
author: Meghan Vazquez
date: 2016-10-04 19:07:41.050000000

Patch Set 6:

(1 comment)

Line:285, src/ebucketmigrator_srv.erl -> 0 might look somewhat magical to somebody new looking at the code. Wouldn't hurt having a define for it.

-------------------------------------
author: Noe Perry
date: 2016-10-05 09:34:09.982000000

Patch Set 6: -Verified

(1 comment)

Line:285, src/ebucketmigrator_srv.erl -> Done

-------------------------------------
