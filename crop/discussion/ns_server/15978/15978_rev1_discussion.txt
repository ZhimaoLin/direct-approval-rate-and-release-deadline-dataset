DESCRIPTION

simplify capi_crud for the UI to use non-CAS APIs and ignore _revs

Change-Id: Iaf240a9ed0da0b1094713f179c04c356d529f4c8


COMMENTS

author: Nathalie Landry
date: 2012-05-19 02:19:49.240000000

Patch Set 1:

got compile warning:


src/capi_crud.erl:84: Warning: variable 'Expiration' is unused
src/capi_crud.erl:84: Warning: variable 'Flags' is unused

-------------------------------------
author: Nathalie Landry
date: 2012-05-19 02:21:16.652000000

Patch Set 1:

and apparently it depends on -V-ed couchdb commit right?

-------------------------------------
author: Cory Peck
date: 2012-05-28 15:24:21.711000000

Patch Set 1: Do not submit

This patch allows to unconditionally rewrite the data from UI

-------------------------------------
author: Nathalie Landry
date: 2012-05-29 15:46:58.327000000

Patch Set 1:

Not sure -2 is fair here. Can you explain a bit more?

My understanding is that because we lack time to make our document editing more solid we simplify everything radically. I see no major problem with UI overwriting other mutations.

-------------------------------------
author: Jordan Ballard
date: 2012-05-29 16:17:55.617000000

Patch Set 1:

Goal here is to make the UI interface have the same semantics as normal memcached API interactions.

-------------------------------------
author: Cory Peck
date: 2012-05-29 16:20:11.704000000

Patch Set 1:

That's correct, but it should allow to specify cas and flags somehow. The related issue MB-5003

-------------------------------------
author: Nathalie Landry
date: 2012-05-29 16:33:46.056000000

Patch Set 1:

Let me also add that apparently Damien has removed rev-id checking for design doc ops quite some time ago. I somehow forgot that.

So this change makes non-design docs behave same as we _currently_ behave with design docs.

-------------------------------------
author: Nathalie Landry
date: 2012-05-29 16:34:35.601000000

Patch Set 1:

Sergey, but "because I'd like cas-like support" doesn't explain -2. Can you be more specific?

-------------------------------------
author: Cory Peck
date: 2012-05-29 17:09:22.057000000

Patch Set 1: I would prefer that you didn't submit this

The previous behaviour was to check CAS (_rev) and report conflict if it doesn't match to actual value. With new behaviour it will always rewrite the value ignoring the version.

-------------------------------------
author: Cory Peck
date: 2012-05-29 17:10:19.252000000

Patch Set 1: No score



-------------------------------------
