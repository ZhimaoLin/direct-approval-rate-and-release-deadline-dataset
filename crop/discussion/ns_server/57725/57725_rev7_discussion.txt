DESCRIPTION

MB-12222: cancellation of pending queries by group

Change-Id: If353d7033298d3a0ad952c7c715f6fb2bbfe36a3


COMMENTS

author: Shaniya Barton
date: 2015-12-28 17:00:49.672000000

Uploaded patch set 7: Patch Set 6 was rebased.

-------------------------------------
author: Kian Santos
date: 2015-12-31 20:43:42.368000000

Patch Set 7: Code-Review+2 Verified+1

(2 comments)

Line:22, priv/public/ui/app/components/mn_pending_query_keeper.js -> There's a bug here in that the angular.forEach is wNathalie Landrying forward across the array as the queries are getting cancelled and clear -- which remove the query from the same array. 

You can see the bug in the following snippet:

    array = [1, 2, 3, 4];
    console.log(array); // prints 1,2,3,4
    angular.forEach(array, function(value) {
      _.remove(array, function(v) {
        return v === value;
      })
    });
    console.log(array); // prints 1,2

So, basically canceled queries are not getting removed from the list. Not a terrible bug but not clean.

You should iterate backward through the array the old fashioned way:

    for (i = pendingQueryKeeper.length - 1; i >= 0; --i) {
      pendingQueryKeeper[i].canceler();
    }

I'm going to approve this change, but please fix this in a follow up checkin.

Line:29, priv/public/ui/app/components/mn_pending_query_keeper.js -> Same issue here.

-------------------------------------
author: Roselyn Villegas Code Review
date: 2015-12-31 20:43:46.450000000

Change has been successfully cherry-picked as 971a262b51bf68d506fbb1d56cb6aadd1d9cf95d

-------------------------------------
author: Shaniya Barton
date: 2016-01-06 13:05:20.049000000

Patch Set 7:

(1 comment)

Line:22, priv/public/ui/app/components/mn_pending_query_keeper.js -> You're absolutely right. Thanks for that

-------------------------------------
