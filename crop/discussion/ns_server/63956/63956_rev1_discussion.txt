DESCRIPTION

MB-19037 merge_kv_pairs to return a set of keys to rereplicate.

This is needed for the keys whose vclock changes as a result of
conflict resolution. Previously, this wouldn't trigger replication. So
even though all nodes would have the same value for the conflicting
keys, the vclocks would still indicate a conflict. So if the same key
is changed later by any of the nodes, it would trigger an unnecessary
conflict.

This patch doesn't change the replication logic just yet, it only
extends ns_config:merge_kv_pairs.

Change-Id: Ifd006fa1dc09504e06e67fd817f76e76d2e81e49


COMMENTS

author: Meghan Vazquez
date: 2016-05-12 01:14:02.852000000

Uploaded patch set 1.

-------------------------------------
author: Meghan Vazquez
date: 2016-05-12 01:14:06.603000000

Patch Set 1: Verified+1

-------------------------------------
author: Leah Mcdaniel
date: 2016-05-12 14:13:09.241000000

Patch Set 1:

(1 comment)

Line:1167, src/ns_config.erl -> What is the point of this macro?

-------------------------------------
author: Meghan Vazquez
date: 2016-05-12 17:35:07.956000000

Patch Set 1:

(1 comment)

Line:1167, src/ns_config.erl -> The point is to get compile-time error vs run-time error if I make a typo in the name.

-------------------------------------
author: Leah Mcdaniel
date: 2016-05-12 18:21:05.241000000

Patch Set 1:

(1 comment)

Line:1167, src/ns_config.erl -> Why is that necessary here? (Unlike most other atoms)

-------------------------------------
author: Meghan Vazquez
date: 2016-05-12 20:29:15.433000000

Patch Set 1:

(1 comment)

Line:1167, src/ns_config.erl -> I'd probably argue that we should do the same thing in some other places too.

The atom of interest is used repetitively here. So I just wanted to catch the errors early.

-------------------------------------
author: Roselyn Villegas Code Review
date: 2016-05-13 21:27:03.960000000

Change has been successfully cherry-picked as ac64b892a69da9f0cee9238b27c45f8b6999ee37 by Meghan Vazquez

-------------------------------------
