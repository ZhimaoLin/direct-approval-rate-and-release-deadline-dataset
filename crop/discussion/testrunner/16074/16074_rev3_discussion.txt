DESCRIPTION

Adding test for checkpoint with failover

Change-Id: Ia02960513314a5bc03da8c44e385956b43dab41c


COMMENTS

author: Amani Conrad
date: 2012-05-17 21:01:22.192000000

Uploaded patch set 3.

-------------------------------------
author: Amani Conrad
date: 2012-05-17 21:14:10.277000000

Patch Set 3: I would prefer that you didn't submit this



-------------------------------------
author: Amani Conrad
date: 2012-05-17 21:20:38.405000000

Patch Set 3: (1 inline comment)



Line:325, pytests/checkpoint.py -> Changing this to :-
def _failover(self, master, failover_node):
        rest = RestConnection(master)
        result = rest.fail_over(failover_node)
        return result

and the invocation :
#Failover slave1
        if self._failover(master, slave1) is True:
            log.info("Failed over slave1[node  %s] and loading %s items" % (slave1, self.items))
        else:
            self.fail("Error! Unable to failover node %s"%slave1)


The rest_client raises an exception i-If there is one during failover. This should raise an exception only on Failover actual errors.. and not on any programming/input errors.

-------------------------------------
author: Kenny Maynard
date: 2012-05-17 21:44:32.212000000

Patch Set 3: (3 inline comments)



Line:320, pytests/checkpoint.py -> Delete this result variable.

Line:322, pytests/checkpoint.py -> return rest.fail_over(failover_node)

Line:326, pytests/checkpoint.py -> return None

-------------------------------------
author: Amani Conrad
date: 2012-05-17 22:32:56.467000000

Patch Set 3: (1 inline comment)



Line:326, pytests/checkpoint.py -> Changing this function to only resturn the rest_call.
[return None/ result variable etc is not valid in that case.]

def _failover(self, master, failover_node):
        rest = RestConnection(master)
       return rest.fail_over(failover_node)

-------------------------------------
author: Kenny Maynard
date: 2012-05-17 22:34:01.441000000

Patch Set 3: (1 inline comment)



Line:326, pytests/checkpoint.py -> Okay that's fine. Just post the code for review.

-------------------------------------
