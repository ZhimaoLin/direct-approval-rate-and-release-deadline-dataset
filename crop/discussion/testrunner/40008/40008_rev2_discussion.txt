DESCRIPTION

Fix spatial view query tests

Generating expected docs that match exactly the spatial view
return value is not possible. The reason is that the result is
not ordered in any way, hence a limit can be different, depending
on how the data is shaped.

Hence the expected docs should only take the bounding box into
account, but not any other constraints like skip or limit. This
means that the expected results are a superset of the actually
returned results. Therefore it doesn't make sense to output the
expected number as it will be meaningless and can't be compared
to the actual result.

As the expected number of items might be bigger than the actual
one, the querying of the view is now done with stale=false.
Before it was done with stale=update_after until the expected
number of items was reached.

Change-Id: I75d00f621dc93bbd065ed87de6fc59636b03ee48


COMMENTS

author: Ayla Reynolds
date: 2014-07-29 15:34:12.907000000

Uploaded patch set 2.

-------------------------------------
author: Jasmin Rangel
date: 2014-07-29 15:34:13.559000000

Patch Set 2:

New patchset patch-id matches previous patchset, but commit message has changed.

-------------------------------------
author: Hugo Blankenship
date: 2014-07-29 15:34:20.462000000

Patch Set 2:

Build Started http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/2165/

-------------------------------------
author: Hugo Blankenship
date: 2014-07-29 15:50:35.957000000

Patch Set 2: Verified+1

Build Successful 

http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/2165/ : SUCCESS

-------------------------------------
author: Moises Brennan
date: 2014-08-04 08:43:11.596000000

Patch Set 2: Code-Review+1

-------------------------------------
author: Ayla Reynolds
date: 2014-12-08 12:03:38.132000000

Abandoned

This change no longer applies.

-------------------------------------
