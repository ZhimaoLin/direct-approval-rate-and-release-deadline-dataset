DESCRIPTION

CBQE-0: Automation framework for 2i testing using indexing with tests

- Basic API for automation of 2i tests
- Basic tests for scan, recovery, index-create, index-drop

Implementation Notes

Base_2i and Tuq: We have reused QueryTests defined by N1QL team since they have an infrastructure that works. Base_2i is our base class for testing which extends from QueryTests. 

QueryDefinitions: Define a query template, index used, groups for defining a query. Once defined, we can define queries for index create/drop and related queries. Groups help us tag the query definitions such as (using simple/composite indexes, range scan in indexes, type of data set used i.e. whether we have group by/order by etc within the query. This helps grouping a set of query definitions when running via test case. Also, we do not need to write explicit tests per query type - leading to code reduction, plus giving structure to our testing. Query definitions are designed to work against any particular bucket, depends on their usability. 
Example: See Integration and recovery tests

Before, In_between, After: We have defined a set of events such as {Create index, Run Query based on index, Drop Index} and subsets of these can be occur before, in_between and after an event. This event can be an recovery operation in 2i, rebalance in cluster, bucket operation such as upsets. By giving the ability to alter these basic operations of querying during our target events, we can define different scenarios for testing per event. This helps in code reduction and giving more structure to our tests.
Example: See Recovery tests
Our main goal is to iteratively add the tests. Please do not expect all the test to be implemented during this patch.

Change-Id: I03915cca481f9cee19f75f23341b3cbcd7b1bf03


COMMENTS

author: Quentin Ali
date: 2014-12-11 04:25:03.296000000

Patch Set 27: Commit message was updated

-------------------------------------
author: Jasmin Rangel
date: 2014-12-11 04:25:04.056000000

Patch Set 27:

New patchset patch-id matches previous patchset, but commit message has changed.

-------------------------------------
author: Hugo Blankenship
date: 2014-12-11 04:25:10.413000000

Patch Set 27:

Build Started http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/3341/

-------------------------------------
author: Hugo Blankenship
date: 2014-12-11 04:31:04.441000000

Patch Set 27: Verified+1

Build Successful 

http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/3341/ : SUCCESS

-------------------------------------
