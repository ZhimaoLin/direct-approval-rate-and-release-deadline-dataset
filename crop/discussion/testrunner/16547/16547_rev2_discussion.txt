DESCRIPTION

CBD-304: enabled memory stats in StatsCollector

Change-Id: I94c1d6d17d80e4807d5ece04b48cb74d4df70ecb


COMMENTS

author: Alex Mcmahon
date: 2012-06-01 01:47:41.811000000

Uploaded patch set 2.

-------------------------------------
author: Hugo Blankenship
date: 2012-06-01 01:47:45.202000000

Patch Set 2:

Build Started http://qa.hq.northscale.net/job/testrunner-Jasmin Rangel-master/571/ 

-------------------------------------
author: Hugo Blankenship
date: 2012-06-01 01:57:52.183000000

Patch Set 2: Verified

Build Successful 

http://qa.hq.northscale.net/job/testrunner-Jasmin Rangel-master/571/ : SUCCESS

-------------------------------------
author: Kenny Maynard
date: 2012-06-01 02:54:23.632000000

Patch Set 2: I would prefer that you didn't submit this

(1 inline comment)



Line:408, lib/membase/performance/stats.py -> Won't mem_stats go out of scope before we update the stats?

-------------------------------------
author: Alex Mcmahon
date: 2012-06-01 04:11:50.866000000

Patch Set 2: (1 inline comment)



Line:408, lib/membase/performance/stats.py -> Can you cite an case?

-------------------------------------
author: Kenny Maynard
date: 2012-06-01 04:22:45.568000000

Patch Set 2: (1 inline comment)



Line:408, lib/membase/performance/stats.py -> Shouldn't it be like this?
mem_stats = None
try:
    mem_stats = mc.stats('raw memory')
except MemcachedError:
    mem_stats = mc.stats('memory')
stats.update(mem_stats)
Maybe python has different scoping rules, but in all other languages I've worked with this code wouldn't work because the mem_stats in stats.update(mem_used) wouldn't be around anymore.

-------------------------------------
author: Alex Mcmahon
date: 2012-06-01 04:56:53.478000000

Patch Set 2: (1 inline comment)



Line:408, lib/membase/performance/stats.py -> It's definitively not a Python case.

-------------------------------------
author: Kenny Maynard
date: 2012-06-01 05:27:04.376000000

Patch Set 2: Looks good to me, approved



-------------------------------------
author: Alex Mcmahon
date: 2012-06-01 16:16:46.576000000

Change has been successfully cherry-picked as 9eb741e47f9d72ccf81894b0d7b7057838a4cb00.

-------------------------------------
