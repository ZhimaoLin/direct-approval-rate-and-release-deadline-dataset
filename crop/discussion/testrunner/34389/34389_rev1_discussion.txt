DESCRIPTION

CBQE-2113:Current install script uses "get_all_builds()" which gets builds and then find_builds.
A better way to implement this is using find_release_build().

This fix addresses 2 things:
1. Fix version[:5] to identify the correct version to use
find_release_build() instead of get_all_builds()
2. Fix download_binary call to first fetch builds from latestBuilds and
then from releases [this will contain only archived data and not current
dev-branch-builds]

Change-Id: I564f1191255baf5cb690dbc16c69923ddc9e0506


COMMENTS

author: Amani Conrad
date: 2014-03-11 19:19:25.281000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2014-03-11 19:48:56.848000000

Patch Set 1: Verified+1

Build Successful 

http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/684/ : SUCCESS

-------------------------------------
author: Esperanza Cherry
date: 2014-03-11 20:16:28.904000000

Patch Set 1:

(1 comment)

Line:193, scripts/install.py -> what is version[:5]? it's last digit in A.B.C version?

-------------------------------------
author: Amani Conrad
date: 2014-03-11 21:14:31.839000000

Patch Set 1:

(1 comment)

Line:193, scripts/install.py -> it is first 6 vars from the version.

The version is 3.0.0-419-rel, so version[:5] = 3.0.0

-------------------------------------
author: Esperanza Cherry
date: 2014-03-11 22:02:59.800000000

Patch Set 1:

(1 comment)

Line:193, scripts/install.py -> oh, my carelessness)

but what we get when we have released build 2.5.1-RELEASED but need to install any other version, for example 2.5.1-PATCHED

-------------------------------------
author: Amani Conrad
date: 2014-03-14 19:45:09.294000000

Patch Set 1:

(1 comment)

Line:193, scripts/install.py -> Ah, I did not quite get the question- could you point me to an existing such build name.

And with the current setup, how do we install such builds ie do we get it from get_all_builds then?

-------------------------------------
author: Frederick Booker
date: 2014-03-17 22:51:35.723000000

Patch Set 1:

(1 comment)

Line:191, scripts/install.py -> if you put 2.5.1  and 3.0.0 in release version, it will go into /releases folder in hq.northscale.net/releases, not hq.northscale.net/latestbuilds

-------------------------------------
author: Esperanza Cherry
date: 2014-03-24 20:35:29.949000000

Patch Set 1:

(1 comment)

Hi Luca Rhodes, please see also latest comment from Tony.

Line:193, scripts/install.py -> example:
we release 2.5.1-999-rel. then dev created patch and uploaded 2.5.1-1000-rel. seems like we always take 2.5.1-999 from hq.northscale.net/releases and will not be possible to install  2.5.1-1000

-------------------------------------
author: Amani Conrad
date: 2015-12-19 02:05:34.406000000

Abandoned

-------------------------------------
