DESCRIPTION

2i.index_load_balancing_tests Fixes

- test_load_balance_when_index_node_down_stop
- test_load_balance_when_index_node_down_network_partition
Remove querying for unavailable indexes

lib.remote.remote_util
- server_stop
- server_start
Add os support other than Unix

Resolves: CBQE-3072

Change-Id: I37d0f7bac564d14a69aa7ce03f9fc9caf19ac792


COMMENTS

author: Coby Mathis
date: 2015-10-12 09:07:04.841000000

Uploaded patch set 1.

-------------------------------------
author: Hugo Blankenship
date: 2015-10-12 09:07:08.621000000

Patch Set 1:

Build Started http://factory.couchbase.com/job/testrunner-Jasmin Rangel-sherlock/6016/

-------------------------------------
author: Hugo Blankenship
date: 2015-10-12 09:24:59.869000000

Patch Set 1: Verified-1

Build Failed 

http://factory.couchbase.com/job/testrunner-Jasmin Rangel-sherlock/6016/ : FAILURE

detect lines like:

suite viewmergetests.ViewMergingTests , pass 38 , fail 1 ( http://factory.couchbase.com//job/testrunner-Jasmin Rangel-sherlock/6016/ )

need to update, install, or configure build tools, environment variables, ssh credentials (requires no code change) ( http://factory.couchbase.com//job/testrunner-Jasmin Rangel-sherlock/6016/ )

-------------------------------------
author: Adelaide Rodgers
date: 2015-10-12 09:28:45.701000000

Patch Set 1: Code-Review+2

(1 comment)

Line:51, pytests/2i/index_load_balancing_2i.py -> please remove white spaces at the end of line - there are couple of other lines as well

-------------------------------------
author: Lucille Zavala
date: 2015-10-12 09:43:12.698000000

Patch Set 1:

(2 comments)

Line:16, pytests/2i/index_load_balancing_2i.py -> I guess the main reason for having try in block was to catch any exception after stopping the server. Lets say there was a failure after stopping the server. The test will exit without starting the server back again, which will affect the tests following this test since the server is not up. So either we need to keep this try block, or start the server in the teardown.

Line:35, pytests/2i/index_load_balancing_2i.py -> Does this depend on the server to be stopped? If yes, I guess this statement has to come after the following sleep.

-------------------------------------
author: Coby Mathis
date: 2015-10-12 10:25:18.190000000

Patch Set 1: Code-Review+1

(3 comments)

Line:16, pytests/2i/index_load_balancing_2i.py -> If there is any problem in stopping the server, it should be cought in that method itself. It is not the job of this test. If there is any particular exception this test is supposed to catch, then only we should add try block..

Line:35, pytests/2i/index_load_balancing_2i.py -> Nope. It's just updating the query_definitions list.

Line:51, pytests/2i/index_load_balancing_2i.py -> Acknowledged!

-------------------------------------
author: Coby Mathis
date: 2015-10-12 10:28:18.009000000

Removed the following votes:

* Verified-1 by Hugo Blankenship xxx@xxx.xxx


-------------------------------------
author: Coby Mathis
date: 2015-10-12 10:28:24.496000000

Patch Set 1: Verified+1

-------------------------------------
author: Tate Garrett
date: 2015-10-12 10:28:35.791000000

Change has been successfully cherry-picked as 9e94067d093a7253fd6d203bf7dcfb4aa4dab38c

-------------------------------------
