DESCRIPTION

CBQE-2177:: Adding support for delta rebalance+some basic tests

Change-Id: I565c7a24adaa6b917a61e82617085161425862dc


COMMENTS

author: Quentin Ali
date: 2014-04-07 18:29:25.277000000

Uploaded patch set 4.

-------------------------------------
author: Hugo Blankenship
date: 2014-04-07 18:29:29.649000000

Patch Set 4:

Build Started http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/965/

-------------------------------------
author: Quentin Ali
date: 2014-04-07 18:34:19.990000000

Patch Set 4:

- Addressed Sangharsh and Andreiâ€™s comments
- Added parameter num_failed_nodes to signify nodes failed than using replicas as the count
- To use recoveryType for more than one failed nodes use like <option for failed node1>:<option for failed node 2>
- Have added support for data analysis used in failure and rebalance tests. Currently tests not using them
lib/couchbase/data_analysis_helper.py
(Ashvinder, this one is of use for your backup testing with cbtransfer)

-------------------------------------
author: Hugo Blankenship
date: 2014-04-07 18:55:18.884000000

Patch Set 4: Verified+1

Build Successful 

http://factory.couchbase.com/job/testrunner-Jasmin Rangel-master/965/ : SUCCESS

-------------------------------------
author: Esperanza Cherry
date: 2014-04-07 19:15:27.181000000

Patch Set 4: Code-Review-1

(3 comments)

Line:118, pytests/failover/failovertests.py -> self.recoveryType is a list? if list has 2 items then for node you change recovery type twice?

Line:1973, lib/remote/remote_util.py -> you iterate through buckets. so headerInfo contains info only for the latest bucket at the end

Line:12, lib/couchbase/data_analysis_helper.py -> btw, where these methods are used?

-------------------------------------
author: Esperanza Cherry
date: 2014-04-07 19:17:37.627000000

Patch Set 4:

Have added support for data analysis used in failure and rebalance tests. Currently tests not using them

could we split the commit on 2 part: failover changes & data analysis?

-------------------------------------
author: Quentin Ali
date: 2014-04-07 21:13:36.506000000

Patch Set 4:

Thanks, Andrei and Ashvinder for the feedback.

I will the issues as observed.

The data analysis can definitely be another review process. Let me fix this.

-------------------------------------
