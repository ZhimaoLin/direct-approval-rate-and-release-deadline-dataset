DESCRIPTION

JVMCBC-342: Decrease environment counter on shutdown and emit event.

Motivation
----------
To be more correct the environment now decreses its instance counter
so that when properly shutdown and then created no warning is issued

Modifications
-------------
In addition to the counter change a new event type has been added
that is emitted on the event bus. Note that since the event is
emitted right at startup time the event can only be captured if
a custom (or shared) event bus is passed in, which is possible if
for example the event bus is a target for an external monitoring
app.

Result
------
More correct handling of shutdown environments and a new event
type that helps getting identified about this situation.

Change-Id: Id9b403da01fd45a7ebcea1c71b7d41fc76c09fed


COMMENTS

author: Natasha Sullivan
date: 2016-06-23 09:47:45.260000000

Uploaded patch set 2.

-------------------------------------
author: Natasha Sullivan
date: 2016-06-23 09:47:59.038000000

Patch Set 2: Verified+1

-------------------------------------
author: Cory Peck
date: 2016-06-23 09:49:13.922000000

Patch Set 2: Code-Review+2

-------------------------------------
author: Estrella Humphrey
date: 2016-06-27 18:25:07.947000000

Patch Set 2: Code-Review+2

-------------------------------------
author: Gerrit Code Review
date: 2016-07-06 11:55:34.024000000

Change has been successfully cherry-picked as fd47b831955dc28db3e98ae89f6630617827f12e by Natasha Sullivan

-------------------------------------
